{"version":3,"sources":["Constants.ts","User.ts","Workbench.ts","components/Board.ts","components/Mcu.ts","math/Rectangle.ts","components/RaspberryPi.ts","components/Hat.ts","components/LedDisplay.ts","components/Buzzer.ts","Util.ts","components/LedLight.ts","components/Button.ts","components/Sensor.ts","tools/ColorPicker.ts","components/RainbowHat.ts","components/SenseHat.ts","components/CapacitiveTouchHat.ts","components/UnicornHat.ts","components/CrickitHat.ts","components/PanTiltHat.ts","System.ts","ComponentsPanel.ts","ui/ComponentContextMenu.ts","ui/HatContextMenu.ts","ui/RainbowHatContextMenu.ts","ui/WorkbenchContextMenu.ts","ui/LineChartContextMenu.ts","ui/RaspberryPiContextMenu.ts","ui/ColorPickerContextMenu.ts","code/Block.ts","math/Point.ts","code/Codespace.ts","code/Code.ts","ui/SenseHatContextMenu.ts","ui/CapacitiveTouchHatContextMenu.ts","ui/UnicornHatContextMenu.ts","ui/CrickitHatContextMenu.ts","ui/PanTiltHatContextMenu.ts","Main.ts","node_modules/parcel/src/builtins/bundle-url.js","node_modules/parcel/src/builtins/css-loader.js","node_modules/parcel/src/builtins/hmr-runtime.js"],"names":["bundleURL","getBundleURLCached","getBundleURL","Error","err","matches","stack","match","getBaseURL","url","replace","exports","bundle","require","updateLink","link","newLink","cloneNode","onload","remove","href","split","Date","now","parentNode","insertBefore","nextSibling","cssTimeout","reloadCSS","setTimeout","links","document","querySelectorAll","i","length","module","OVERLAY_ID","OldModule","Module","moduleName","call","hot","data","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","push","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","event","JSON","parse","type","handled","assets","forEach","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","id","every","generated","js","console","clear","hmrApply","v","hmrAcceptRun","reload","close","onclose","log","removeErrorOverlay","error","message","overlay","createErrorOverlay","body","appendChild","getElementById","createElement","stackTrace","innerText","innerHTML","getParents","modules","parents","k","d","dep","Array","isArray","concat","Function","deps","cached","cache","some","cb"],"mappings":"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","file":"Main.d562fc5b.js","sourceRoot":"..","sourcesContent":["/*\r\n * @author Charles Xie\r\n */\r\n\r\nexport const Software = {\r\n  name: <string>'IoT Workbench',\r\n  abbreviation: <string>'IW',\r\n  version: <string>'0.0.1'\r\n}\r\n\r\n\r\nexport const Font = {\r\n  label: <string>'9px Arial',\r\n  normal: <string>'10px Arial',\r\n  axisName: <string>'12px Arial',\r\n  highlight: <string>'14px Arial'\r\n}\r\n","/*\r\n * @author Charles Xie\r\n */\r\n\r\nimport {Person} from \"./Person\";\r\n\r\nexport class User implements Person {\r\n\r\n  public fullName: string;\r\n\r\n  constructor(public firstName: string, public middleInitial: string, public lastName: string) {\r\n    if (middleInitial) {\r\n      this.fullName = firstName + \" \" + middleInitial + \" \" + lastName;\r\n    } else {\r\n      this.fullName = firstName + \" \" + lastName;\r\n    }\r\n  }\r\n\r\n}\r\n","/*\r\n * @author Charles Xie\r\n */\r\n\r\nimport {contextMenus} from \"./Main\";\r\n\r\nexport class Workbench {\r\n\r\n  readonly canvas: HTMLCanvasElement;\r\n\r\n  private gridSize: number = 20;\r\n\r\n  constructor(canvasId: string) {\r\n    this.canvas = document.getElementById(canvasId) as HTMLCanvasElement;\r\n    this.canvas.addEventListener(\"mousedown\", this.mouseDown.bind(this), false);\r\n    this.canvas.addEventListener(\"mouseup\", this.mouseUp.bind(this), false);\r\n    this.canvas.addEventListener(\"mousemove\", this.mouseMove.bind(this), false);\r\n    this.canvas.addEventListener('contextmenu', this.openContextMenu.bind(this), false);\r\n  }\r\n\r\n  public draw(): void {\r\n    let context = this.canvas.getContext('2d');\r\n    context.clearRect(0, 0, this.canvas.width, this.canvas.height);\r\n    this.drawGrid(context);\r\n  }\r\n\r\n  public drawGrid(context: CanvasRenderingContext2D): void {\r\n    context.beginPath();\r\n    context.strokeStyle = \"LightSkyBlue\";\r\n    for (let i = 1; i <= this.canvas.height / this.gridSize; i++) {\r\n      context.moveTo(0, i * this.gridSize);\r\n      context.lineTo(this.canvas.width, i * this.gridSize);\r\n    }\r\n    for (let i = 1; i <= this.canvas.width / this.gridSize; i++) {\r\n      context.moveTo(i * this.gridSize, 0);\r\n      context.lineTo(i * this.gridSize, this.canvas.height);\r\n    }\r\n    context.stroke();\r\n    context.closePath();\r\n    context.restore();\r\n  }\r\n\r\n  // detect if (x, y) is inside this workbench\r\n  public contains(x: number, y: number): boolean {\r\n    return x > this.canvas.offsetLeft && x < this.canvas.offsetLeft + this.canvas.width && y > this.canvas.offsetTop && y < this.canvas.offsetTop + this.canvas.height;\r\n  }\r\n\r\n  public getX(): number {\r\n    return 10;\r\n  }\r\n\r\n  public getY(): number {\r\n    return 10;\r\n  }\r\n\r\n  public getWidth(): number {\r\n    return this.canvas.width;\r\n  }\r\n\r\n  public getHeight(): number {\r\n    return this.canvas.height;\r\n  }\r\n\r\n  private mouseDown(e: MouseEvent): void {\r\n    e.preventDefault();\r\n    let rect = this.canvas.getBoundingClientRect();\r\n    let dx = e.clientX - rect.x;\r\n    let dy = e.clientY - rect.y;\r\n  }\r\n\r\n  private mouseUp(e: MouseEvent): void {\r\n    e.preventDefault();\r\n    let rect = this.canvas.getBoundingClientRect();\r\n    let dx = e.clientX - rect.x;\r\n    let dy = e.clientY - rect.y;\r\n    let context = this.canvas.getContext(\"2d\");\r\n  }\r\n\r\n  private mouseMove(e: MouseEvent): void {\r\n    e.preventDefault();\r\n    let rect = this.canvas.getBoundingClientRect();\r\n    let dx = e.clientX - rect.x;\r\n    let dy = e.clientY - rect.y;\r\n    let context = this.canvas.getContext(\"2d\");\r\n  }\r\n\r\n  private openContextMenu(e: MouseEvent): void {\r\n    e.preventDefault();\r\n    let menu = document.getElementById(contextMenus.workbench.id) as HTMLMenuElement;\r\n    menu.style.left = e.clientX + \"px\";\r\n    menu.style.top = (e.clientY - document.getElementById(\"tabs\").getBoundingClientRect().bottom) + \"px\";\r\n    menu.classList.add(\"show-menu\");\r\n  }\r\n\r\n}\r\n","/*\r\n * A rectangular printed circuit board (PCB)\r\n *\r\n * @author Charles Xie\r\n */\r\n\r\nimport {Movable} from \"../Movable\";\r\nimport {Rectangle} from \"../math/Rectangle\";\r\n\r\nexport abstract class Board implements Movable {\r\n\r\n  readonly canvas: HTMLCanvasElement;\r\n  public handles: Rectangle[] = [];\r\n  uid: string;\r\n\r\n  constructor(canvasId: string) {\r\n    this.canvas = document.getElementById(canvasId) as HTMLCanvasElement;\r\n  }\r\n\r\n  public getUid(): string {\r\n    return this.uid;\r\n  }\r\n\r\n  public getX(): number {\r\n    return this.canvas.offsetLeft;\r\n  }\r\n\r\n  public setX(x: number): void {\r\n    this.canvas.style.left = x + \"px\";\r\n  }\r\n\r\n  public getY(): number {\r\n    return this.canvas.offsetTop;\r\n  }\r\n\r\n  public setY(y: number): void {\r\n    this.canvas.style.top = y + \"px\";\r\n  }\r\n\r\n  public getWidth(): number {\r\n    return this.canvas.width;\r\n  }\r\n\r\n  public getHeight(): number {\r\n    return this.canvas.height;\r\n  }\r\n\r\n  public abstract draw(): void;\r\n\r\n  // detect if (x, y) is inside this board\r\n  public contains(x: number, y: number): boolean {\r\n    return x > this.canvas.offsetLeft && x < this.canvas.offsetLeft + this.canvas.width && y > this.canvas.offsetTop && y < this.canvas.offsetTop + this.canvas.height;\r\n  }\r\n\r\n  abstract drawToolTips(): void;\r\n\r\n  abstract updateFirebase(value): void;\r\n\r\n  abstract updateFromFirebase(): void;\r\n\r\n  whichHandle(x: number, y: number): number {\r\n    for (let i = 0; i < this.handles.length; i++) {\r\n      if (this.handles[i].contains(x, y)) return i;\r\n    }\r\n    return -1;\r\n  }\r\n\r\n  drawHandle(handle: Rectangle, context: CanvasRenderingContext2D): void {\r\n    context.strokeStyle = \"yellow\";\r\n    context.beginPath();\r\n    context.rect(handle.x, handle.y, handle.width, handle.height);\r\n    context.stroke();\r\n    context.closePath();\r\n  }\r\n\r\n}\r\n","/*\n * Microcontroller unit (MCU)\n *\n * @author Charles Xie\n */\n\nimport {Board} from \"./Board\";\n\nexport abstract class Mcu extends Board {\n\n}\n","/*\r\n * @author Charles Xie\r\n */\r\n\r\nexport class Rectangle {\r\n\r\n  public x: number;\r\n  public y: number;\r\n  public width: number;\r\n  public height: number;\r\n\r\n  constructor(x: number, y: number, width: number, height: number) {\r\n    this.x = x;\r\n    this.y = y;\r\n    this.width = width;\r\n    this.height = height;\r\n  }\r\n\r\n  public getXmax(): number {\r\n    return this.x + this.width;\r\n  }\r\n\r\n  public getYmax(): number {\r\n    return this.y + this.height;\r\n  }\r\n\r\n  public getXmin(): number {\r\n    return this.x;\r\n  }\r\n\r\n  public getYmin(): number {\r\n    return this.y;\r\n  }\r\n\r\n  public getCenterX(): number {\r\n    return this.x + this.width / 2;\r\n  }\r\n\r\n  public getCenterY(): number {\r\n    return this.y + this.height / 2;\r\n  }\r\n\r\n  public contains(px: number, py: number): boolean {\r\n    return px > this.x && px < this.x + this.width && py > this.y && py < this.y + this.height;\r\n  }\r\n\r\n  public intersectRect(r: Rectangle): boolean {\r\n    return !(r.x > this.getXmax() || r.getXmax() < this.x || r.y > this.getYmax() || r.getYmax() < this.y);\r\n  }\r\n\r\n  public toString(): string {\r\n    return \"[\" + this.x + \", \" + this.y + \", \" + this.width + \", \" + this.height + \"]\";\r\n  }\r\n\r\n}\r\n","/*\r\n * @author Charles Xie\r\n */\r\n\r\nimport {Hat} from \"./Hat\";\r\nimport {Mcu} from \"./Mcu\";\r\nimport {Rectangle} from \"../math/Rectangle\";\r\nimport {contextMenus, system} from \"../Main\"; // this is needed as we use augmented methods of canvas defined in Main.ts\r\n\r\n// @ts-ignore\r\nimport raspberryPiImage from \"../img/raspberry-pi.png\";\r\n\r\nexport class RaspberryPi extends Mcu {\r\n\r\n  hat: Hat;\r\n\r\n  private boardImage: HTMLImageElement;\r\n  private mouseOverObject: any;\r\n\r\n  constructor(canvasId: string, uid: string) {\r\n    super(canvasId);\r\n\r\n    this.uid = uid;\r\n    this.canvas.addEventListener(\"mousedown\", this.mouseDown, false);\r\n    this.canvas.addEventListener(\"mouseup\", this.mouseUp, false);\r\n    this.canvas.addEventListener(\"mousemove\", this.mouseMove, false);\r\n    this.canvas.addEventListener('contextmenu', this.openContextMenu, false);\r\n\r\n    this.handles.push(new Rectangle(5, 5, 30, 30));\r\n    this.handles.push(new Rectangle(395, 5, 30, 30));\r\n    this.handles.push(new Rectangle(395, 245, 30, 30));\r\n    this.handles.push(new Rectangle(5, 245, 30, 30));\r\n\r\n    this.boardImage = new Image();\r\n    this.boardImage.src = raspberryPiImage;\r\n    this.setX(20);\r\n    this.setY(20);\r\n\r\n    this.updateFromFirebase();\r\n  }\r\n\r\n  public draw(): void {\r\n    let ctx = this.canvas.getContext('2d');\r\n    ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\r\n    ctx.save();\r\n    ctx.shadowOffsetX = 10;\r\n    ctx.shadowOffsetY = 10;\r\n    ctx.shadowColor = \"rgb(96, 96, 96)\";\r\n    ctx.shadowBlur = 10;\r\n    ctx.drawImage(this.boardImage, 0, 0);\r\n    ctx.restore();\r\n    this.drawToolTips();\r\n  }\r\n\r\n  private openContextMenu = (e: MouseEvent): void => {\r\n    e.preventDefault();\r\n    let menu = document.getElementById(contextMenus.raspberryPi.id) as HTMLMenuElement;\r\n    menu.style.left = e.clientX + \"px\";\r\n    menu.style.top = (e.clientY - document.getElementById(\"tabs\").getBoundingClientRect().bottom) + \"px\";\r\n    menu.classList.add(\"show-menu\");\r\n    contextMenus.raspberryPi.raspberryPi = this;\r\n  };\r\n\r\n  private mouseDown = (e: MouseEvent): void => {\r\n  };\r\n\r\n  private mouseUp = (e: MouseEvent): void => {\r\n  };\r\n\r\n  private mouseMove = (e: MouseEvent): void => {\r\n    // e.preventDefault();\r\n    let rect = this.canvas.getBoundingClientRect();\r\n    let dx = e.clientX - rect.x;\r\n    let dy = e.clientY - rect.y;\r\n    if (this.handles[0].contains(dx, dy)) {\r\n      this.mouseOverObject = this.handles[0];\r\n      this.canvas.style.cursor = \"move\";\r\n    } else if (this.handles[1].contains(dx, dy)) {\r\n      this.mouseOverObject = this.handles[1];\r\n      this.canvas.style.cursor = \"move\";\r\n    } else if (this.handles[2].contains(dx, dy)) {\r\n      this.mouseOverObject = this.handles[2];\r\n      this.canvas.style.cursor = \"move\";\r\n    } else if (this.handles[3].contains(dx, dy)) {\r\n      this.mouseOverObject = this.handles[3];\r\n      this.canvas.style.cursor = \"move\";\r\n    } else {\r\n      this.mouseOverObject = null;\r\n      this.canvas.style.cursor = \"default\";\r\n    }\r\n    this.draw();\r\n  };\r\n\r\n  drawToolTips(): void {\r\n    let context = this.canvas.getContext('2d');\r\n    let x = 0;\r\n    let y = -25;\r\n    if (this.mouseOverObject == this.handles[0]) {\r\n      this.drawHandle(this.mouseOverObject, context);\r\n      x += this.handles[0].getXmax() + 20;\r\n      y += this.handles[0].getYmax() + 30;\r\n      context.drawTooltip(x, y, 20, 8, 10, 'Upper-left handle', true);\r\n    } else if (this.mouseOverObject == this.handles[1]) {\r\n      this.drawHandle(this.mouseOverObject, context);\r\n      x += this.handles[1].getXmin() - 30;\r\n      y += this.handles[1].getYmax() + 30;\r\n      context.drawTooltip(x, y, 20, 8, 10, 'Upper-right handle', true);\r\n    } else if (this.mouseOverObject == this.handles[2]) {\r\n      this.drawHandle(this.mouseOverObject, context);\r\n      x += this.handles[2].getXmin() - 30;\r\n      y += this.handles[2].getYmin() - 5;\r\n      context.drawTooltip(x, y, 20, 8, 10, 'Lower-right handle', true);\r\n    } else if (this.mouseOverObject == this.handles[3]) {\r\n      this.drawHandle(this.mouseOverObject, context);\r\n      x += this.handles[3].getXmax() + 20;\r\n      y += this.handles[3].getYmin() - 5;\r\n      context.drawTooltip(x, y, 20, 8, 10, 'Lower-left handle', true);\r\n    }\r\n  }\r\n\r\n  updateFirebase(value): void {\r\n    // TODO\r\n  }\r\n\r\n  updateFromFirebase(): void {\r\n    // TODO\r\n  }\r\n\r\n}\r\n","/*\n * Hardware attached on top (HAT) for Raspberry Pi, equivalent to shields for Arduino\n *\n * @author Charles Xie\n */\n\nimport {Board} from \"./Board\";\nimport {RaspberryPi} from \"./RaspberryPi\";\nimport {Rectangle} from \"../math/Rectangle\";\nimport {system} from \"../Main\";\n\nexport abstract class Hat extends Board {\n\n  public raspberryPi: RaspberryPi;\n\n  public attach(raspberryPi: RaspberryPi): void {\n    if (raspberryPi != null) {\n      raspberryPi.hat = this;\n    } else {\n      if (this.raspberryPi != null) {\n        this.raspberryPi.hat = null;\n      }\n    }\n    this.raspberryPi = raspberryPi;\n    if (raspberryPi != null) {\n      this.setX(raspberryPi.getX());\n      this.setY(raspberryPi.getY());\n      localStorage.setItem(\"Attachment: \" + this.getUid(), raspberryPi.uid);\n    } else {\n      localStorage.removeItem(\"Attachment: \" + this.getUid());\n    }\n  }\n\n  public whichRaspberryPi(): number {\n    let r1 = new Rectangle(this.getX(), this.getY(), this.getWidth(), this.getHeight());\n    for (let i = system.mcus.length - 1; i >= 0; i--) {\n      let mcu = system.mcus[i];\n      if (mcu instanceof RaspberryPi) {\n        let a = 20;\n        if (r1.intersectRect(new Rectangle(mcu.getX() + a, mcu.getY() + a, mcu.getWidth() - 2 * a, mcu.getHeight() - 2 * a))) {\n          return i;\n        }\n      }\n    }\n    return -1;\n  }\n\n}\n","/*\r\n * @author Charles Xie\r\n */\r\n\r\nimport {Board} from \"./Board\";\r\nimport {ElectronicComponent} from \"./ElectronicComponent\";\r\n\r\nexport class LedDisplay implements ElectronicComponent {\r\n\r\n  name: string;\r\n  color: string = \"lightgreen\";\r\n  x: number;\r\n  y: number;\r\n  width: number;\r\n  height: number;\r\n  fontSize: string = \"70px\";\r\n\r\n  private character: string;\r\n  private readonly board: Board;\r\n  private readonly fontFamily: string = \"digital-clock-font\";\r\n\r\n  constructor(board: Board, name: string, x: number, y: number, width: number, height: number) {\r\n    this.board = board;\r\n    this.name = name;\r\n    this.x = x;\r\n    this.y = y;\r\n    this.width = width;\r\n    this.height = height;\r\n  }\r\n\r\n  public draw(ctx: CanvasRenderingContext2D) {\r\n    ctx.save();\r\n    if (this.character) {\r\n      ctx.fillStyle = \"lightgreen\";\r\n      ctx.font = this.fontSize + \" \" + this.fontFamily;\r\n      ctx.fillText(this.character, this.x, this.y);\r\n    }\r\n    ctx.restore();\r\n  }\r\n\r\n  public setCharacter(character: string): void {\r\n    if (character != null && character.length != 1) throw \"Only one character is allowed\";\r\n    this.character = character;\r\n  }\r\n\r\n  public contains(x: number, y: number): boolean {\r\n    return x > this.x && x < this.x + this.width && y > this.y && y < this.y + this.height;\r\n  }\r\n\r\n}\r\n","/*\r\n * @author Charles Xie\r\n */\r\n\r\nimport {Board} from \"./Board\";\r\nimport {ElectronicComponent} from \"./ElectronicComponent\";\r\n\r\nexport class Buzzer implements ElectronicComponent {\r\n\r\n  name: string;\r\n  x: number;\r\n  y: number;\r\n  width: number;\r\n  height: number;\r\n  on: boolean;\r\n\r\n  private readonly board: Board;\r\n  private audioContext: AudioContext;\r\n\r\n  constructor(board: Board, name: string, x: number, y: number, width: number, height: number) {\r\n    this.board = board;\r\n    this.name = name;\r\n    this.x = x;\r\n    this.y = y;\r\n    this.width = width;\r\n    this.height = height;\r\n  }\r\n\r\n  public draw(ctx: CanvasRenderingContext2D): void {\r\n    ctx.save();\r\n    if (this.on) {\r\n      ctx.lineWidth = 3;\r\n      ctx.strokeStyle = \"white\";\r\n      let centerX = this.x + this.width / 2;\r\n      let centerY = this.y + this.height / 2;\r\n      let angle = 0.25 * Math.PI;\r\n      for (let i = 0; i < 4; i++) {\r\n        let r = 5 + i * 5;\r\n        ctx.beginPath();\r\n        ctx.arc(centerX, centerY, r, -angle, angle);\r\n        ctx.stroke();\r\n        ctx.beginPath();\r\n        ctx.arc(centerX, centerY, r, Math.PI - angle, Math.PI + angle);\r\n        ctx.stroke();\r\n      }\r\n    }\r\n    ctx.restore();\r\n  }\r\n\r\n  public contains(x: number, y: number): boolean {\r\n    return x > this.x && x < this.x + this.width && y > this.y && y < this.y + this.height;\r\n  }\r\n\r\n  public beepButton(button: string): void {\r\n    switch (button) {\r\n      case \"A\":\r\n        this.beep(1, 800, 200);\r\n        break;\r\n      case \"B\":\r\n        this.beep(1, 400, 200);\r\n        break;\r\n      case \"C\":\r\n        this.beep(1, 200, 200);\r\n        break;\r\n    }\r\n  }\r\n\r\n  public beep(volume: number, frequency: number, duration: number): void {\r\n    this.on = true;\r\n    if (this.audioContext == null) this.audioContext = new AudioContext();\r\n    let v = this.audioContext.createOscillator();\r\n    let u = this.audioContext.createGain();\r\n    v.connect(u);\r\n    v.frequency.value = frequency;\r\n    v.type = \"square\";\r\n    u.connect(this.audioContext.destination);\r\n    u.gain.value = volume * 0.01;\r\n    v.start(this.audioContext.currentTime);\r\n    v.stop(this.audioContext.currentTime + duration * 0.001);\r\n    let that = this;\r\n    setTimeout(function () {\r\n      that.on = false;\r\n      that.board.draw();\r\n    }, 200);\r\n  }\r\n\r\n}\r\n","/*\r\n * @author Charles Xie\r\n */\r\nexport class Util {\r\n\r\n  static countDigits(x: number): number {\r\n    return x.toString().length;\r\n  }\r\n\r\n  static adjust(color: string, amount: number): string {\r\n    return '#' + color.replace(/^#/, '').replace(/../g, color => ('0' + Math.min(255, Math.max(0, parseInt(color, 16) + amount)).toString(16)).substr(-2));\r\n  }\r\n\r\n  static hexToRgb(hex: string): any {\r\n    var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\r\n    return result ? {\r\n      r: parseInt(result[1], 16),\r\n      g: parseInt(result[2], 16),\r\n      b: parseInt(result[3], 16)\r\n    } : null;\r\n  }\r\n\r\n  static rgbToHex(r: number, g: number, b: number): string {\r\n    return \"#\" + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1);\r\n  }\r\n\r\n  static rgbToHue(r: number, g: number, b: number): number {\r\n    r /= 255;\r\n    g /= 255;\r\n    b /= 255;\r\n    var max = Math.max(r, g, b);\r\n    var min = Math.min(r, g, b);\r\n    var c = max - min;\r\n    var hue;\r\n    if (c == 0) {\r\n      hue = 0;\r\n    } else {\r\n      switch (max) {\r\n        case r:\r\n          var segment = (g - b) / c;\r\n          var shift = 0 / 60;       // R / (360 / hex sides)\r\n          if (segment < 0) {        // hue > 180, full rotation\r\n            shift = 360 / 60;       // R / (360 / hex sides)\r\n          }\r\n          hue = segment + shift;\r\n          break;\r\n        case g:\r\n          var segment = (b - r) / c;\r\n          var shift = 120 / 60;     // G / (360 / hex sides)\r\n          hue = segment + shift;\r\n          break;\r\n        case b:\r\n          var segment = (r - g) / c;\r\n          var shift = 240 / 60;     // B / (360 / hex sides)\r\n          hue = segment + shift;\r\n          break;\r\n      }\r\n    }\r\n    return hue * 60; // hue is in [0,6], scale it up\r\n  }\r\n\r\n  static rgbToHsl(r: number, g: number, b: number): any {\r\n    let r1 = r / 255;\r\n    let g1 = g / 255;\r\n    let b1 = b / 255;\r\n    let maxColor = Math.max(r1, g1, b1);\r\n    let minColor = Math.min(r1, g1, b1);\r\n    let lightness = (maxColor + minColor) / 2;\r\n    let saturation = 0;\r\n    let hue = 0;\r\n    if (maxColor != minColor) {\r\n      if (lightness < 0.5) {\r\n        saturation = (maxColor - minColor) / (maxColor + minColor);\r\n      } else {\r\n        saturation = (maxColor - minColor) / (2 - maxColor - minColor);\r\n      }\r\n      if (r1 == maxColor) {\r\n        hue = (g1 - b1) / (maxColor - minColor);\r\n      } else if (g1 == maxColor) {\r\n        hue = 2.0 + (b1 - r1) / (maxColor - minColor);\r\n      } else {\r\n        hue = 4.0 + (r1 - g1) / (maxColor - minColor);\r\n      }\r\n    }\r\n    lightness = lightness * 100;\r\n    saturation = saturation * 100;\r\n    hue = hue * 60;\r\n    if (hue < 0) {\r\n      hue += 360;\r\n    }\r\n    return {h: hue, s: saturation, l: lightness};\r\n  }\r\n\r\n  /*\r\n   * Converts an HSL color value to RGB. Conversion formula\r\n   * adapted from http://en.wikipedia.org/wiki/HSL_color_space.\r\n   * Assumes h, s, and l are contained in the set [0, 1] and\r\n   * returns r, g, and b in the set [0, 255].\r\n   *\r\n   * @param   {number}  h       The hue\r\n   * @param   {number}  s       The saturation\r\n   * @param   {number}  l       The lightness\r\n   * @return  {Array}           The RGB representation\r\n   */\r\n  static hslToRgb(h: number, s: number, l: number): any {\r\n    let r, g, b;\r\n    if (s == 0) {\r\n      r = g = b = l; // achromatic\r\n    } else {\r\n      let hue2rgb = function hue2rgb(p, q, t) {\r\n        if (t < 0) t += 1;\r\n        if (t > 1) t -= 1;\r\n        if (t < 1 / 6) return p + (q - p) * 6 * t;\r\n        if (t < 1 / 2) return q;\r\n        if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;\r\n        return p;\r\n      };\r\n      let q = l < 0.5 ? l * (1 + s) : l + s - l * s;\r\n      let p = 2 * l - q;\r\n      r = hue2rgb(p, q, h + 1 / 3);\r\n      g = hue2rgb(p, q, h);\r\n      b = hue2rgb(p, q, h - 1 / 3);\r\n    }\r\n    return {r: Math.round(r * 255), g: Math.round(g * 255), b: Math.round(b * 255)};\r\n  }\r\n\r\n  static getHueColor(color: string): string {\r\n    let c = Util.hexToRgb(color);\r\n    c = Util.hslToRgb(Util.rgbToHue(c.r, c.g, c.b) / 360, 0.5, 0.5);\r\n    return Util.rgbToHex(c.r, c.g, c.b);\r\n  }\r\n\r\n  // expects 0 <= h, s, v <= 1\r\n  static hsvToRgb(h: number, s: number, v: number): any {\r\n    let r, g, b;\r\n    let i = Math.floor(h * 6);\r\n    let f = h * 6 - i;\r\n    let p = v * (1 - s);\r\n    let q = v * (1 - f * s);\r\n    let t = v * (1 - (1 - f) * s);\r\n    switch (i % 6) {\r\n      case 0:\r\n        r = v, g = t, b = p;\r\n        break;\r\n      case 1:\r\n        r = q, g = v, b = p;\r\n        break;\r\n      case 2:\r\n        r = p, g = v, b = t;\r\n        break;\r\n      case 3:\r\n        r = p, g = q, b = v;\r\n        break;\r\n      case 4:\r\n        r = t, g = p, b = v;\r\n        break;\r\n      case 5:\r\n        r = v, g = p, b = q;\r\n        break;\r\n    }\r\n    return {\r\n      r: Math.round(r * 255),\r\n      g: Math.round(g * 255),\r\n      b: Math.round(b * 255)\r\n    };\r\n  }\r\n\r\n  // output 0 <= h, s, v <= 1\r\n  static rgbToHsv(r: number, g: number, b: number): any {\r\n    let max = Math.max(r, g, b);\r\n    let min = Math.min(r, g, b);\r\n    let d = max - min;\r\n    let h;\r\n    let s = (max === 0 ? 0 : d / max);\r\n    let v = max / 255;\r\n    switch (max) {\r\n      case min:\r\n        h = 0;\r\n        break;\r\n      case r:\r\n        h = (g - b) + d * (g < b ? 6 : 0);\r\n        h /= 6 * d;\r\n        break;\r\n      case g:\r\n        h = (b - r) + d * 2;\r\n        h /= 6 * d;\r\n        break;\r\n      case b:\r\n        h = (r - g) + d * 4;\r\n        h /= 6 * d;\r\n        break;\r\n    }\r\n    return {h: h, s: s, v: v};\r\n  }\r\n\r\n}\r\n","/*\r\n * @author Charles Xie\r\n */\r\n\r\nimport {Board} from \"./Board\";\r\nimport {Util} from \"../Util\";\r\nimport {ElectronicComponent} from \"./ElectronicComponent\";\r\n\r\nexport class LedLight implements ElectronicComponent {\r\n\r\n  name: string;\r\n  color: string = \"#ff0000\";\r\n  radius: number = 4;\r\n  rays: number = 8;\r\n  rayLength: number = 5;\r\n  x: number;\r\n  y: number;\r\n  width: number;\r\n  height: number;\r\n  on: boolean = false;\r\n\r\n  private readonly board: Board;\r\n\r\n  constructor(board: Board, name: string, color: string, radius: number, rays: number, rayLength: number, x: number, y: number, width: number, height: number) {\r\n    this.board = board;\r\n    this.name = name;\r\n    this.color = color;\r\n    this.radius = radius;\r\n    this.rays = rays;\r\n    this.rayLength = rayLength;\r\n    this.x = x;\r\n    this.y = y;\r\n    this.width = width;\r\n    this.height = height;\r\n  }\r\n\r\n  public draw(ctx: CanvasRenderingContext2D): void {\r\n    ctx.save();\r\n    if (this.on) {\r\n      ctx.beginPath();\r\n      ctx.lineWidth = 1;\r\n      let centerX = this.x + this.width / 2;\r\n      let centerY = this.y + this.height / 2;\r\n      if (this.radius < 8) {\r\n        let x1, y1, x2, y2;\r\n        let angle, cos, sin;\r\n        ctx.strokeStyle = \"white\";\r\n        for (let i = 0; i < this.rays; i++) {\r\n          angle = i * Math.PI * 2 / this.rays;\r\n          cos = Math.cos(angle);\r\n          sin = Math.sin(angle);\r\n          x1 = centerX + this.radius * cos * 2 / 3;\r\n          y1 = centerY + this.radius * sin * 2 / 3;\r\n          x2 = centerX + (this.radius + this.rayLength) * cos;\r\n          y2 = centerY + (this.radius + this.rayLength) * sin;\r\n          ctx.beginPath();\r\n          ctx.moveTo(x1, y1);\r\n          ctx.lineTo(x2, y2);\r\n          ctx.stroke();\r\n          ctx.closePath();\r\n        }\r\n        ctx.fillStyle = this.color;\r\n      } else {\r\n        let gradient = ctx.createRadialGradient(centerX, centerY, 0, centerX, centerY, this.radius);\r\n        gradient.addColorStop(1, \"rgba(255, 255, 255, 0)\");\r\n        gradient.addColorStop(0.5, Util.adjust(this.color, -100));\r\n        gradient.addColorStop(0, Util.adjust(this.color, 100));\r\n        ctx.fillStyle = gradient;\r\n      }\r\n      ctx.arc(centerX, centerY, this.radius, 0, Math.PI * 2);\r\n      ctx.closePath();\r\n      ctx.fill();\r\n    } else {\r\n      ctx.beginPath();\r\n      ctx.lineWidth = 2;\r\n      ctx.strokeStyle = this.color;\r\n      ctx.arc(this.x + this.width / 2, this.y + this.height / 2, this.radius, 0, Math.PI * 2);\r\n      ctx.stroke();\r\n      ctx.closePath();\r\n    }\r\n    ctx.restore();\r\n  }\r\n\r\n  public contains(x: number, y: number): boolean {\r\n    return x > this.x && x < this.x + this.width && y > this.y && y < this.y + this.height;\r\n  }\r\n\r\n  public toggle(x: number, y: number): boolean {\r\n    let inside = this.contains(x, y);\r\n    if (inside) {\r\n      this.on = !this.on;\r\n    }\r\n    return inside;\r\n  }\r\n\r\n}\r\n","/*\r\n * @author Charles Xie\r\n */\r\n\r\nimport {Board} from \"./Board\";\r\nimport {ElectronicComponent} from \"./ElectronicComponent\";\r\n\r\nexport class Button implements ElectronicComponent {\r\n\r\n  name: string;\r\n  x: number;\r\n  y: number;\r\n  width: number;\r\n  height: number;\r\n  on: boolean = false;\r\n\r\n  private readonly board: Board;\r\n  private pressedColor: string = '#66cccccc';\r\n\r\n  constructor(board: Board, name: string, x: number, y: number, width: number, height: number) {\r\n    this.board = board;\r\n    this.name = name;\r\n    this.x = x;\r\n    this.y = y;\r\n    this.width = width;\r\n    this.height = height;\r\n  }\r\n\r\n  public draw(ctx: CanvasRenderingContext2D) {\r\n    if (this.on) {\r\n      ctx.fillStyle = this.pressedColor;\r\n      ctx.fillRect(this.x, this.y, this.width, this.height);\r\n    }\r\n    ctx.lineWidth = 1;\r\n    ctx.strokeStyle = 'black';\r\n    ctx.rect(this.x, this.y, this.width, this.height);\r\n    ctx.stroke();\r\n  }\r\n\r\n  public contains(x: number, y: number): boolean {\r\n    return x > this.x && x < this.x + this.width && y > this.y && y < this.y + this.height;\r\n  }\r\n\r\n}\r\n","/*\r\n * @author Charles Xie\r\n */\r\n\r\nimport {Board} from \"./Board\";\r\n\r\nexport class Sensor {\r\n\r\n  readonly name: string;\r\n  readonly unit: string;\r\n  readonly data: number[] = [];\r\n  collectionInterval: number = 1; // in seconds\r\n  x: number;\r\n  y: number;\r\n  width: number;\r\n  height: number;\r\n\r\n  private readonly board: Board;\r\n  private on: boolean = false;\r\n  private pressedColor: string = 'white';\r\n\r\n  constructor(board: Board, name: string, unit: string, x: number, y: number, width: number, height: number) {\r\n    this.board = board;\r\n    this.name = name;\r\n    this.unit = unit;\r\n    this.x = x;\r\n    this.y = y;\r\n    this.width = width;\r\n    this.height = height;\r\n  }\r\n\r\n  public draw(ctx: CanvasRenderingContext2D) {\r\n    if (this.on) {\r\n      ctx.fillStyle = this.pressedColor;\r\n      ctx.fillRect(this.x, this.y, this.width, this.height);\r\n    }\r\n    ctx.lineWidth = 1;\r\n    ctx.strokeStyle = 'black';\r\n    ctx.rect(this.x, this.y, this.width, this.height);\r\n    ctx.stroke();\r\n  }\r\n\r\n  public contains(x: number, y: number): boolean {\r\n    return x > this.x && x < this.x + this.width && y > this.y && y < this.y + this.height;\r\n  }\r\n\r\n}\r\n","/*\r\n * @author Charles Xie\r\n */\r\n\r\nimport {Util} from \"../Util\";\r\n\r\nexport class ColorPicker {\r\n\r\n  private rgbaColor: string = \"#ffffffff\";\r\n  private colorLabel: HTMLElement;\r\n  private colorCode: HTMLInputElement;\r\n  private colorBlock: HTMLCanvasElement;\r\n  private colorStrip: HTMLCanvasElement; // this draws the hue of the color\r\n  private ctx1: CanvasRenderingContext2D;\r\n  private ctx2: CanvasRenderingContext2D;\r\n  private savedBlockX: number = -10;\r\n  private savedBlockY: number = -10;\r\n  private savedStripY: number = -10;\r\n\r\n  constructor() {\r\n    this.colorBlock = document.getElementById('color-block') as HTMLCanvasElement;\r\n    this.ctx1 = this.colorBlock.getContext('2d');\r\n    this.colorStrip = document.getElementById('color-strip') as HTMLCanvasElement;\r\n    this.ctx2 = this.colorStrip.getContext('2d');\r\n    this.colorBlock.addEventListener(\"mousedown\", this.mouseDownBlock.bind(this), false);\r\n    this.colorBlock.addEventListener(\"mouseup\", this.mouseUpBlock.bind(this), false);\r\n    this.colorStrip.addEventListener(\"click\", this.mouseClickStrip.bind(this), false);\r\n    this.colorStrip.addEventListener(\"mousedown\", this.mouseDownStrip.bind(this), false);\r\n    this.colorStrip.addEventListener(\"mouseup\", this.mouseUpStrip.bind(this), false);\r\n  }\r\n\r\n  public setColorLabel(colorLabel: HTMLElement) {\r\n    this.colorLabel = colorLabel;\r\n  }\r\n\r\n  public setColorCode(colorCode: HTMLInputElement) {\r\n    this.colorCode = colorCode;\r\n  }\r\n\r\n  public setSelectedColor(color: string): void {\r\n    this.rgbaColor = color;\r\n    let c = Util.hexToRgb(color);\r\n    this.savedStripY = this.colorStrip.height * Util.rgbToHue(c.r, c.g, c.b) / 360;\r\n    if (this.colorLabel) {\r\n      this.colorLabel.style.backgroundColor = color;\r\n    }\r\n    if (this.colorCode) {\r\n      this.colorCode.value = color;\r\n      this.colorCode.select();\r\n    }\r\n  }\r\n\r\n  // TODO: the position should be calculated by inverting the dual-axis shading used in fillGradient()\r\n  // right now, we just use a brute-force method to search for the point that maps to the selected color\r\n  public setSelectedPoint(): void {\r\n    let c = Util.hexToRgb(this.rgbaColor);\r\n    let imageData = this.ctx1.getImageData(0, 0, this.colorBlock.width, this.colorBlock.height).data;\r\n    let n = imageData.length / 4;\r\n    for (let i = 0; i < n; i++) {\r\n      if (imageData[4 * i] == c.r && imageData[4 * i + 1] == c.g && imageData[4 * i + 2] == c.b) {\r\n        this.savedBlockX = i % this.colorBlock.width;\r\n        this.savedBlockY = i / this.colorBlock.width;\r\n        this.draw();\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  public getSelectedColor(): string {\r\n    return this.rgbaColor;\r\n  }\r\n\r\n  public draw(): void {\r\n    // draw color block\r\n    this.ctx1.clearRect(0, 0, this.colorBlock.width, this.colorBlock.height);\r\n    this.ctx1.rect(0, 0, this.colorBlock.width, this.colorBlock.height);\r\n    this.fillGradient();\r\n    this.ctx1.strokeStyle = \"white\";\r\n    this.ctx1.lineWidth = 2;\r\n    this.ctx1.beginPath();\r\n    this.ctx1.arc(this.savedBlockX, this.savedBlockY, 6, 0, 2 * Math.PI);\r\n    this.ctx1.stroke();\r\n    // draw color strip\r\n    this.ctx2.clearRect(0, 0, this.colorStrip.width, this.colorStrip.height);\r\n    this.ctx2.rect(0, 0, this.colorStrip.width, this.colorStrip.height);\r\n    let gradient = this.ctx2.createLinearGradient(0, 0, 0, this.colorStrip.height);\r\n    gradient.addColorStop(0, '#ff0000');\r\n    gradient.addColorStop(1.0 / 6.0, '#ffff00');\r\n    gradient.addColorStop(2.0 / 6.0, '#00ff00');\r\n    gradient.addColorStop(3.0 / 6.0, '#00ffff');\r\n    gradient.addColorStop(4.0 / 6.0, '#0000ff');\r\n    gradient.addColorStop(5.0 / 6.0, '#ff00ff');\r\n    gradient.addColorStop(1, '#ff0000');\r\n    this.ctx2.fillStyle = gradient;\r\n    this.ctx2.fill();\r\n    this.ctx2.fillStyle = \"white\";\r\n    this.ctx2.beginPath();\r\n    this.ctx2.rect(0, this.savedStripY, this.colorStrip.width, 6);\r\n    this.ctx2.fill();\r\n    this.ctx2.strokeStyle = \"black\";\r\n    this.ctx2.lineWidth = 2;\r\n    this.ctx2.beginPath();\r\n    this.ctx2.rect(0, this.savedStripY, this.colorStrip.width, 8);\r\n    this.ctx2.stroke();\r\n  }\r\n\r\n  private fillGradient(): void {\r\n    this.ctx1.fillStyle = Util.getHueColor(this.rgbaColor);\r\n    this.ctx1.fillRect(0, 0, this.colorBlock.width, this.colorBlock.height);\r\n    let grdWhite = this.ctx1.createLinearGradient(0, 0, this.colorBlock.width, 0);\r\n    grdWhite.addColorStop(0, 'rgba(255, 255, 255, 1)');\r\n    grdWhite.addColorStop(1, 'rgba(255, 255, 255, 0)');\r\n    this.ctx1.fillStyle = grdWhite;\r\n    this.ctx1.fillRect(0, 0, this.colorBlock.width, this.colorBlock.height);\r\n    let grdBlack = this.ctx1.createLinearGradient(0, 0, 0, this.colorBlock.height);\r\n    grdBlack.addColorStop(0, 'rgba(0, 0, 0, 0)');\r\n    grdBlack.addColorStop(1, 'rgba(0, 0, 0, 1)');\r\n    this.ctx1.fillStyle = grdBlack;\r\n    this.ctx1.fillRect(0, 0, this.colorBlock.width, this.colorBlock.height);\r\n  }\r\n\r\n  private mouseDownStrip(e: MouseEvent): void {\r\n    e.stopPropagation();\r\n  }\r\n\r\n  private mouseUpStrip(e: MouseEvent): void {\r\n    e.stopPropagation();\r\n  }\r\n\r\n  private mouseClickStrip(e: MouseEvent): void {\r\n    this.savedStripY = e.offsetY;\r\n    let imageData = this.ctx2.getImageData(e.offsetX, e.offsetY, 1, 1).data;\r\n    this.rgbaColor = Util.rgbToHex(imageData[0], imageData[1], imageData[2]);\r\n    this.draw();\r\n    e.stopPropagation();\r\n  }\r\n\r\n  private mouseDownBlock(e: MouseEvent): void {\r\n    this.changeColor(e);\r\n    e.stopPropagation();\r\n  }\r\n\r\n  private mouseUpBlock(e: MouseEvent): void {\r\n    this.savedBlockX = e.offsetX;\r\n    this.savedBlockY = e.offsetY;\r\n    this.draw();\r\n    e.stopPropagation();\r\n  }\r\n\r\n  private changeColor(e: MouseEvent): void {\r\n    let imageData = this.ctx1.getImageData(e.offsetX, e.offsetY, 1, 1).data;\r\n    this.rgbaColor = Util.rgbToHex(imageData[0], imageData[1], imageData[2]);\r\n    if (this.colorLabel) {\r\n      this.colorLabel.style.backgroundColor = this.rgbaColor;\r\n    }\r\n    if (this.colorCode) {\r\n      this.colorCode.value = this.rgbaColor;\r\n    }\r\n  }\r\n\r\n}\r\n","/*\r\n * Digital twin for the Rainbow HAT\r\n *\r\n * @author Charles Xie\r\n */\r\n\r\nimport {Hat} from \"./Hat\";\r\nimport {LedDisplay} from \"./LedDisplay\";\r\nimport {Buzzer} from \"./Buzzer\";\r\nimport {LedLight} from \"./LedLight\";\r\nimport {Button} from \"./Button\";\r\nimport {Sensor} from \"./Sensor\";\r\nimport {System} from \"../System\";\r\nimport {Util} from \"../Util\";\r\nimport {Rectangle} from \"../math/Rectangle\";\r\nimport {ColorPicker} from \"../tools/ColorPicker\";\r\nimport {contextMenus, system} from \"../Main\";\r\n\r\n// @ts-ignore\r\nimport rainbowHatImage from \"../img/rainbow-hat.png\";\r\n\r\nexport class RainbowHat extends Hat {\r\n\r\n  public redLedLight: LedLight;\r\n  public greenLedLight: LedLight;\r\n  public blueLedLight: LedLight;\r\n  public buttonA: Button;\r\n  public buttonB: Button;\r\n  public buttonC: Button;\r\n  public buzzer: Buzzer;\r\n  public temperatureSensor: Sensor;\r\n  public barometricPressureSensor: Sensor;\r\n  public rgbLedLights: LedLight[] = [];\r\n  public alphanumericDisplays: LedDisplay[] = [];\r\n  public decimalPointDisplays: LedDisplay[] = [];\r\n\r\n  indexOfSelectedRgbLedLight: number = -1;\r\n  private stateId: string = \"rainbow_hat_default\";\r\n  private mouseOverObject: any;\r\n  private boardImage: HTMLImageElement;\r\n\r\n  constructor(canvasId: string, uid: string) {\r\n    super(canvasId);\r\n\r\n    this.uid = uid;\r\n    this.canvas.addEventListener(\"mousedown\", this.mouseDown, false);\r\n    this.canvas.addEventListener(\"mouseup\", this.mouseUp, false);\r\n    this.canvas.addEventListener(\"mousemove\", this.mouseMove, false);\r\n    this.canvas.addEventListener('contextmenu', this.openContextMenu, false);\r\n\r\n    this.redLedLight = new LedLight(this, \"LED Light\", \"red\", 4, 8, 10, 65, 233, 18, 8);\r\n    this.greenLedLight = new LedLight(this, \"LED Light\", \"green\", 4, 8, 10, 147, 233, 18, 8);\r\n    this.blueLedLight = new LedLight(this, \"LED Light\", \"blue\", 4, 8, 10, 230, 233, 18, 8);\r\n    this.buttonA = new Button(this, \"Button A\", 38, 245, 72, 24);\r\n    this.buttonB = new Button(this, \"Button B\", 120, 245, 72, 24);\r\n    this.buttonC = new Button(this, \"Button C\", 203, 245, 72, 24);\r\n    this.buzzer = new Buzzer(this, \"Piezo Buzzer\", 35, 170, 20, 20);\r\n    this.temperatureSensor = new Sensor(this, \"Temperature\", \"C\", 152, 108, 12, 12);\r\n    this.barometricPressureSensor = new Sensor(this, \"Pressure\", \"hPa\", 187, 115, 20, 10);\r\n    this.rgbLedLights.push(new LedLight(this, \"RGB LED Light\", \"black\", 16, 12, 2, 251, 78, 20, 20));\r\n    this.rgbLedLights.push(new LedLight(this, \"RGB LED Light\", \"black\", 16, 12, 2, 218, 62, 20, 20));\r\n    this.rgbLedLights.push(new LedLight(this, \"RGB LED Light\", \"black\", 16, 12, 2, 183, 53, 20, 20));\r\n    this.rgbLedLights.push(new LedLight(this, \"RGB LED Light\", \"black\", 16, 12, 2, 147, 50, 20, 20));\r\n    this.rgbLedLights.push(new LedLight(this, \"RGB LED Light\", \"black\", 16, 12, 2, 111, 53, 20, 20));\r\n    this.rgbLedLights.push(new LedLight(this, \"RGB LED Light\", \"black\", 16, 12, 2, 76, 62, 20, 20));\r\n    this.rgbLedLights.push(new LedLight(this, \"RGB LED Light\", \"black\", 16, 12, 2, 44, 78, 20, 20));\r\n    this.alphanumericDisplays.push(new LedDisplay(this, \"LED Display\", 34, 214, 33, 65));\r\n    this.alphanumericDisplays.push(new LedDisplay(this, \"LED Display\", 95, 214, 33, 65));\r\n    this.alphanumericDisplays.push(new LedDisplay(this, \"LED Display\", 156, 214, 33, 65));\r\n    this.alphanumericDisplays.push(new LedDisplay(this, \"LED Display\", 218, 214, 33, 65));\r\n    this.decimalPointDisplays.push(new LedDisplay(this, \"LED Display\", 78, 214, 33, 65));\r\n    this.decimalPointDisplays.push(new LedDisplay(this, \"LED Display\", 139, 214, 33, 65));\r\n    this.decimalPointDisplays.push(new LedDisplay(this, \"LED Display\", 200, 214, 33, 65));\r\n    this.decimalPointDisplays.push(new LedDisplay(this, \"LED Display\", 261, 214, 33, 65));\r\n    for (let i = 0; i < this.decimalPointDisplays.length; i++) {\r\n      this.decimalPointDisplays[i].fontSize = \"40px\";\r\n    }\r\n\r\n    this.handles.push(new Rectangle(5, 5, 30, 30));\r\n    this.handles.push(new Rectangle(290, 5, 30, 30));\r\n    this.handles.push(new Rectangle(290, 250, 30, 30));\r\n    this.handles.push(new Rectangle(5, 250, 30, 30));\r\n\r\n    this.boardImage = new Image();\r\n    this.boardImage.src = rainbowHatImage;\r\n    this.setY(20);\r\n\r\n    this.updateFromFirebase();\r\n  }\r\n\r\n  public setSelectedRgbLedLightColor(color: string) {\r\n    if (this.indexOfSelectedRgbLedLight >= 0) {\r\n      this.rgbLedLights[this.indexOfSelectedRgbLedLight].color = color;\r\n      this.draw();\r\n      let list = [];\r\n      for (let i = 0; i < this.rgbLedLights.length; i++) {\r\n        let a = [];\r\n        let c = Util.hexToRgb(this.rgbLedLights[i].color);\r\n        a.push(c.r);\r\n        a.push(c.g);\r\n        a.push(c.b);\r\n        list.push(a);\r\n      }\r\n      this.updateFirebase({rainbowRgb: list});\r\n    }\r\n  }\r\n\r\n  public draw(): void {\r\n    let ctx = this.canvas.getContext('2d');\r\n    ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\r\n    ctx.save();\r\n    ctx.shadowOffsetX = 8;\r\n    ctx.shadowOffsetY = 8;\r\n    ctx.shadowColor = \"rgb(96, 96, 96)\";\r\n    ctx.shadowBlur = 8;\r\n    ctx.drawImage(this.boardImage, 0, 0);\r\n    ctx.restore();\r\n    this.redLedLight.draw(ctx);\r\n    this.greenLedLight.draw(ctx);\r\n    this.blueLedLight.draw(ctx);\r\n    this.buttonA.draw(ctx);\r\n    this.buttonB.draw(ctx);\r\n    this.buttonC.draw(ctx);\r\n    this.buzzer.draw(ctx);\r\n    this.temperatureSensor.draw(ctx);\r\n    this.barometricPressureSensor.draw(ctx);\r\n    this.drawToolTips();\r\n    for (let i = 0; i < this.rgbLedLights.length; i++) {\r\n      this.rgbLedLights[i].draw(ctx);\r\n    }\r\n    for (let i = 0; i < this.alphanumericDisplays.length; i++) {\r\n      this.alphanumericDisplays[i].draw(ctx);\r\n    }\r\n    for (let i = 0; i < this.decimalPointDisplays.length; i++) {\r\n      this.decimalPointDisplays[i].draw(ctx);\r\n    }\r\n  }\r\n\r\n  private openContextMenu = (e: MouseEvent): void => {\r\n    e.preventDefault();\r\n    let rect = this.canvas.getBoundingClientRect();\r\n    let dx = e.clientX - rect.x;\r\n    let dy = e.clientY - rect.y;\r\n    this.indexOfSelectedRgbLedLight = -1;\r\n    for (let i = 0; i < this.rgbLedLights.length; i++) {\r\n      if (this.rgbLedLights[i].contains(dx, dy)) {\r\n        this.indexOfSelectedRgbLedLight = i;\r\n        break;\r\n      }\r\n    }\r\n    if (this.indexOfSelectedRgbLedLight >= 0) {\r\n      contextMenus.colorPicker.rainbowHat = this;\r\n      let menu = document.getElementById(contextMenus.colorPicker.id) as HTMLMenuElement;\r\n      menu.style.left = e.clientX + \"px\";\r\n      menu.style.top = (e.clientY - document.getElementById(\"tabs\").getBoundingClientRect().bottom) + \"px\";\r\n      menu.classList.add(\"show-menu\");\r\n      if (system.colorPicker == null) {\r\n        system.colorPicker = new ColorPicker();\r\n      }\r\n      system.colorPicker.setColorLabel(document.getElementById(\"colorpicker-label\"));\r\n      system.colorPicker.setColorCode(document.getElementById(\"colorpicker-hex-code\") as HTMLInputElement);\r\n      system.colorPicker.setSelectedColor(this.rgbLedLights[this.indexOfSelectedRgbLedLight].color);\r\n      system.colorPicker.draw();\r\n      system.colorPicker.setSelectedPoint();\r\n      document.getElementById(\"colorpicker-title\").innerText = \"RGB LED Light \" + this.indexOfSelectedRgbLedLight;\r\n    } else {\r\n      contextMenus.rainbowHat.hat = this;\r\n      let menu = document.getElementById(contextMenus.rainbowHat.id) as HTMLMenuElement;\r\n      menu.style.left = e.clientX + \"px\";\r\n      menu.style.top = (e.clientY - document.getElementById(\"tabs\").getBoundingClientRect().bottom) + \"px\";\r\n      menu.classList.add(\"show-menu\");\r\n      let attachMenuItem = document.getElementById(\"rainbow-hat-attach-menu-item\") as HTMLElement;\r\n      let detachMenuItem = document.getElementById(\"rainbow-hat-detach-menu-item\") as HTMLElement;\r\n      if (this.raspberryPi != null) {\r\n        attachMenuItem.className = \"menu-item disabled\";\r\n        detachMenuItem.className = \"menu-item\";\r\n      } else {\r\n        let i = this.whichRaspberryPi();\r\n        attachMenuItem.className = i >= 0 ? \"menu-item\" : \"menu-item disabled\";\r\n        detachMenuItem.className = \"menu-item disabled\";\r\n      }\r\n    }\r\n  };\r\n\r\n  private mouseDown = (e: MouseEvent): void => {\r\n\r\n    e.preventDefault();\r\n\r\n    let rect = this.canvas.getBoundingClientRect();\r\n    let dx = e.clientX - rect.x;\r\n    let dy = e.clientY - rect.y;\r\n    let context = this.canvas.getContext(\"2d\");\r\n\r\n    if (this.redLedLight.toggle(dx, dy)) {\r\n      this.updateFirebase({redLed: this.redLedLight.on});\r\n      this.redLedLight.draw(context);\r\n      return;\r\n    }\r\n\r\n    if (this.greenLedLight.toggle(dx, dy)) {\r\n      this.updateFirebase({greenLed: this.greenLedLight.on});\r\n      this.greenLedLight.draw(context);\r\n      return;\r\n    }\r\n\r\n    if (this.blueLedLight.toggle(dx, dy)) {\r\n      this.updateFirebase({blueLed: this.blueLedLight.on});\r\n      this.blueLedLight.draw(context);\r\n      return;\r\n    }\r\n\r\n    if (this.buttonA.contains(dx, dy)) {\r\n      this.buttonA.on = true;\r\n      this.buttonA.draw(context);\r\n      this.redLedLight.on = true;\r\n      this.redLedLight.draw(context);\r\n      this.updateFirebase({redLed: true});\r\n      this.buzzer.beepButton(\"A\");\r\n      return;\r\n    }\r\n\r\n    if (this.buttonB.contains(dx, dy)) {\r\n      this.buttonB.on = true;\r\n      this.buttonB.draw(context);\r\n      this.greenLedLight.on = true;\r\n      this.greenLedLight.draw(context);\r\n      this.updateFirebase({greenLed: true});\r\n      this.buzzer.beepButton(\"B\");\r\n      return;\r\n    }\r\n\r\n    if (this.buttonC.contains(dx, dy)) {\r\n      this.buttonC.on = true;\r\n      this.buttonC.draw(context);\r\n      this.blueLedLight.on = true;\r\n      this.blueLedLight.draw(context);\r\n      this.updateFirebase({blueLed: true});\r\n      this.buzzer.beepButton(\"C\");\r\n      return;\r\n    }\r\n\r\n  };\r\n\r\n  private mouseUp = (e: MouseEvent): void => {\r\n\r\n    e.preventDefault();\r\n\r\n    let rect = this.canvas.getBoundingClientRect();\r\n    let dx = e.clientX - rect.x;\r\n    let dy = e.clientY - rect.y;\r\n    let context = this.canvas.getContext(\"2d\");\r\n\r\n    if (this.buttonA.contains(dx, dy)) {\r\n      this.buttonA.on = false;\r\n      this.buttonA.draw(context);\r\n      this.redLedLight.on = false;\r\n      this.redLedLight.draw(context);\r\n      this.updateFirebase({redLed: false});\r\n      return;\r\n    }\r\n\r\n    if (this.buttonB.contains(dx, dy)) {\r\n      this.buttonB.on = false;\r\n      this.buttonB.draw(context);\r\n      this.greenLedLight.on = false;\r\n      this.greenLedLight.draw(context);\r\n      this.updateFirebase({greenLed: false});\r\n      return;\r\n    }\r\n\r\n    if (this.buttonC.contains(dx, dy)) {\r\n      this.buttonC.on = false;\r\n      this.buttonC.draw(context);\r\n      this.blueLedLight.on = false;\r\n      this.blueLedLight.draw(context);\r\n      this.updateFirebase({blueLed: false});\r\n      return;\r\n    }\r\n\r\n    if (this.temperatureSensor.contains(dx, dy)) {\r\n      system.temperatureGraph.setVisible(!system.temperatureGraph.isVisible());\r\n      if (system.temperatureGraph.isVisible()) {\r\n        system.temperatureGraph.draw();\r\n        system.temperatureGraph.bringForward();\r\n      }\r\n      localStorage.setItem(\"Visible: \" + system.temperatureGraph.getUid(), system.temperatureGraph.isVisible() ? \"true\" : \"false\");\r\n      return;\r\n    }\r\n\r\n    if (this.barometricPressureSensor.contains(dx, dy)) {\r\n      system.pressureGraph.setVisible(!system.pressureGraph.isVisible());\r\n      if (system.pressureGraph.isVisible()) {\r\n        system.pressureGraph.draw();\r\n        system.pressureGraph.bringForward();\r\n      }\r\n      localStorage.setItem(\"Visible: \" + system.pressureGraph.getUid(), system.pressureGraph.isVisible() ? \"true\" : \"false\");\r\n      return;\r\n    }\r\n\r\n  };\r\n\r\n  private mouseMove = (e: MouseEvent): void => {\r\n\r\n    e.preventDefault();\r\n\r\n    let rect = this.canvas.getBoundingClientRect();\r\n    let dx = e.clientX - rect.x;\r\n    let dy = e.clientY - rect.y;\r\n\r\n    if (this.redLedLight.contains(dx, dy)) {\r\n      this.mouseOverObject = this.redLedLight;\r\n      this.canvas.style.cursor = \"pointer\";\r\n    } else if (this.greenLedLight.contains(dx, dy)) {\r\n      this.mouseOverObject = this.greenLedLight;\r\n      this.canvas.style.cursor = \"pointer\";\r\n    } else if (this.blueLedLight.contains(dx, dy)) {\r\n      this.mouseOverObject = this.blueLedLight;\r\n      this.canvas.style.cursor = \"pointer\";\r\n    } else if (this.buttonA.contains(dx, dy)) {\r\n      this.mouseOverObject = this.buttonA;\r\n      this.canvas.style.cursor = \"pointer\";\r\n    } else if (this.buttonB.contains(dx, dy)) {\r\n      this.mouseOverObject = this.buttonB;\r\n      this.canvas.style.cursor = \"pointer\";\r\n    } else if (this.buttonC.contains(dx, dy)) {\r\n      this.mouseOverObject = this.buttonC;\r\n      this.canvas.style.cursor = \"pointer\";\r\n    } else if (this.temperatureSensor.contains(dx, dy)) {\r\n      this.mouseOverObject = this.temperatureSensor;\r\n      this.canvas.style.cursor = \"pointer\";\r\n    } else if (this.barometricPressureSensor.contains(dx, dy)) {\r\n      this.mouseOverObject = this.barometricPressureSensor;\r\n      this.canvas.style.cursor = \"pointer\";\r\n    } else if (this.handles[0].contains(dx, dy)) {\r\n      this.mouseOverObject = this.handles[0];\r\n      this.canvas.style.cursor = \"move\";\r\n    } else if (this.handles[1].contains(dx, dy)) {\r\n      this.mouseOverObject = this.handles[1];\r\n      this.canvas.style.cursor = \"move\";\r\n    } else if (this.handles[2].contains(dx, dy)) {\r\n      this.mouseOverObject = this.handles[2];\r\n      this.canvas.style.cursor = \"move\";\r\n    } else if (this.handles[3].contains(dx, dy)) {\r\n      this.mouseOverObject = this.handles[3];\r\n      this.canvas.style.cursor = \"move\";\r\n    } else {\r\n      let onRgbLedLight = false;\r\n      for (let i = 0; i < this.rgbLedLights.length; i++) {\r\n        if (this.rgbLedLights[i].contains(dx, dy)) {\r\n          this.mouseOverObject = this.rgbLedLights[i];\r\n          this.canvas.style.cursor = \"pointer\";\r\n          onRgbLedLight = true;\r\n          break;\r\n        }\r\n      }\r\n      if (!onRgbLedLight) {\r\n        this.mouseOverObject = null;\r\n        this.canvas.style.cursor = \"default\";\r\n      }\r\n    }\r\n    this.draw();\r\n\r\n  };\r\n\r\n  drawToolTips(): void {\r\n    let context = this.canvas.getContext('2d');\r\n    let x = 0;\r\n    let y = -25;\r\n    if (this.mouseOverObject == this.redLedLight) {\r\n      x += this.redLedLight.x + this.redLedLight.width / 2;\r\n      y += this.redLedLight.y;\r\n      context.drawTooltip(x, y, 20, 8, 10, 'Red LED light', true);\r\n    } else if (this.mouseOverObject == this.greenLedLight) {\r\n      x += this.greenLedLight.x + this.greenLedLight.width / 2;\r\n      y += this.greenLedLight.y;\r\n      context.drawTooltip(x, y, 20, 8, 10, 'Green LED light', true);\r\n    } else if (this.mouseOverObject == this.blueLedLight) {\r\n      x += this.blueLedLight.x + this.blueLedLight.width / 2;\r\n      y += this.blueLedLight.y;\r\n      context.drawTooltip(x, y, 20, 8, 10, 'Blue LED light', true);\r\n    } else if (this.mouseOverObject == this.buttonA) {\r\n      x += this.buttonA.x + this.buttonA.width / 2;\r\n      y += this.buttonA.y;\r\n      context.drawTooltip(x, y, 20, 8, 10, 'Button A', true);\r\n    } else if (this.mouseOverObject == this.buttonB) {\r\n      x += this.buttonB.x + this.buttonB.width / 2;\r\n      y += this.buttonB.y;\r\n      context.drawTooltip(x, y, 20, 8, 10, 'Button B', true);\r\n    } else if (this.mouseOverObject == this.buttonC) {\r\n      x += this.buttonC.x + this.buttonC.width / 2;\r\n      y += this.buttonC.y;\r\n      context.drawTooltip(x, y, 20, 8, 10, 'Button C', true);\r\n    } else if (this.mouseOverObject == this.temperatureSensor) {\r\n      x += this.temperatureSensor.x + this.temperatureSensor.width / 2;\r\n      y += this.temperatureSensor.y;\r\n      context.drawTooltip(x, y, 20, 8, 10, 'Temperature sensor', true);\r\n    } else if (this.mouseOverObject == this.barometricPressureSensor) {\r\n      x += this.barometricPressureSensor.x + this.barometricPressureSensor.width / 2;\r\n      y += this.barometricPressureSensor.y;\r\n      context.drawTooltip(x, y, 20, 8, 10, 'Barometric pressure sensor', true);\r\n    } else if (this.mouseOverObject == this.handles[0]) {\r\n      this.drawHandle(this.mouseOverObject, context);\r\n      x += this.handles[0].getXmax() + 20;\r\n      y += this.handles[0].getYmax() + 30;\r\n      context.drawTooltip(x, y, 20, 8, 10, 'Upper-left handle', true);\r\n    } else if (this.mouseOverObject == this.handles[1]) {\r\n      this.drawHandle(this.mouseOverObject, context);\r\n      x += this.handles[1].getXmin() - 30;\r\n      y += this.handles[1].getYmax() + 30;\r\n      context.drawTooltip(x, y, 20, 8, 10, 'Upper-right handle', true);\r\n    } else if (this.mouseOverObject == this.handles[2]) {\r\n      this.drawHandle(this.mouseOverObject, context);\r\n      x += this.handles[2].getXmin() - 30;\r\n      y += this.handles[2].getYmin() - 5;\r\n      context.drawTooltip(x, y, 20, 8, 10, 'Lower-right handle', true);\r\n    } else if (this.mouseOverObject == this.handles[3]) {\r\n      this.drawHandle(this.mouseOverObject, context);\r\n      x += this.handles[3].getXmax() + 20;\r\n      y += this.handles[3].getYmin() - 5;\r\n      context.drawTooltip(x, y, 20, 8, 10, 'Lower-left handle', true);\r\n    }\r\n  }\r\n\r\n  updateFirebase(value): void {\r\n    System.database.ref(this.stateId).update(value);\r\n  }\r\n\r\n  // by default, sensors transmit data every second. This can be adjusted through Firebase.\r\n  updateFromFirebase(): void {\r\n    let that = this;\r\n    System.database.ref().on(\"value\", function (snapshot) {\r\n      snapshot.forEach(function (child) {\r\n        let childData = child.val();\r\n        that.redLedLight.on = childData.redLed;\r\n        that.greenLedLight.on = childData.greenLed;\r\n        that.blueLedLight.on = childData.blueLed;\r\n        if (that.redLedLight.on) {\r\n          that.buzzer.beepButton(\"A\");\r\n        }\r\n        if (that.greenLedLight.on) {\r\n          that.buzzer.beepButton(\"B\");\r\n        }\r\n        if (that.blueLedLight.on) {\r\n          that.buzzer.beepButton(\"C\");\r\n        }\r\n        if (childData.rainbowRgb) {\r\n          for (let i = 0; i < that.rgbLedLights.length; i++) {\r\n            let r = childData.rainbowRgb[i][0];\r\n            let g = childData.rainbowRgb[i][1];\r\n            let b = childData.rainbowRgb[i][2];\r\n            that.rgbLedLights[i].on = r > 0 || g > 0 || b > 0;\r\n            that.rgbLedLights[i].color = Util.rgbToHex(r, g, b);\r\n          }\r\n        }\r\n        if (childData.allowTemperatureTransmission) {\r\n          that.temperatureSensor.collectionInterval = childData.sensorDataCollectionInterval ? childData.sensorDataCollectionInterval * 0.001 : 1;\r\n          that.temperatureSensor.data.push(<number>childData.temperature);\r\n          system.temperatureGraph.draw();\r\n          let t: number = childData.temperature;\r\n          let s: string = t.toString();\r\n          let i: number = s.indexOf(\".\");\r\n          if (i > 0 && i < 4) {\r\n            that.decimalPointDisplays[i - 1].setCharacter(\".\");\r\n          }\r\n          let integerPart: string = s.substring(0, i);\r\n          let decimalPart: string = s.substring(i + 1);\r\n          s = (integerPart + decimalPart).substr(0, 4);\r\n          for (i = 0; i < 4; i++) {\r\n            that.alphanumericDisplays[i].setCharacter(s[i]);\r\n          }\r\n        }\r\n        if (childData.allowBarometricPressureTransmission) {\r\n          that.barometricPressureSensor.collectionInterval = childData.sensorDataCollectionInterval ? childData.sensorDataCollectionInterval * 0.001 : 1;\r\n          that.barometricPressureSensor.data.push(<number>childData.barometricPressure);\r\n          system.pressureGraph.draw();\r\n          let t: number = childData.barometricPressure;\r\n          let s: string = t.toString();\r\n          let i: number = s.indexOf(\".\");\r\n          if (i > 0 && i < 4) {\r\n            that.decimalPointDisplays[i - 1].setCharacter(\".\");\r\n          }\r\n          let integerPart: string = s.substring(0, i);\r\n          let decimalPart: string = s.substring(i + 1);\r\n          s = (integerPart + decimalPart).substr(0, 4);\r\n          for (i = 0; i < 4; i++) {\r\n            that.alphanumericDisplays[i].setCharacter(s[i]);\r\n          }\r\n        }\r\n        that.draw();\r\n      });\r\n    });\r\n  }\r\n\r\n}\r\n","/*\n * Digital twin for the Sense HAT\n *\n * @author Charles Xie\n */\n\nimport {Hat} from \"./Hat\";\nimport {Rectangle} from \"../math/Rectangle\";\nimport {contextMenus} from \"../Main\";\n\n// @ts-ignore\nimport senseHatImage from \"../img/sense-hat.png\";\n\nexport class SenseHat extends Hat {\n\n  private mouseOverObject: any;\n  private boardImage: HTMLImageElement;\n\n  constructor(canvasId: string, uid: string) {\n    super(canvasId);\n\n    this.uid = uid;\n    this.canvas.addEventListener(\"mousedown\", this.mouseDown, false);\n    this.canvas.addEventListener(\"mouseup\", this.mouseUp, false);\n    this.canvas.addEventListener(\"mousemove\", this.mouseMove, false);\n    this.canvas.addEventListener('contextmenu', this.openContextMenu, false);\n\n    this.handles.push(new Rectangle(5, 5, 30, 30));\n    this.handles.push(new Rectangle(290, 5, 30, 30));\n    this.handles.push(new Rectangle(290, 250, 30, 30));\n    this.handles.push(new Rectangle(5, 250, 30, 30));\n\n    this.boardImage = new Image();\n    this.boardImage.src = senseHatImage;\n    this.setY(20);\n\n    this.updateFromFirebase();\n  }\n\n  public draw(): void {\n    let ctx = this.canvas.getContext('2d');\n    ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n    ctx.save();\n    ctx.shadowOffsetX = 8;\n    ctx.shadowOffsetY = 8;\n    ctx.shadowColor = \"rgb(96, 96, 96)\";\n    ctx.shadowBlur = 8;\n    ctx.drawImage(this.boardImage, 0, 0);\n    ctx.restore();\n    this.drawToolTips();\n  }\n\n  private openContextMenu = (e: MouseEvent): void => {\n    e.preventDefault();\n    let rect = this.canvas.getBoundingClientRect();\n    let dx = e.clientX - rect.x;\n    let dy = e.clientY - rect.y;\n    contextMenus.senseHat.hat = this;\n    let menu = document.getElementById(contextMenus.senseHat.id) as HTMLMenuElement;\n    menu.style.left = e.clientX + \"px\";\n    menu.style.top = (e.clientY - document.getElementById(\"tabs\").getBoundingClientRect().bottom) + \"px\";\n    menu.classList.add(\"show-menu\");\n    let attachMenuItem = document.getElementById(\"sense-hat-attach-menu-item\") as HTMLElement;\n    let detachMenuItem = document.getElementById(\"sense-hat-detach-menu-item\") as HTMLElement;\n    if (this.raspberryPi != null) {\n      attachMenuItem.className = \"menu-item disabled\";\n      detachMenuItem.className = \"menu-item\";\n    } else {\n      let i = this.whichRaspberryPi();\n      attachMenuItem.className = i >= 0 ? \"menu-item\" : \"menu-item disabled\";\n      detachMenuItem.className = \"menu-item disabled\";\n    }\n  };\n\n  private mouseDown = (e: MouseEvent): void => {\n  };\n\n  private mouseUp = (e: MouseEvent): void => {\n  };\n\n  private mouseMove = (e: MouseEvent): void => {\n\n    e.preventDefault();\n\n    let rect = this.canvas.getBoundingClientRect();\n    let dx = e.clientX - rect.x;\n    let dy = e.clientY - rect.y;\n\n    if (this.handles[0].contains(dx, dy)) {\n      this.mouseOverObject = this.handles[0];\n      this.canvas.style.cursor = \"move\";\n    } else if (this.handles[1].contains(dx, dy)) {\n      this.mouseOverObject = this.handles[1];\n      this.canvas.style.cursor = \"move\";\n    } else if (this.handles[2].contains(dx, dy)) {\n      this.mouseOverObject = this.handles[2];\n      this.canvas.style.cursor = \"move\";\n    } else if (this.handles[3].contains(dx, dy)) {\n      this.mouseOverObject = this.handles[3];\n      this.canvas.style.cursor = \"move\";\n    } else {\n      this.mouseOverObject = null;\n      this.canvas.style.cursor = \"default\";\n    }\n    this.draw();\n\n  };\n\n  drawToolTips(): void {\n    let context = this.canvas.getContext('2d');\n    let x = 0;\n    let y = -25;\n    if (this.mouseOverObject == this.handles[0]) {\n      this.drawHandle(this.mouseOverObject, context);\n      x += this.handles[0].getXmax() + 20;\n      y += this.handles[0].getYmax() + 30;\n      context.drawTooltip(x, y, 20, 8, 10, 'Upper-left handle', true);\n    } else if (this.mouseOverObject == this.handles[1]) {\n      this.drawHandle(this.mouseOverObject, context);\n      x += this.handles[1].getXmin() - 30;\n      y += this.handles[1].getYmax() + 30;\n      context.drawTooltip(x, y, 20, 8, 10, 'Upper-right handle', true);\n    } else if (this.mouseOverObject == this.handles[2]) {\n      this.drawHandle(this.mouseOverObject, context);\n      x += this.handles[2].getXmin() - 30;\n      y += this.handles[2].getYmin() - 5;\n      context.drawTooltip(x, y, 20, 8, 10, 'Lower-right handle', true);\n    } else if (this.mouseOverObject == this.handles[3]) {\n      this.drawHandle(this.mouseOverObject, context);\n      x += this.handles[3].getXmax() + 20;\n      y += this.handles[3].getYmin() - 5;\n      context.drawTooltip(x, y, 20, 8, 10, 'Lower-left handle', true);\n    }\n  }\n\n  updateFirebase(value): void {\n  }\n\n  // by default, sensors transmit data every second. This can be adjusted through Firebase.\n  updateFromFirebase(): void {\n  }\n\n}\n","/*\n * Digital twin for the Capacitive Touch HAT\n *\n * @author Charles Xie\n */\n\nimport {Hat} from \"./Hat\";\nimport {Rectangle} from \"../math/Rectangle\";\nimport {contextMenus} from \"../Main\";\n\n// @ts-ignore\nimport capacitiveTouchHatImage from \"../img/capacitive-touch-hat.png\";\n\nexport class CapacitiveTouchHat extends Hat {\n\n  private mouseOverObject: any;\n  private boardImage: HTMLImageElement;\n\n  constructor(canvasId: string, uid: string) {\n    super(canvasId);\n\n    this.uid = uid;\n    this.canvas.addEventListener(\"mousedown\", this.mouseDown, false);\n    this.canvas.addEventListener(\"mouseup\", this.mouseUp, false);\n    this.canvas.addEventListener(\"mousemove\", this.mouseMove, false);\n    this.canvas.addEventListener('contextmenu', this.openContextMenu, false);\n\n    this.handles.push(new Rectangle(5, 5, 30, 30));\n    this.handles.push(new Rectangle(290, 5, 30, 30));\n    this.handles.push(new Rectangle(290, 250, 30, 30));\n    this.handles.push(new Rectangle(5, 250, 30, 30));\n\n    this.boardImage = new Image();\n    this.boardImage.src = capacitiveTouchHatImage;\n    this.setY(20);\n\n    this.updateFromFirebase();\n  }\n\n  public draw(): void {\n    let ctx = this.canvas.getContext('2d');\n    ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n    ctx.save();\n    ctx.shadowOffsetX = 8;\n    ctx.shadowOffsetY = 8;\n    ctx.shadowColor = \"rgb(96, 96, 96)\";\n    ctx.shadowBlur = 8;\n    ctx.drawImage(this.boardImage, 0, 0);\n    ctx.restore();\n    this.drawToolTips();\n  }\n\n  private openContextMenu = (e: MouseEvent): void => {\n    e.preventDefault();\n    let rect = this.canvas.getBoundingClientRect();\n    let dx = e.clientX - rect.x;\n    let dy = e.clientY - rect.y;\n    contextMenus.capacitiveTouchHat.hat = this;\n    let menu = document.getElementById(contextMenus.capacitiveTouchHat.id) as HTMLMenuElement;\n    menu.style.left = e.clientX + \"px\";\n    menu.style.top = (e.clientY - document.getElementById(\"tabs\").getBoundingClientRect().bottom) + \"px\";\n    menu.classList.add(\"show-menu\");\n    let attachMenuItem = document.getElementById(\"capacitive-touch-hat-attach-menu-item\") as HTMLElement;\n    let detachMenuItem = document.getElementById(\"capacitive-touch-hat-detach-menu-item\") as HTMLElement;\n    if (this.raspberryPi != null) {\n      attachMenuItem.className = \"menu-item disabled\";\n      detachMenuItem.className = \"menu-item\";\n    } else {\n      let i = this.whichRaspberryPi();\n      attachMenuItem.className = i >= 0 ? \"menu-item\" : \"menu-item disabled\";\n      detachMenuItem.className = \"menu-item disabled\";\n    }\n  };\n\n  private mouseDown = (e: MouseEvent): void => {\n  };\n\n  private mouseUp = (e: MouseEvent): void => {\n  };\n\n  private mouseMove = (e: MouseEvent): void => {\n\n    e.preventDefault();\n\n    let rect = this.canvas.getBoundingClientRect();\n    let dx = e.clientX - rect.x;\n    let dy = e.clientY - rect.y;\n\n    if (this.handles[0].contains(dx, dy)) {\n      this.mouseOverObject = this.handles[0];\n      this.canvas.style.cursor = \"move\";\n    } else if (this.handles[1].contains(dx, dy)) {\n      this.mouseOverObject = this.handles[1];\n      this.canvas.style.cursor = \"move\";\n    } else if (this.handles[2].contains(dx, dy)) {\n      this.mouseOverObject = this.handles[2];\n      this.canvas.style.cursor = \"move\";\n    } else if (this.handles[3].contains(dx, dy)) {\n      this.mouseOverObject = this.handles[3];\n      this.canvas.style.cursor = \"move\";\n    } else {\n      this.mouseOverObject = null;\n      this.canvas.style.cursor = \"default\";\n    }\n    this.draw();\n\n  };\n\n  drawToolTips(): void {\n    let context = this.canvas.getContext('2d');\n    let x = 0;\n    let y = -25;\n    if (this.mouseOverObject == this.handles[0]) {\n      this.drawHandle(this.mouseOverObject, context);\n      x += this.handles[0].getXmax() + 20;\n      y += this.handles[0].getYmax() + 30;\n      context.drawTooltip(x, y, 20, 8, 10, 'Upper-left handle', true);\n    } else if (this.mouseOverObject == this.handles[1]) {\n      this.drawHandle(this.mouseOverObject, context);\n      x += this.handles[1].getXmin() - 30;\n      y += this.handles[1].getYmax() + 30;\n      context.drawTooltip(x, y, 20, 8, 10, 'Upper-right handle', true);\n    } else if (this.mouseOverObject == this.handles[2]) {\n      this.drawHandle(this.mouseOverObject, context);\n      x += this.handles[2].getXmin() - 30;\n      y += this.handles[2].getYmin() - 5;\n      context.drawTooltip(x, y, 20, 8, 10, 'Lower-right handle', true);\n    } else if (this.mouseOverObject == this.handles[3]) {\n      this.drawHandle(this.mouseOverObject, context);\n      x += this.handles[3].getXmax() + 20;\n      y += this.handles[3].getYmin() - 5;\n      context.drawTooltip(x, y, 20, 8, 10, 'Lower-left handle', true);\n    }\n  }\n\n  updateFirebase(value): void {\n  }\n\n  // by default, sensors transmit data every second. This can be adjusted through Firebase.\n  updateFromFirebase(): void {\n  }\n\n}\n","/*\n * Digital twin for the Unicorn HAT\n *\n * @author Charles Xie\n */\n\nimport {Hat} from \"./Hat\";\nimport {Rectangle} from \"../math/Rectangle\";\nimport {contextMenus} from \"../Main\";\n\n// @ts-ignore\nimport unicornHatImage from \"../img/unicorn-hat.png\";\n\nexport class UnicornHat extends Hat {\n\n  private mouseOverObject: any;\n  private boardImage: HTMLImageElement;\n\n  constructor(canvasId: string, uid: string) {\n    super(canvasId);\n\n    this.uid = uid;\n    this.canvas.addEventListener(\"mousedown\", this.mouseDown, false);\n    this.canvas.addEventListener(\"mouseup\", this.mouseUp, false);\n    this.canvas.addEventListener(\"mousemove\", this.mouseMove, false);\n    this.canvas.addEventListener('contextmenu', this.openContextMenu, false);\n\n    this.handles.push(new Rectangle(5, 5, 30, 30));\n    this.handles.push(new Rectangle(290, 5, 30, 30));\n    this.handles.push(new Rectangle(290, 250, 30, 30));\n    this.handles.push(new Rectangle(5, 250, 30, 30));\n\n    this.boardImage = new Image();\n    this.boardImage.src = unicornHatImage;\n    this.setY(20);\n\n    this.updateFromFirebase();\n  }\n\n  public draw(): void {\n    let ctx = this.canvas.getContext('2d');\n    ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n    ctx.save();\n    ctx.shadowOffsetX = 8;\n    ctx.shadowOffsetY = 8;\n    ctx.shadowColor = \"rgb(96, 96, 96)\";\n    ctx.shadowBlur = 8;\n    ctx.drawImage(this.boardImage, 0, 0);\n    ctx.restore();\n    this.drawToolTips();\n  }\n\n  private openContextMenu = (e: MouseEvent): void => {\n    e.preventDefault();\n    let rect = this.canvas.getBoundingClientRect();\n    let dx = e.clientX - rect.x;\n    let dy = e.clientY - rect.y;\n    contextMenus.unicornHat.hat = this;\n    let menu = document.getElementById(contextMenus.unicornHat.id) as HTMLMenuElement;\n    menu.style.left = e.clientX + \"px\";\n    menu.style.top = (e.clientY - document.getElementById(\"tabs\").getBoundingClientRect().bottom) + \"px\";\n    menu.classList.add(\"show-menu\");\n    let attachMenuItem = document.getElementById(\"unicorn-hat-attach-menu-item\") as HTMLElement;\n    let detachMenuItem = document.getElementById(\"unicorn-hat-detach-menu-item\") as HTMLElement;\n    if (this.raspberryPi != null) {\n      attachMenuItem.className = \"menu-item disabled\";\n      detachMenuItem.className = \"menu-item\";\n    } else {\n      let i = this.whichRaspberryPi();\n      attachMenuItem.className = i >= 0 ? \"menu-item\" : \"menu-item disabled\";\n      detachMenuItem.className = \"menu-item disabled\";\n    }\n  };\n\n  private mouseDown = (e: MouseEvent): void => {\n  };\n\n  private mouseUp = (e: MouseEvent): void => {\n  };\n\n  private mouseMove = (e: MouseEvent): void => {\n\n    e.preventDefault();\n\n    let rect = this.canvas.getBoundingClientRect();\n    let dx = e.clientX - rect.x;\n    let dy = e.clientY - rect.y;\n\n    if (this.handles[0].contains(dx, dy)) {\n      this.mouseOverObject = this.handles[0];\n      this.canvas.style.cursor = \"move\";\n    } else if (this.handles[1].contains(dx, dy)) {\n      this.mouseOverObject = this.handles[1];\n      this.canvas.style.cursor = \"move\";\n    } else if (this.handles[2].contains(dx, dy)) {\n      this.mouseOverObject = this.handles[2];\n      this.canvas.style.cursor = \"move\";\n    } else if (this.handles[3].contains(dx, dy)) {\n      this.mouseOverObject = this.handles[3];\n      this.canvas.style.cursor = \"move\";\n    } else {\n      this.mouseOverObject = null;\n      this.canvas.style.cursor = \"default\";\n    }\n    this.draw();\n\n  };\n\n  drawToolTips(): void {\n    let context = this.canvas.getContext('2d');\n    let x = 0;\n    let y = -25;\n    if (this.mouseOverObject == this.handles[0]) {\n      this.drawHandle(this.mouseOverObject, context);\n      x += this.handles[0].getXmax() + 20;\n      y += this.handles[0].getYmax() + 30;\n      context.drawTooltip(x, y, 20, 8, 10, 'Upper-left handle', true);\n    } else if (this.mouseOverObject == this.handles[1]) {\n      this.drawHandle(this.mouseOverObject, context);\n      x += this.handles[1].getXmin() - 30;\n      y += this.handles[1].getYmax() + 30;\n      context.drawTooltip(x, y, 20, 8, 10, 'Upper-right handle', true);\n    } else if (this.mouseOverObject == this.handles[2]) {\n      this.drawHandle(this.mouseOverObject, context);\n      x += this.handles[2].getXmin() - 30;\n      y += this.handles[2].getYmin() - 5;\n      context.drawTooltip(x, y, 20, 8, 10, 'Lower-right handle', true);\n    } else if (this.mouseOverObject == this.handles[3]) {\n      this.drawHandle(this.mouseOverObject, context);\n      x += this.handles[3].getXmax() + 20;\n      y += this.handles[3].getYmin() - 5;\n      context.drawTooltip(x, y, 20, 8, 10, 'Lower-left handle', true);\n    }\n  }\n\n  updateFirebase(value): void {\n  }\n\n  // by default, sensors transmit data every second. This can be adjusted through Firebase.\n  updateFromFirebase(): void {\n  }\n\n}\n","/*\n * Digital twin for the Crickit HAT\n *\n * @author Charles Xie\n */\n\nimport {Hat} from \"./Hat\";\nimport {Rectangle} from \"../math/Rectangle\";\nimport {contextMenus} from \"../Main\";\n\n// @ts-ignore\nimport crickitHatImage from \"../img/crickit-hat.png\";\n\nexport class CrickitHat extends Hat {\n\n  private mouseOverObject: any;\n  private boardImage: HTMLImageElement;\n\n  constructor(canvasId: string, uid: string) {\n    super(canvasId);\n\n    this.uid = uid;\n    this.canvas.addEventListener(\"mousedown\", this.mouseDown, false);\n    this.canvas.addEventListener(\"mouseup\", this.mouseUp, false);\n    this.canvas.addEventListener(\"mousemove\", this.mouseMove, false);\n    this.canvas.addEventListener('contextmenu', this.openContextMenu, false);\n\n    this.handles.push(new Rectangle(5, 5, 30, 30));\n    this.handles.push(new Rectangle(290, 5, 30, 30));\n    this.handles.push(new Rectangle(290, 250, 30, 30));\n    this.handles.push(new Rectangle(5, 250, 30, 30));\n\n    this.boardImage = new Image();\n    this.boardImage.src = crickitHatImage;\n    this.setY(20);\n\n    this.updateFromFirebase();\n  }\n\n  public draw(): void {\n    let ctx = this.canvas.getContext('2d');\n    ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n    ctx.save();\n    ctx.shadowOffsetX = 8;\n    ctx.shadowOffsetY = 8;\n    ctx.shadowColor = \"rgb(96, 96, 96)\";\n    ctx.shadowBlur = 8;\n    ctx.drawImage(this.boardImage, 0, 0);\n    ctx.restore();\n    this.drawToolTips();\n  }\n\n  private openContextMenu = (e: MouseEvent): void => {\n    e.preventDefault();\n    let rect = this.canvas.getBoundingClientRect();\n    let dx = e.clientX - rect.x;\n    let dy = e.clientY - rect.y;\n    contextMenus.crickitHat.hat = this;\n    let menu = document.getElementById(contextMenus.crickitHat.id) as HTMLMenuElement;\n    menu.style.left = e.clientX + \"px\";\n    menu.style.top = (e.clientY - document.getElementById(\"tabs\").getBoundingClientRect().bottom) + \"px\";\n    menu.classList.add(\"show-menu\");\n    let attachMenuItem = document.getElementById(\"crickit-hat-attach-menu-item\") as HTMLElement;\n    let detachMenuItem = document.getElementById(\"crickit-hat-detach-menu-item\") as HTMLElement;\n    if (this.raspberryPi != null) {\n      attachMenuItem.className = \"menu-item disabled\";\n      detachMenuItem.className = \"menu-item\";\n    } else {\n      let i = this.whichRaspberryPi();\n      attachMenuItem.className = i >= 0 ? \"menu-item\" : \"menu-item disabled\";\n      detachMenuItem.className = \"menu-item disabled\";\n    }\n  };\n\n  private mouseDown = (e: MouseEvent): void => {\n  };\n\n  private mouseUp = (e: MouseEvent): void => {\n  };\n\n  private mouseMove = (e: MouseEvent): void => {\n\n    e.preventDefault();\n\n    let rect = this.canvas.getBoundingClientRect();\n    let dx = e.clientX - rect.x;\n    let dy = e.clientY - rect.y;\n\n    if (this.handles[0].contains(dx, dy)) {\n      this.mouseOverObject = this.handles[0];\n      this.canvas.style.cursor = \"move\";\n    } else if (this.handles[1].contains(dx, dy)) {\n      this.mouseOverObject = this.handles[1];\n      this.canvas.style.cursor = \"move\";\n    } else if (this.handles[2].contains(dx, dy)) {\n      this.mouseOverObject = this.handles[2];\n      this.canvas.style.cursor = \"move\";\n    } else if (this.handles[3].contains(dx, dy)) {\n      this.mouseOverObject = this.handles[3];\n      this.canvas.style.cursor = \"move\";\n    } else {\n      this.mouseOverObject = null;\n      this.canvas.style.cursor = \"default\";\n    }\n    this.draw();\n\n  };\n\n  drawToolTips(): void {\n    let context = this.canvas.getContext('2d');\n    let x = 0;\n    let y = -25;\n    if (this.mouseOverObject == this.handles[0]) {\n      this.drawHandle(this.mouseOverObject, context);\n      x += this.handles[0].getXmax() + 20;\n      y += this.handles[0].getYmax() + 30;\n      context.drawTooltip(x, y, 20, 8, 10, 'Upper-left handle', true);\n    } else if (this.mouseOverObject == this.handles[1]) {\n      this.drawHandle(this.mouseOverObject, context);\n      x += this.handles[1].getXmin() - 30;\n      y += this.handles[1].getYmax() + 30;\n      context.drawTooltip(x, y, 20, 8, 10, 'Upper-right handle', true);\n    } else if (this.mouseOverObject == this.handles[2]) {\n      this.drawHandle(this.mouseOverObject, context);\n      x += this.handles[2].getXmin() - 30;\n      y += this.handles[2].getYmin() - 5;\n      context.drawTooltip(x, y, 20, 8, 10, 'Lower-right handle', true);\n    } else if (this.mouseOverObject == this.handles[3]) {\n      this.drawHandle(this.mouseOverObject, context);\n      x += this.handles[3].getXmax() + 20;\n      y += this.handles[3].getYmin() - 5;\n      context.drawTooltip(x, y, 20, 8, 10, 'Lower-left handle', true);\n    }\n  }\n\n  updateFirebase(value): void {\n  }\n\n  // by default, sensors transmit data every second. This can be adjusted through Firebase.\n  updateFromFirebase(): void {\n  }\n\n}\n","/*\n * Digital twin for the Unicorn HAT\n *\n * @author Charles Xie\n */\n\nimport {Hat} from \"./Hat\";\nimport {Rectangle} from \"../math/Rectangle\";\nimport {contextMenus} from \"../Main\";\n\n// @ts-ignore\nimport panTiltHatImage from \"../img/pan-tilt-hat.png\";\n\nexport class PanTiltHat extends Hat {\n\n  private mouseOverObject: any;\n  private boardImage: HTMLImageElement;\n\n  constructor(canvasId: string, uid: string) {\n    super(canvasId);\n\n    this.uid = uid;\n    this.canvas.addEventListener(\"mousedown\", this.mouseDown, false);\n    this.canvas.addEventListener(\"mouseup\", this.mouseUp, false);\n    this.canvas.addEventListener(\"mousemove\", this.mouseMove, false);\n    this.canvas.addEventListener('contextmenu', this.openContextMenu, false);\n\n    this.handles.push(new Rectangle(5, 5, 30, 30));\n    this.handles.push(new Rectangle(290, 5, 30, 30));\n    this.handles.push(new Rectangle(290, 250, 30, 30));\n    this.handles.push(new Rectangle(5, 250, 30, 30));\n\n    this.boardImage = new Image();\n    this.boardImage.src = panTiltHatImage;\n    this.setY(20);\n\n    this.updateFromFirebase();\n  }\n\n  public draw(): void {\n    let ctx = this.canvas.getContext('2d');\n    ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n    ctx.save();\n    ctx.shadowOffsetX = 8;\n    ctx.shadowOffsetY = 8;\n    ctx.shadowColor = \"rgb(96, 96, 96)\";\n    ctx.shadowBlur = 8;\n    ctx.drawImage(this.boardImage, 0, 0);\n    ctx.restore();\n    this.drawToolTips();\n  }\n\n  private openContextMenu = (e: MouseEvent): void => {\n    e.preventDefault();\n    let rect = this.canvas.getBoundingClientRect();\n    let dx = e.clientX - rect.x;\n    let dy = e.clientY - rect.y;\n    contextMenus.panTiltHat.hat = this;\n    let menu = document.getElementById(contextMenus.panTiltHat.id) as HTMLMenuElement;\n    menu.style.left = e.clientX + \"px\";\n    menu.style.top = (e.clientY - document.getElementById(\"tabs\").getBoundingClientRect().bottom) + \"px\";\n    menu.classList.add(\"show-menu\");\n    let attachMenuItem = document.getElementById(\"pan-tilt-hat-attach-menu-item\") as HTMLElement;\n    let detachMenuItem = document.getElementById(\"pan-tilt-hat-detach-menu-item\") as HTMLElement;\n    if (this.raspberryPi != null) {\n      attachMenuItem.className = \"menu-item disabled\";\n      detachMenuItem.className = \"menu-item\";\n    } else {\n      let i = this.whichRaspberryPi();\n      attachMenuItem.className = i >= 0 ? \"menu-item\" : \"menu-item disabled\";\n      detachMenuItem.className = \"menu-item disabled\";\n    }\n  };\n\n  private mouseDown = (e: MouseEvent): void => {\n  };\n\n  private mouseUp = (e: MouseEvent): void => {\n  };\n\n  private mouseMove = (e: MouseEvent): void => {\n\n    e.preventDefault();\n\n    let rect = this.canvas.getBoundingClientRect();\n    let dx = e.clientX - rect.x;\n    let dy = e.clientY - rect.y;\n\n    if (this.handles[0].contains(dx, dy)) {\n      this.mouseOverObject = this.handles[0];\n      this.canvas.style.cursor = \"move\";\n    } else if (this.handles[1].contains(dx, dy)) {\n      this.mouseOverObject = this.handles[1];\n      this.canvas.style.cursor = \"move\";\n    } else if (this.handles[2].contains(dx, dy)) {\n      this.mouseOverObject = this.handles[2];\n      this.canvas.style.cursor = \"move\";\n    } else if (this.handles[3].contains(dx, dy)) {\n      this.mouseOverObject = this.handles[3];\n      this.canvas.style.cursor = \"move\";\n    } else {\n      this.mouseOverObject = null;\n      this.canvas.style.cursor = \"default\";\n    }\n    this.draw();\n\n  };\n\n  drawToolTips(): void {\n    let context = this.canvas.getContext('2d');\n    let x = 0;\n    let y = -25;\n    if (this.mouseOverObject == this.handles[0]) {\n      this.drawHandle(this.mouseOverObject, context);\n      x += this.handles[0].getXmax() + 20;\n      y += this.handles[0].getYmax() + 30;\n      context.drawTooltip(x, y, 20, 8, 10, 'Upper-left handle', true);\n    } else if (this.mouseOverObject == this.handles[1]) {\n      this.drawHandle(this.mouseOverObject, context);\n      x += this.handles[1].getXmin() - 30;\n      y += this.handles[1].getYmax() + 30;\n      context.drawTooltip(x, y, 20, 8, 10, 'Upper-right handle', true);\n    } else if (this.mouseOverObject == this.handles[2]) {\n      this.drawHandle(this.mouseOverObject, context);\n      x += this.handles[2].getXmin() - 30;\n      y += this.handles[2].getYmin() - 5;\n      context.drawTooltip(x, y, 20, 8, 10, 'Lower-right handle', true);\n    } else if (this.mouseOverObject == this.handles[3]) {\n      this.drawHandle(this.mouseOverObject, context);\n      x += this.handles[3].getXmax() + 20;\n      y += this.handles[3].getYmin() - 5;\n      context.drawTooltip(x, y, 20, 8, 10, 'Lower-left handle', true);\n    }\n  }\n\n  updateFirebase(value): void {\n  }\n\n  // by default, sensors transmit data every second. This can be adjusted through Firebase.\n  updateFromFirebase(): void {\n  }\n\n}\n","/*\r\n * @author Charles Xie\r\n */\r\n\r\nimport {Movable} from \"./Movable\";\r\nimport {Workbench} from \"./Workbench\";\r\nimport {Mcu} from \"./components/Mcu\";\r\nimport {RaspberryPi} from \"./components/RaspberryPi\";\r\nimport {Hat} from \"./components/Hat\";\r\nimport {RainbowHat} from \"./components/RainbowHat\";\r\nimport {SenseHat} from \"./components/SenseHat\";\r\nimport {CapacitiveTouchHat} from \"./components/CapacitiveTouchHat\";\r\nimport {UnicornHat} from \"./components/UnicornHat\";\r\nimport {CrickitHat} from \"./components/CrickitHat\";\r\nimport {PanTiltHat} from \"./components/PanTiltHat\";\r\nimport {contextMenus} from \"./Main\";\r\nimport {Rectangle} from \"./math/Rectangle\";\r\nimport {LineChart} from \"./tools/LineChart\";\r\nimport {ColorPicker} from \"./tools/ColorPicker\";\r\n\r\ndeclare var firebase;\r\n\r\nexport class System {\r\n\r\n  static database;\r\n\r\n  workbench: Workbench;\r\n  mcus: Mcu[] = [];\r\n  hats: Hat[] = [];\r\n  temperatureGraph: LineChart;\r\n  pressureGraph: LineChart;\r\n  playground: HTMLElement;\r\n  colorPicker: ColorPicker;\r\n\r\n  private selectedMovable: Movable;\r\n  private mouseDownRelativeX: number;\r\n  private mouseDownRelativeY: number;\r\n  private draggedElementId: string;\r\n\r\n  constructor() {\r\n\r\n    if (!System.database) {\r\n      let config = {\r\n        apiKey: \"${process.env.FIREBASE_API_KEY}\",\r\n        authDomain: \"${process.env.AUTH_DOMAIN}\",\r\n        projectId: \"${process.env.PROJECT_ID}\",\r\n        storageBucket: \"${process.env.STORAGE_BUCKET}\",\r\n        messagingSenderId: \"${process.env.MESSAGING_SENDER_ID}\",\r\n        databaseURL: \"https://raspberry-pi-java.firebaseio.com\"\r\n      };\r\n      firebase.initializeApp(config);\r\n      // Get a reference to the database service\r\n      System.database = firebase.database();\r\n    }\r\n\r\n    this.workbench = new Workbench(\"workbench\");\r\n    //this.temperatureGraph = new LineChart(\"temperature-linechart\", rainbowHat.temperatureSensor);\r\n    //this.pressureGraph = new LineChart(\"pressure-linechart\", rainbowHat.barometricPressureSensor);\r\n\r\n    this.playground = document.getElementById(\"digital-twins-playground\") as HTMLDivElement;\r\n    this.playground.addEventListener(\"mousedown\", this.mouseDown, false);\r\n    this.playground.addEventListener(\"mouseup\", this.mouseUp, false);\r\n    this.playground.addEventListener(\"mousemove\", this.mouseMove, false);\r\n    document.addEventListener(\"mouseleave\", this.mouseLeave, false);\r\n\r\n    // drag and drop support\r\n    let that = this;\r\n    this.playground.addEventListener(\"dragstart\", function (e) {\r\n      that.draggedElementId = (<HTMLElement>e.target).id;\r\n    });\r\n    this.playground.addEventListener(\"drag\", function (e) {\r\n      // console.log(\"dragging: \" + (<HTMLElement>e.target).id);\r\n    });\r\n    this.playground.addEventListener(\"dragend\", function (e) {\r\n      // console.log(\"end drag: \" + (<HTMLElement>e.target).id);\r\n    });\r\n\r\n    // prevent default to allow drop\r\n    this.playground.addEventListener(\"dragover\", function (e) {\r\n      e.preventDefault();\r\n    }, false);\r\n    this.playground.addEventListener(\"drop\", function (e) {\r\n      e.preventDefault();\r\n      console.log(\"drop: \" + that.draggedElementId + \", \" + (<HTMLElement>e.target).id);\r\n      if ((<HTMLElement>e.target).id == \"workbench\") {\r\n        switch (that.draggedElementId) {\r\n          case \"raspberry-pi-image\":\r\n            that.storeLocation(that.addRaspberryPi(e.offsetX, e.offsetY, \"Raspberry Pi \" + Date.now().toString(16)));\r\n            that.storeMcuSequence();\r\n            break;\r\n          case \"rainbow-hat-image\":\r\n            that.addHatByAction(\"Rainbow HAT\", e.offsetX, e.offsetY);\r\n            break;\r\n          case \"sense-hat-image\":\r\n            that.addHatByAction(\"Sense HAT\", e.offsetX, e.offsetY);\r\n            break;\r\n          case \"capacitive-touch-hat-image\":\r\n            that.addHatByAction(\"Capacitive Touch HAT\", e.offsetX, e.offsetY);\r\n            break;\r\n          case \"unicorn-hat-image\":\r\n            that.addHatByAction(\"Unicorn HAT\", e.offsetX, e.offsetY);\r\n            break;\r\n          case \"crickit-hat-image\":\r\n            that.addHatByAction(\"Crickit HAT\", e.offsetX, e.offsetY);\r\n            break;\r\n          case \"pan-tilt-hat-image\":\r\n            that.addHatByAction(\"Pan-Tilt HAT\", e.offsetX, e.offsetY);\r\n            break;\r\n        }\r\n      }\r\n    }, false);\r\n  }\r\n\r\n  addHatByAction(name: string, x: number, y: number) {\r\n    this.storeLocation(this.addHat(name, x, y, name + \" #\" + Date.now().toString(16)));\r\n    this.storeHatSequence();\r\n  }\r\n\r\n  /* Raspberry Pi methods */\r\n\r\n  getRaspberryPiById(uid: string): RaspberryPi {\r\n    for (let i = 0; i < this.mcus.length; i++) {\r\n      if (this.mcus[i] instanceof RaspberryPi) {\r\n        if (this.mcus[i].uid == uid) {\r\n          return <RaspberryPi>this.mcus[i];\r\n        }\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  removeRaspberryPiByIndex(selectedIndex: number): void {\r\n    let canvas = this.mcus[selectedIndex].canvas;\r\n    this.playground.removeChild(canvas);\r\n    this.mcus.splice(selectedIndex, 1);\r\n    this.storeMcuSequence();\r\n  }\r\n\r\n  removeRaspberryPi(raspberryPi: RaspberryPi): void {\r\n    this.removeRaspberryPiByIndex(this.mcus.indexOf(raspberryPi));\r\n  }\r\n\r\n  addRaspberryPi(x: number, y: number, uid: string): RaspberryPi {\r\n    let canvas = document.createElement(\"canvas\");\r\n    canvas.id = \"raspberry-pi-\" + this.mcus.length;\r\n    canvas.width = 435;\r\n    canvas.height = 295;\r\n    canvas.style.display = \"block\";\r\n    canvas.style.margin = \"auto\";\r\n    canvas.style.position = \"absolute\";\r\n    canvas.style.left = \"10px\";\r\n    canvas.style.top = \"10px\";\r\n    canvas.style.zIndex = \"49\";\r\n    this.playground.appendChild(canvas);\r\n    let pi = new RaspberryPi(canvas.id, uid);\r\n    this.mcus.push(pi);\r\n    pi.setX(x - canvas.width / 2);\r\n    pi.setY(y - canvas.height / 2);\r\n    this.draw();\r\n    return pi;\r\n  }\r\n\r\n  whichRaspberryPi(x: number, y: number): number {\r\n    for (let i = 0; i < this.mcus.length; i++) {\r\n      let mcu = this.mcus[i];\r\n      if (mcu instanceof RaspberryPi) {\r\n        let r = new Rectangle(mcu.getX(), mcu.getY(), mcu.getWidth(), mcu.getHeight());\r\n        if (r.contains(x, y)) {\r\n          return i;\r\n        }\r\n      }\r\n    }\r\n    return -1;\r\n  }\r\n\r\n  /* HAT methods */\r\n\r\n  getHatById(uid: string): Hat {\r\n    for (let i = 0; i < this.hats.length; i++) {\r\n      if (this.mcus[i].uid == uid) {\r\n        return this.hats[i];\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  removeHatByIndex(selectedIndex: number): void {\r\n    let canvas = this.hats[selectedIndex].canvas;\r\n    this.playground.removeChild(canvas);\r\n    this.hats.splice(selectedIndex, 1);\r\n    this.storeHatSequence();\r\n  }\r\n\r\n  removeHat(hat: Hat): void {\r\n    this.removeHatByIndex(this.hats.indexOf(hat));\r\n  }\r\n\r\n  addHat(type: string, x: number, y: number, uid: string): Hat {\r\n    let canvas = document.createElement(\"canvas\");\r\n    canvas.style.display = \"block\";\r\n    canvas.style.margin = \"auto\";\r\n    canvas.style.position = \"absolute\";\r\n    canvas.style.left = \"10px\";\r\n    canvas.style.top = \"10px\";\r\n    canvas.style.zIndex = \"99\";\r\n    this.playground.appendChild(canvas);\r\n    let hat = null;\r\n    switch (type) {\r\n      case \"Rainbow HAT\":\r\n        canvas.id = \"rainbow-hat-\" + this.hats.length;\r\n        canvas.width = 330;\r\n        canvas.height = 290;\r\n        hat = new RainbowHat(canvas.id, uid);\r\n        break;\r\n      case \"Sense HAT\":\r\n        canvas.id = \"sense-hat-\" + this.hats.length;\r\n        canvas.width = 330;\r\n        canvas.height = 290;\r\n        hat = new SenseHat(canvas.id, uid);\r\n        break;\r\n      case \"Capacitive Touch HAT\":\r\n        canvas.id = \"capacitive-touch-hat-\" + this.hats.length;\r\n        canvas.width = 330;\r\n        canvas.height = 290;\r\n        hat = new CapacitiveTouchHat(canvas.id, uid);\r\n        break;\r\n      case \"Unicorn HAT\":\r\n        canvas.id = \"unicorn-hat-\" + this.hats.length;\r\n        canvas.width = 330;\r\n        canvas.height = 380;\r\n        hat = new UnicornHat(canvas.id, uid);\r\n        break;\r\n      case \"Crickit HAT\":\r\n        canvas.id = \"crickit-hat-\" + this.hats.length;\r\n        canvas.width = 330;\r\n        canvas.height = 290;\r\n        hat = new CrickitHat(canvas.id, uid);\r\n        break;\r\n      case \"Pan-Tilt HAT\":\r\n        canvas.id = \"pan-tilt-hat-\" + this.hats.length;\r\n        canvas.width = 330;\r\n        canvas.height = 290;\r\n        hat = new PanTiltHat(canvas.id, uid);\r\n        break;\r\n    }\r\n    if (hat != null) {\r\n      this.hats.push(hat);\r\n      hat.setX(x - canvas.width / 2);\r\n      hat.setY(y - canvas.height / 2);\r\n      this.draw();\r\n    }\r\n    return hat;\r\n  }\r\n\r\n  whichHat(x: number, y: number): number {\r\n    for (let i = 0; i < this.hats.length; i++) {\r\n      let hat = this.hats[i];\r\n      let r = new Rectangle(hat.getX(), hat.getY(), hat.getWidth(), hat.getHeight());\r\n      if (r.contains(x, y)) {\r\n        return i;\r\n      }\r\n    }\r\n    return -1;\r\n  }\r\n\r\n  draw(): void {\r\n    this.workbench.draw();\r\n    let i;\r\n    for (i = 0; i < this.mcus.length; i++) {\r\n      this.mcus[i].draw();\r\n    }\r\n    for (i = 0; i < this.hats.length; i++) {\r\n      this.hats[i].draw();\r\n    }\r\n  }\r\n\r\n  private mouseDown = (e: MouseEvent): void => {\r\n    let rect = this.playground.getBoundingClientRect();\r\n    let x = e.clientX - rect.x;\r\n    let y = e.clientY - rect.y;\r\n    this.selectedMovable = null;\r\n    // if (this.temperatureGraph.isVisible() && this.temperatureGraph.onHandle(x - this.temperatureGraph.getX(), y - this.temperatureGraph.getY())) {\r\n    //   this.selectedMovable = this.temperatureGraph;\r\n    // } else if (this.pressureGraph.isVisible() && this.pressureGraph.onHandle(x - this.pressureGraph.getX(), y - this.pressureGraph.getY())) {\r\n    //   this.selectedMovable = this.pressureGraph;\r\n    // } else {\r\n    // always prioritize HATs over Raspberry Pi\r\n    for (let i = 0; i < this.hats.length; i++) {\r\n      if (this.hats[i].whichHandle(x - this.hats[i].getX(), y - this.hats[i].getY()) >= 0) {\r\n        this.selectedMovable = this.hats[i];\r\n        break;\r\n      }\r\n    }\r\n    if (this.selectedMovable == null) {\r\n      for (let i = 0; i < this.mcus.length; i++) {\r\n        if (this.mcus[i].whichHandle(x - this.mcus[i].getX(), y - this.mcus[i].getY()) >= 0) {\r\n          this.selectedMovable = this.mcus[i];\r\n          break;\r\n        }\r\n      }\r\n    }\r\n    //}\r\n    if (this.selectedMovable != null) {\r\n      this.mouseDownRelativeX = e.clientX - this.selectedMovable.getX();\r\n      this.mouseDownRelativeY = e.clientY - this.selectedMovable.getY();\r\n    }\r\n  };\r\n\r\n  private mouseUp = (e: MouseEvent): void => {\r\n    this.selectedMovable = null;\r\n    // close all menus upon mouse left click\r\n    Object.keys(contextMenus).forEach(key => {\r\n      let menu = document.getElementById(contextMenus[key].id) as HTMLMenuElement;\r\n      menu.classList.remove(\"show-menu\");\r\n    });\r\n  };\r\n\r\n  private mouseLeave = (e: MouseEvent): void => {\r\n    this.selectedMovable = null;\r\n  };\r\n\r\n  private mouseMove = (e: MouseEvent): void => {\r\n    if (this.selectedMovable != null) {\r\n      this.moveTo(e.clientX, e.clientY, this.selectedMovable);\r\n      this.storeLocation(this.selectedMovable);\r\n    }\r\n  };\r\n\r\n  storeMcuSequence(): void {\r\n    let s: string = \"\";\r\n    for (let i = 0; i < this.mcus.length; i++) {\r\n      s += this.mcus[i].getUid() + \", \";\r\n    }\r\n    localStorage.setItem(\"MCU Sequence\", s.substring(0, s.length - 2));\r\n  }\r\n\r\n  storeHatSequence(): void {\r\n    let s: string = \"\";\r\n    for (let i = 0; i < this.hats.length; i++) {\r\n      s += this.hats[i].getUid() + \", \";\r\n    }\r\n    localStorage.setItem(\"HAT Sequence\", s.substring(0, s.length - 2));\r\n  }\r\n\r\n  private storeLocation(m: Movable): void {\r\n    localStorage.setItem(\"X: \" + m.getUid(), m.getX().toString());\r\n    localStorage.setItem(\"Y: \" + m.getUid(), m.getY().toString());\r\n    if (m instanceof Hat) {\r\n      if (m.raspberryPi != null) {\r\n        localStorage.setItem(\"X: \" + m.raspberryPi.getUid(), m.raspberryPi.getX().toString());\r\n        localStorage.setItem(\"Y: \" + m.raspberryPi.getUid(), m.raspberryPi.getY().toString());\r\n      }\r\n    } else if (m instanceof RaspberryPi) {\r\n      if (m.hat != null) {\r\n        localStorage.setItem(\"X: \" + m.hat.getUid(), m.hat.getX().toString());\r\n        localStorage.setItem(\"Y: \" + m.hat.getUid(), m.hat.getY().toString());\r\n      }\r\n    }\r\n  }\r\n\r\n  private moveTo(x: number, y: number, m: Movable): void {\r\n    let dx = x - this.mouseDownRelativeX;\r\n    let dy = y - this.mouseDownRelativeY;\r\n    let xmax = this.workbench.getX() + this.workbench.getWidth() - m.getWidth();\r\n    if (dx < this.workbench.getX()) {\r\n      dx = this.workbench.getX();\r\n    } else if (dx > xmax) {\r\n      dx = xmax;\r\n    }\r\n    let ymax = this.workbench.getY() + this.workbench.getHeight() - m.getHeight();\r\n    if (dy < this.workbench.getY()) {\r\n      dy = this.workbench.getY();\r\n    } else if (dy > ymax) {\r\n      dy = ymax;\r\n    }\r\n    m.setX(dx);\r\n    m.setY(dy);\r\n    if (m instanceof Hat) {\r\n      if (m.raspberryPi != null) {\r\n        m.raspberryPi.setX(m.getX());\r\n        m.raspberryPi.setY(m.getY());\r\n      }\r\n    } else if (m instanceof RaspberryPi) {\r\n      if (m.hat != null) {\r\n        m.hat.setX(m.getX());\r\n        m.hat.setY(m.getY());\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n","/*\r\n * @author Charles Xie\r\n */\r\n\r\n// @ts-ignore\r\nimport raspberryPiImage from \"./img/raspberry-pi.png\";\r\n// @ts-ignore\r\nimport rainbowHatImage from \"./img/rainbow-hat.png\";\r\n// @ts-ignore\r\nimport senseHatImage from \"./img/sense-hat.png\";\r\n// @ts-ignore\r\nimport unicornHatImage from \"./img/unicorn-hat.png\";\r\n// @ts-ignore\r\nimport crickitHatImage from \"./img/crickit-hat.png\";\r\n// @ts-ignore\r\nimport capacitiveTouchHatImage from \"./img/capacitive-touch-hat.png\";\r\n// @ts-ignore\r\nimport panTiltHatImage from \"./img/pan-tilt-hat.png\";\r\n// @ts-ignore\r\nimport fullBreadboardImage from \"./img/full-breadboard.png\";\r\n// @ts-ignore\r\nimport halfBreadboardImage from \"./img/half-breadboard.png\";\r\n// @ts-ignore\r\nimport redLedLightImage from \"./img/red-led-light.png\";\r\n// @ts-ignore\r\nimport greenLedLightImage from \"./img/green-led-light.png\";\r\n// @ts-ignore\r\nimport blueLedLightImage from \"./img/blue-led-light.png\";\r\n// @ts-ignore\r\nimport tricolorLedLightImage from \"./img/tricolor-led-light.png\";\r\n// @ts-ignore\r\nimport momentaryButtonImage from \"./img/momentary-button.png\";\r\n// @ts-ignore\r\nimport toggleSwitchImage from \"./img/toggle-switch.png\";\r\n// @ts-ignore\r\nimport piezoBuzzerImage from \"./img/piezo-buzzer.png\";\r\n\r\nexport class ComponentsPanel {\r\n\r\n  getUi(): string {\r\n    return `<h2 style=\"text-align: center; vertical-align: top; margin-top: 0;\">\r\n                <span style=\"font-size: 1.2em; color: teal; vertical-align: middle;\"><i class=\"fas fa-cubes\"></i></span> Components</h2>\r\n            <hr>\r\n            <div id=\"components-scroller\" style=\"overflow-y: auto; height: 360px;\">\r\n              <h3 style=\"text-align: left\"><span style=\"font-size: 1.2em; color: teal; vertical-align: middle\"><i class=\"fas fa-cube\"></i></span> Microcontrollers</h3>\r\n              <div class=\"row\" style=\"margin-right: 10px; background-color: lightskyblue; border: 1px solid #b81900; border-radius: 4px\">\r\n                <div class=\"column\">\r\n                  <img src=\"${raspberryPiImage}\" draggable=\"true\" id=\"raspberry-pi-image\" style=\"width:100%; cursor: pointer; box-shadow: 5px 5px 5px gray;\" title=\"Raspberry Pi\" alt=\"Raspberry Pi\">\r\n                </div>\r\n              </div>\r\n              <div class=\"vertical-divider\"></div>\r\n              <h3 style=\"text-align: left\"><span style=\"font-size: 1.2em; color: teal; vertical-align: middle\"><i class=\"fas fa-cube\"></i></span> HATs</h3>\r\n              <div class=\"row\" style=\"margin-right: 10px;  background-color: lightblue; border: 1px solid #b81900; border-radius: 4px\">\r\n                <div class=\"column\">\r\n                  <img src=\"${rainbowHatImage}\" draggable=\"true\" id=\"rainbow-hat-image\" style=\"width:100%; cursor: pointer; box-shadow: 5px 5px 5px gray;\" title=\"Rainbow HAT\" alt=\"Rainbow HAT\">\r\n                  <img src=\"${senseHatImage}\" draggable=\"true\" id=\"sense-hat-image\" style=\"width:100%; cursor: pointer; box-shadow: 5px 5px 5px gray;\" title=\"Sense HAT\" alt=\"Sense HAT\">\r\n                  <img src=\"${capacitiveTouchHatImage}\" draggable=\"true\" id=\"capacitive-touch-hat-image\" style=\"width:100%; cursor: pointer; box-shadow: 5px 5px 5px gray;\" title=\"Capacitive Touch HAT\" alt=\"Capacitive Touch HAT\">\r\n               </div>\r\n                <div class=\"column\">\r\n                  <img src=\"${unicornHatImage}\" draggable=\"true\" id=\"unicorn-hat-image\" style=\"width:100%; cursor: pointer; box-shadow: 5px 5px 5px gray;\" title=\"Unicorn HAT\" alt=\"Unicorn HAT\">\r\n                  <img src=\"${crickitHatImage}\" draggable=\"true\" id=\"crickit-hat-image\" style=\"width:100%; cursor: pointer; box-shadow: 5px 5px 5px gray;\" title=\"Crickit HAT\" alt=\"Crickit HAT\">\r\n                  <img src=\"${panTiltHatImage}\" draggable=\"true\" id=\"pan-tilt-hat-image\" style=\"width:100%; cursor: pointer; box-shadow: 5px 5px 5px gray;\" title=\"Pan-Tilt HAT\" alt=\"Pan-Tilt HAT\">\r\n               </div>\r\n              </div>\r\n              <div class=\"vertical-divider\"></div>\r\n              <h3 style=\"text-align: left\"><span style=\"font-size: 1.2em; color: teal; vertical-align: middle\"><i class=\"fas fa-cube\"></i></span> Others</h3>\r\n              <div class=\"row\" style=\"margin-right: 10px;  background-color: lightyellow; border: 1px solid #b81900; border-radius: 4px\">\r\n                <div class=\"column\">\r\n                  <img src=\"${fullBreadboardImage}\" draggable=\"true\" id=\"full-breadboard-image\" style=\"width:100%; cursor: pointer; box-shadow: 5px 5px 5px gray;\" title=\"Full Breadboard\" alt=\"Full Breadboard\">\r\n                  <img src=\"${redLedLightImage}\" draggable=\"true\" id=\"red-led-light-image\" style=\"width:100%; cursor: pointer;\" title=\"Red LED Light\" alt=\"Red LED Light\">\r\n                  <img src=\"${greenLedLightImage}\" draggable=\"true\" id=\"green-led-light-image\" style=\"width:100%; cursor: pointer;\" title=\"Green LED Light\" alt=\"Green LED Light\">\r\n                  <img src=\"${blueLedLightImage}\" draggable=\"true\" id=\"blue-led-light-image\" style=\"width:100%; cursor: pointer;\" title=\"Blue LED Light\" alt=\"Blue LED Light\">\r\n                 <img src=\"${tricolorLedLightImage}\" draggable=\"true\" id=\"tricolor-led-light-image\" style=\"width:100%; cursor: pointer;\" title=\"Tricolor LED Light\" alt=\"Tricolor LED Light\">\r\n                </div>\r\n                <div class=\"column\">\r\n                  <img src=\"${halfBreadboardImage}\" draggable=\"true\" id=\"half-breadboard-image\" style=\"width:100%; cursor: pointer; box-shadow: 5px 5px 5px gray;\" title=\"Half Breadboard\" alt=\"Half Breadboard\">\r\n                  <img src=\"${momentaryButtonImage}\" draggable=\"true\" id=\"momentary-button-image\" style=\"width:100%; cursor: pointer;\" title=\"Momentary Button\" alt=\"Momentary Button\">\r\n                  <img src=\"${toggleSwitchImage}\" draggable=\"true\" id=\"toggle-switch-image\" style=\"width:100%; cursor: pointer;\" title=\"Toggle Switch\" alt=\"Toggle Switch\">\r\n                  <img src=\"${piezoBuzzerImage}\" draggable=\"true\" id=\"piezo-buzzer-image\" style=\"width:100%; cursor: pointer;\" title=\"Piezo Buzzer\" alt=\"Piezo Buzzer\">\r\n                </div>\r\n              </div>\r\n            </div>`;\r\n  }\r\n\r\n  render(selectorId: string): void {\r\n    let element = document.getElementById(selectorId);\r\n    element.innerHTML = this.getUi();\r\n  }\r\n\r\n}\r\n","/*\r\n * @author Charles Xie\r\n */\r\n\r\nexport abstract class ComponentContextMenu {\r\n\r\n  id: string;\r\n\r\n  abstract getUi(): string;\r\n\r\n  abstract addListeners(): void;\r\n\r\n  render(selectorId: string): void {\r\n    let element = document.getElementById(selectorId);\r\n    element.innerHTML = this.getUi();\r\n  }\r\n\r\n}\r\n","/*\r\n * @author Charles Xie\r\n */\r\nimport {Hat} from \"../components/Hat\";\r\nimport {system} from \"../Main\";\r\nimport {RaspberryPi} from \"../components/RaspberryPi\";\r\nimport {ComponentContextMenu} from \"./ComponentContextMenu\";\r\n\r\nexport abstract class HatContextMenu extends ComponentContextMenu {\r\n\r\n  hat: Hat;\r\n\r\n  addListeners(): void {\r\n    let attachButton = document.getElementById(this.id + \"-attach-button\");\r\n    attachButton.addEventListener(\"click\", this.attachButtonClick.bind(this), false);\r\n    let detachButton = document.getElementById(this.id + \"-detach-button\");\r\n    detachButton.addEventListener(\"click\", this.detachButtonClick.bind(this), false);\r\n    let deleteButton = document.getElementById(this.id + \"-delete-button\");\r\n    deleteButton.addEventListener(\"click\", this.deleteButtonClick.bind(this), false);\r\n  }\r\n\r\n  deleteButtonClick(e: MouseEvent): void {\r\n    if (this.hat) {\r\n      if (confirm(\"Are you sure you want to delete \" + this.hat.uid + \"?\")) {\r\n        system.removeHat(this.hat);\r\n      }\r\n    }\r\n  }\r\n\r\n  attachButtonClick(e: MouseEvent): void {\r\n    e.preventDefault();\r\n    let menu = document.getElementById(this.id) as HTMLMenuElement;\r\n    menu.classList.remove(\"show-menu\");\r\n    let i = this.hat.whichRaspberryPi();\r\n    if (i >= 0) {\r\n      this.hat.attach(<RaspberryPi>system.mcus[i]);\r\n    }\r\n  }\r\n\r\n  detachButtonClick(e: MouseEvent): void {\r\n    e.preventDefault();\r\n    let menu = document.getElementById(this.id) as HTMLMenuElement;\r\n    menu.classList.remove(\"show-menu\");\r\n    this.hat.attach(null);\r\n  }\r\n\r\n}\r\n","/*\r\n * @author Charles Xie\r\n */\r\n\r\nimport {HatContextMenu} from \"./HatContextMenu\";\r\n\r\nexport class RainbowHatContextMenu extends HatContextMenu {\r\n\r\n  constructor() {\r\n    super();\r\n    this.id = \"rainbow-hat-context-menu\";\r\n  }\r\n\r\n  getUi(): string {\r\n    return `<menu id=\"${this.id}\" class=\"menu\" style=\"width: 120px; z-index: 10000\">\r\n              <li class=\"menu-item\" id=\"rainbow-hat-attach-menu-item\">\r\n                <button type=\"button\" class=\"menu-btn\" id=\"${this.id}-attach-button\"><i class=\"fas fa-angle-double-down\"></i><span class=\"menu-text\">Attach</span></button>\r\n              </li>\r\n              <li class=\"menu-item\" id=\"rainbow-hat-detach-menu-item\">\r\n                <button type=\"button\" class=\"menu-btn\" id=\"${this.id}-detach-button\"><i class=\"fas fa-angle-double-up\"></i><span class=\"menu-text\">Detach</span></button>\r\n              </li>\r\n              <li class=\"menu-item\" id=\"rainbow-hat-delete-menu-item\">\r\n                <button type=\"button\" class=\"menu-btn\" id=\"${this.id}-delete-button\"><i class=\"fas fa-trash\"></i><span class=\"menu-text\">Delete</span></button>\r\n              </li>\r\n              <li class=\"menu-item\">\r\n                <button type=\"button\" class=\"menu-btn\" id=\"${this.id}-code-button\"><i class=\"fas fa-code\"></i><span class=\"menu-text\">Code</span></button>\r\n              </li>\r\n            </menu>`;\r\n  }\r\n\r\n}\r\n","/*\r\n * @author Charles Xie\r\n */\r\n\r\nimport {ComponentContextMenu} from \"./ComponentContextMenu\";\r\n\r\nexport class WorkbenchContextMenu extends ComponentContextMenu {\r\n\r\n  constructor() {\r\n    super();\r\n    this.id = \"workbench-context-menu\";\r\n  }\r\n\r\n  getUi(): string {\r\n    return `<menu id=\"${this.id}\" class=\"menu\" style=\"width: 120px; z-index: 10000\">\r\n              <li class=\"menu-item\">\r\n                <button type=\"button\" class=\"menu-btn\"><i class=\"fas fa-folder-open\"></i><span class=\"menu-text\">Open</span></button>\r\n              </li>\r\n              <li class=\"menu-item disabled\">\r\n                <button type=\"button\" class=\"menu-btn\"><i class=\"fas fa-download\"></i><span class=\"menu-text\">Save</span></button>\r\n              </li>\r\n              <li class=\"menu-separator\"></li>\r\n              <li class=\"menu-item\">\r\n                <button type=\"button\" class=\"menu-btn\"><i class=\"fas fa-trash\"></i><span class=\"menu-text\">Delete</span></button>\r\n              </li>\r\n              <li class=\"menu-item submenu\">\r\n                <button type=\"button\" class=\"menu-btn\"><i class=\"fas fa-file-import\"></i><span class=\"menu-text\">Import</span></button>\r\n\r\n                <menu class=\"menu\" style=\"width: 160px;\">\r\n                  <li class=\"menu-item\">\r\n                    <button type=\"button\" class=\"menu-btn\"><span class=\"menu-text\">Breadboard</span></button>\r\n                  </li>\r\n\r\n                  <li class=\"menu-item submenu\">\r\n                    <button type=\"button\" class=\"menu-btn\"><span class=\"menu-text\">Sensors</span></button>\r\n                    <menu class=\"menu\" style=\"width: 120px;\">\r\n                      <li class=\"menu-item\">\r\n                        <button type=\"button\" class=\"menu-btn\"><span class=\"menu-text\">BME280</span></button>\r\n                      </li>\r\n                      <li class=\"menu-item\">\r\n                        <button type=\"button\" class=\"menu-btn\"><span class=\"menu-text\">TSL2561</span></button>\r\n                      </li>\r\n                      <li class=\"menu-item\">\r\n                        <button type=\"button\" class=\"menu-btn\"><span class=\"menu-text\">HCSR04</span></button>\r\n                      </li>\r\n                    </menu>\r\n                  </li>\r\n\r\n                  <li class=\"menu-item submenu\">\r\n                    <button type=\"button\" class=\"menu-btn\"><span class=\"menu-text\">Actuators</span></button>\r\n                    <menu class=\"menu\" style=\"width: 180px;\">\r\n                      <li class=\"menu-item\">\r\n                        <button type=\"button\" class=\"menu-btn\"><span class=\"menu-text\">Buzzer</span></button>\r\n                      </li>\r\n                      <li class=\"menu-item\">\r\n                        <button type=\"button\" class=\"menu-btn\"><span class=\"menu-text\">Servo Motor</span></button>\r\n                      </li>\r\n                      <li class=\"menu-item\">\r\n                        <button type=\"button\" class=\"menu-btn\"><span class=\"menu-text\">LED Light</span></button>\r\n                      </li>\r\n                      <li class=\"menu-item\">\r\n                        <button type=\"button\" class=\"menu-btn\"><span class=\"menu-text\">Multicolor LED Light</span></button>\r\n                      </li>\r\n                    </menu>\r\n                  </li>\r\n\r\n                </menu>\r\n              </li>\r\n            </menu>`;\r\n  }\r\n\r\n  addListeners(): void {\r\n    // TODO\r\n  }\r\n\r\n}\r\n","/*\r\n * @author Charles Xie\r\n */\r\n\r\nexport class LineChartContextMenu {\r\n\r\n  id: string = \"linechart-context-menu\";\r\n\r\n  getUi(): string {\r\n    return `<menu id=\"${this.id}\" class=\"menu\" style=\"z-index: 10000\">\r\n              <li class=\"menu-item\">\r\n                <button type=\"button\" class=\"menu-btn\"><i class=\"fas fa-palette\"></i><span class=\"menu-text\">Colors</span></button>\r\n              </li>\r\n              <li class=\"menu-item\">\r\n                <button type=\"button\" class=\"menu-btn\"><i class=\"fas fa-cog\"></i><span class=\"menu-text\">Options</span></button>\r\n              </li>\r\n            </menu>`;\r\n  }\r\n\r\n  render(selectorId: string): void {\r\n    let element = document.getElementById(selectorId);\r\n    element.innerHTML = this.getUi();\r\n  }\r\n\r\n}\r\n","/*\r\n * @author Charles Xie\r\n */\r\n\r\nimport {system} from \"../Main\";\r\nimport {RaspberryPi} from \"../components/RaspberryPi\";\r\nimport {ComponentContextMenu} from \"./ComponentContextMenu\";\r\n\r\nexport class RaspberryPiContextMenu extends ComponentContextMenu {\r\n\r\n  raspberryPi: RaspberryPi;\r\n\r\n  constructor() {\r\n    super();\r\n    this.id = \"raspberry-pi-context-menu\";\r\n  }\r\n\r\n  getUi(): string {\r\n    return `<menu id=\"${this.id}\" class=\"menu\" style=\"width: 120px; z-index: 10000\">\r\n              <li class=\"menu-item\">\r\n                <button type=\"button\" id=\"raspberry-pi-context-menu-delete-button\" class=\"menu-btn\"><i class=\"fas fa-trash\"></i><span class=\"menu-text\">Delete</span></button>\r\n              </li>\r\n              <li class=\"menu-item\">\r\n                <button type=\"button\" id=\"raspberry-pi-context-menu-settings-button\" class=\"menu-btn\"><i class=\"fas fa-cog\"></i><span class=\"menu-text\">Settings</span></button>\r\n              </li>\r\n            </menu>`;\r\n  }\r\n\r\n  addListeners(): void {\r\n    let deleteButton = document.getElementById(\"raspberry-pi-context-menu-delete-button\");\r\n    deleteButton.addEventListener(\"click\", this.deleteButtonClick.bind(this), false);\r\n  }\r\n\r\n  private deleteButtonClick(e: MouseEvent): void {\r\n    if (this.raspberryPi) {\r\n      if (confirm(\"Are you sure you want to delete \" + this.raspberryPi.uid + \"?\")) {\r\n        system.removeRaspberryPi(this.raspberryPi);\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n","/*\r\n * @author Charles Xie\r\n */\r\nimport {system} from \"../Main\";\r\nimport {RainbowHat} from \"../components/RainbowHat\";\r\n\r\nexport class ColorPickerContextMenu {\r\n\r\n  rainbowHat: RainbowHat;\r\n  id: string = \"colorpicker-context-menu\";\r\n\r\n  getUi(): string {\r\n    return `<menu id=\"${this.id}\" class=\"menu\" style=\"width: 338px; z-index: 10000;\">\r\n              <li class=\"menu-item\">\r\n                <div id=\"colorpicker-title\" style=\"text-align: center; padding: 4px; font-family: inherit; font-size: 14px;\"></div>\r\n                <div id=\"colorpicker\" style=\"cursor: crosshair; margin: 1px 1px 1px 1px\">\r\n                  <canvas id=\"color-block\" height=\"300\" width=\"300\"></canvas>\r\n                  <canvas id=\"color-strip\" height=\"300\" width=\"30\"></canvas>\r\n                </div>\r\n                <div style=\"display: table; margin: auto; padding: 5px 5px 5px 5px;\">\r\n                  <input type=\"text\" readonly id=\"colorpicker-hex-code\" value=\"#FFFFFF\" style=\"width: 60px; height: 20px; border: 1px solid black; vertical-align: middle; text-align: center; font: 12px Verdana;\">\r\n                  <div class=\"horizontal-divider\"></div>\r\n                  <div id=\"colorpicker-label\" style=\"vertical-align: middle; width: 20px; height: 20px; border: 2px solid black; display: inline-block;\"></div>\r\n                  <div class=\"horizontal-divider\"></div>\r\n                  <button id=\"colorpicker-cancel-button\" style=\"font: 12px Verdana\">Cancel</button>\r\n                  <div class=\"horizontal-divider\"></div>\r\n                  <button id=\"colorpicker-ok-button\" style=\"font: 12px Verdana\">OK</button>\r\n                </div>\r\n              </li>\r\n            </menu>`;\r\n  }\r\n\r\n  render(selectorId: string): void {\r\n    let element = document.getElementById(selectorId);\r\n    element.innerHTML = this.getUi();\r\n    let cancelButton = document.getElementById(\"colorpicker-cancel-button\") as HTMLButtonElement;\r\n    cancelButton.onclick = function () {\r\n      let menu = document.getElementById(that.id) as HTMLMenuElement;\r\n      menu.classList.remove(\"show-menu\");\r\n    };\r\n    let okButton = document.getElementById(\"colorpicker-ok-button\") as HTMLButtonElement;\r\n    let that = this;\r\n    okButton.onclick = function () {\r\n      if (that.rainbowHat) {\r\n        that.rainbowHat.setSelectedRgbLedLightColor(system.colorPicker.getSelectedColor());\r\n      }\r\n      let menu = document.getElementById(that.id) as HTMLMenuElement;\r\n      menu.classList.remove(\"show-menu\");\r\n    };\r\n    // prevent the mouse event from being propagated to the playground\r\n    let menu = document.getElementById(this.id);\r\n    menu.onmousedown = function (e) {\r\n      e.stopPropagation();\r\n    };\r\n    menu.onmouseup = function (e) {\r\n      e.stopPropagation();\r\n    };\r\n    menu.onmousemove = function (e) {\r\n      e.stopPropagation();\r\n    };\r\n  }\r\n\r\n}\r\n","/*\n * @author Charles Xie\n */\n\nexport class Block {\n\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n  name: string;\n\n  private radius: number = 10;\n  private margin: number = 30;\n\n  constructor(x: number, y: number, width: number, height: number, name: string) {\n    this.x = x;\n    this.y = y;\n    this.width = width;\n    this.height = height;\n    this.name = name;\n  }\n\n  draw(ctx: CanvasRenderingContext2D): void {\n\n    ctx.fillStyle = \"lightgray\";\n    ctx.fillRoundedRect(this.x, this.y, this.width, this.height, this.radius);\n    ctx.lineWidth = 1;\n    ctx.strokeStyle = \"black\";\n    ctx.drawRoundedRect(this.x, this.y, this.width, this.height, this.radius);\n\n    ctx.fillStyle = \"white\";\n    ctx.beginPath();\n    ctx.rect(this.x + this.margin, this.y + this.margin, this.width - 2 * this.margin, this.height - 2 * this.margin);\n    ctx.closePath();\n    ctx.fill();\n    ctx.strokeStyle = \"black\";\n    ctx.stroke();\n\n    ctx.fillStyle = \"black\";\n    ctx.font = \"20px Arial\";\n    let textMetrics = ctx.measureText(this.name);\n    ctx.fillText(this.name, this.x + this.width / 2 - textMetrics.width / 2, this.y + this.height / 2 + 8);\n\n    let r = 8;\n    ctx.beginPath();\n    ctx.arc(this.x, this.y + this.height / 3, r, 0.5 * Math.PI, 1.5 * Math.PI, false);\n    ctx.stroke();\n    ctx.beginPath();\n    ctx.arc(this.x, this.y + this.height * 2 / 3, r, 0.5 * Math.PI, 1.5 * Math.PI, false);\n    ctx.stroke();\n    ctx.beginPath();\n    ctx.arc(this.x + this.width, this.y + this.height / 2, r, 0.5 * Math.PI, 1.5 * Math.PI, true);\n    ctx.stroke();\n\n  }\n\n\n}\n","/*\r\n * @author Charles Xie\r\n */\r\n\r\nexport class Point {\r\n\r\n  public x: number;\r\n  public y: number;\r\n\r\n  constructor(x: number, y: number) {\r\n    this.x = x;\r\n    this.y = y;\r\n  }\r\n\r\n  public toString(): string {\r\n    return \"(\" + this.x + \", \" + this.y + \")\";\r\n  }\r\n\r\n}\r\n","/*\r\n * @author Charles Xie\r\n */\r\n\r\nimport {Block} from \"./Block\";\r\nimport {Point} from \"../math/Point\";\r\n\r\nexport class Codespace {\r\n\r\n  private blocks: Block[] = [];\r\n\r\n  readonly canvas: HTMLCanvasElement;\r\n\r\n  constructor(canvasId: string) {\r\n    this.canvas = document.getElementById(canvasId) as HTMLCanvasElement;\r\n    this.canvas.addEventListener(\"mousedown\", this.mouseDown.bind(this), false);\r\n    this.canvas.addEventListener(\"mouseup\", this.mouseUp.bind(this), false);\r\n    this.canvas.addEventListener(\"mousemove\", this.mouseMove.bind(this), false);\r\n    this.canvas.addEventListener('contextmenu', this.openContextMenu.bind(this), false);\r\n    this.blocks.push(new Block(20, 20, 160, 100, \"X + Y\"));\r\n    this.blocks.push(new Block(220, 220, 160, 100, \"X * Y\"));\r\n  }\r\n\r\n  public draw(): void {\r\n    let ctx = this.canvas.getContext('2d');\r\n    ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\r\n    for (let i = 0; i < this.blocks.length; i++) {\r\n      this.blocks[i].draw(ctx);\r\n    }\r\n\r\n    let points = [];\r\n    points.push(new Point(188, 70));\r\n    points.push(new Point(240, 140));\r\n    points.push(new Point(20, 200));\r\n    points.push(new Point(212, 288));\r\n    this.drawSpline(points, ctx);\r\n\r\n  }\r\n\r\n  private drawSpline(points: Point[], ctx: CanvasRenderingContext2D) {\r\n    ctx.beginPath();\r\n    ctx.moveTo(points[0].x, points[0].y);\r\n    let i;\r\n    for (i = 1; i < points.length - 2; i++) {\r\n      let xc = (points[i].x + points[i + 1].x) / 2;\r\n      let yc = (points[i].y + points[i + 1].y) / 2;\r\n      ctx.quadraticCurveTo(points[i].x, points[i].y, xc, yc);\r\n    }\r\n    ctx.quadraticCurveTo(points[i].x, points[i].y, points[i + 1].x, points[i + 1].y);\r\n    ctx.stroke();\r\n  }\r\n\r\n  // detect if (x, y) is inside this workbench\r\n  public contains(x: number, y: number): boolean {\r\n    return x > this.canvas.offsetLeft && x < this.canvas.offsetLeft + this.canvas.width && y > this.canvas.offsetTop && y < this.canvas.offsetTop + this.canvas.height;\r\n  }\r\n\r\n  public getX(): number {\r\n    return 10;\r\n  }\r\n\r\n  public getY(): number {\r\n    return 10;\r\n  }\r\n\r\n  public getWidth(): number {\r\n    return this.canvas.width;\r\n  }\r\n\r\n  public getHeight(): number {\r\n    return this.canvas.height;\r\n  }\r\n\r\n  private mouseDown(e: MouseEvent): void {\r\n    e.preventDefault();\r\n    let rect = this.canvas.getBoundingClientRect();\r\n    let dx = e.clientX - rect.x;\r\n    let dy = e.clientY - rect.y;\r\n  }\r\n\r\n  private mouseUp(e: MouseEvent): void {\r\n    e.preventDefault();\r\n    let rect = this.canvas.getBoundingClientRect();\r\n    let dx = e.clientX - rect.x;\r\n    let dy = e.clientY - rect.y;\r\n    let context = this.canvas.getContext(\"2d\");\r\n  }\r\n\r\n  private mouseMove(e: MouseEvent): void {\r\n    e.preventDefault();\r\n    let rect = this.canvas.getBoundingClientRect();\r\n    let dx = e.clientX - rect.x;\r\n    let dy = e.clientY - rect.y;\r\n    let context = this.canvas.getContext(\"2d\");\r\n  }\r\n\r\n  private openContextMenu(e: MouseEvent): void {\r\n    e.preventDefault();\r\n    let menu = document.getElementById(\"workbench-context-menu\") as HTMLMenuElement;\r\n    menu.style.left = e.clientX + \"px\";\r\n    menu.style.top = (e.clientY - document.getElementById(\"tabs\").getBoundingClientRect().bottom) + \"px\";\r\n    menu.classList.add(\"show-menu\");\r\n  }\r\n\r\n}\r\n","/*\n * @author Charles Xie\n */\nimport {Codespace} from \"./Codespace\";\n\nexport class Code {\n\n  codespace: Codespace;\n\n  constructor() {\n    this.codespace = new Codespace(\"codespace\");\n  }\n\n  draw(): void {\n    this.codespace.draw();\n  }\n\n}\n","/*\r\n * @author Charles Xie\r\n */\r\n\r\nimport {HatContextMenu} from \"./HatContextMenu\";\r\n\r\nexport class SenseHatContextMenu extends HatContextMenu {\r\n\r\n  constructor() {\r\n    super();\r\n    this.id = \"sense-hat-context-menu\";\r\n  }\r\n\r\n  getUi(): string {\r\n    return `<menu id=\"${this.id}\" class=\"menu\" style=\"width: 120px; z-index: 10000\">\r\n              <li class=\"menu-item\" id=\"sense-hat-attach-menu-item\">\r\n                <button type=\"button\" class=\"menu-btn\" id=\"${this.id}-attach-button\"><i class=\"fas fa-angle-double-down\"></i><span class=\"menu-text\">Attach</span></button>\r\n              </li>\r\n              <li class=\"menu-item\" id=\"sense-hat-detach-menu-item\">\r\n                <button type=\"button\" class=\"menu-btn\" id=\"${this.id}-detach-button\"><i class=\"fas fa-angle-double-up\"></i><span class=\"menu-text\">Detach</span></button>\r\n              </li>\r\n              <li class=\"menu-item\" id=\"sense-hat-delete-menu-item\">\r\n                <button type=\"button\" class=\"menu-btn\" id=\"${this.id}-delete-button\"><i class=\"fas fa-trash\"></i><span class=\"menu-text\">Delete</span></button>\r\n              </li>\r\n              <li class=\"menu-item\">\r\n                <button type=\"button\" class=\"menu-btn\" id=\"${this.id}-code-button\"><i class=\"fas fa-code\"></i><span class=\"menu-text\">Code</span></button>\r\n              </li>\r\n            </menu>`;\r\n  }\r\n\r\n}\r\n","/*\r\n * @author Charles Xie\r\n */\r\n\r\nimport {HatContextMenu} from \"./HatContextMenu\";\r\n\r\nexport class CapacitiveTouchHatContextMenu extends HatContextMenu {\r\n\r\n  constructor() {\r\n    super();\r\n    this.id = \"capacitive-touch-hat-context-menu\";\r\n  }\r\n\r\n  getUi(): string {\r\n    return `<menu id=\"${this.id}\" class=\"menu\" style=\"width: 120px; z-index: 10000\">\r\n              <li class=\"menu-item\" id=\"capacitive-touch-hat-attach-menu-item\">\r\n                <button type=\"button\" class=\"menu-btn\" id=\"${this.id}-attach-button\"><i class=\"fas fa-angle-double-down\"></i><span class=\"menu-text\">Attach</span></button>\r\n              </li>\r\n              <li class=\"menu-item\" id=\"capacitive-touch-hat-detach-menu-item\">\r\n                <button type=\"button\" class=\"menu-btn\" id=\"${this.id}-detach-button\"><i class=\"fas fa-angle-double-up\"></i><span class=\"menu-text\">Detach</span></button>\r\n              </li>\r\n              <li class=\"menu-item\" id=\"capacitive-touch-hat-delete-menu-item\">\r\n                <button type=\"button\" class=\"menu-btn\" id=\"${this.id}-delete-button\"><i class=\"fas fa-trash\"></i><span class=\"menu-text\">Delete</span></button>\r\n              </li>\r\n              <li class=\"menu-item\">\r\n                <button type=\"button\" class=\"menu-btn\" id=\"${this.id}-code-button\"><i class=\"fas fa-code\"></i><span class=\"menu-text\">Code</span></button>\r\n              </li>\r\n            </menu>`;\r\n  }\r\n\r\n}\r\n","/*\r\n * @author Charles Xie\r\n */\r\n\r\nimport {HatContextMenu} from \"./HatContextMenu\";\r\n\r\nexport class UnicornHatContextMenu extends HatContextMenu {\r\n\r\n  constructor() {\r\n    super();\r\n    this.id = \"unicorn-hat-context-menu\";\r\n  }\r\n\r\n  getUi(): string {\r\n    return `<menu id=\"${this.id}\" class=\"menu\" style=\"width: 120px; z-index: 10000\">\r\n              <li class=\"menu-item\" id=\"unicorn-hat-attach-menu-item\">\r\n                <button type=\"button\" class=\"menu-btn\" id=\"${this.id}-attach-button\"><i class=\"fas fa-angle-double-down\"></i><span class=\"menu-text\">Attach</span></button>\r\n              </li>\r\n              <li class=\"menu-item\" id=\"unicorn-hat-detach-menu-item\">\r\n                <button type=\"button\" class=\"menu-btn\" id=\"${this.id}-detach-button\"><i class=\"fas fa-angle-double-up\"></i><span class=\"menu-text\">Detach</span></button>\r\n              </li>\r\n              <li class=\"menu-item\" id=\"unicorn-hat-delete-menu-item\">\r\n                <button type=\"button\" class=\"menu-btn\" id=\"${this.id}-delete-button\"><i class=\"fas fa-trash\"></i><span class=\"menu-text\">Delete</span></button>\r\n              </li>\r\n              <li class=\"menu-item\">\r\n                <button type=\"button\" class=\"menu-btn\" id=\"${this.id}-code-button\"><i class=\"fas fa-code\"></i><span class=\"menu-text\">Code</span></button>\r\n              </li>\r\n            </menu>`;\r\n  }\r\n\r\n}\r\n","/*\r\n * @author Charles Xie\r\n */\r\n\r\nimport {HatContextMenu} from \"./HatContextMenu\";\r\n\r\nexport class CrickitHatContextMenu extends HatContextMenu {\r\n\r\n  constructor() {\r\n    super();\r\n    this.id = \"crickit-hat-context-menu\";\r\n  }\r\n\r\n  getUi(): string {\r\n    return `<menu id=\"${this.id}\" class=\"menu\" style=\"width: 120px; z-index: 10000\">\r\n              <li class=\"menu-item\" id=\"crickit-hat-attach-menu-item\">\r\n                <button type=\"button\" class=\"menu-btn\" id=\"${this.id}-attach-button\"><i class=\"fas fa-angle-double-down\"></i><span class=\"menu-text\">Attach</span></button>\r\n              </li>\r\n              <li class=\"menu-item\" id=\"crickit-hat-detach-menu-item\">\r\n                <button type=\"button\" class=\"menu-btn\" id=\"${this.id}-detach-button\"><i class=\"fas fa-angle-double-up\"></i><span class=\"menu-text\">Detach</span></button>\r\n              </li>\r\n              <li class=\"menu-item\" id=\"crickit-hat-delete-menu-item\">\r\n                <button type=\"button\" class=\"menu-btn\" id=\"${this.id}-delete-button\"><i class=\"fas fa-trash\"></i><span class=\"menu-text\">Delete</span></button>\r\n              </li>\r\n              <li class=\"menu-item\">\r\n                <button type=\"button\" class=\"menu-btn\" id=\"${this.id}-code-button\"><i class=\"fas fa-code\"></i><span class=\"menu-text\">Code</span></button>\r\n              </li>\r\n            </menu>`;\r\n  }\r\n\r\n}\r\n","/*\r\n * @author Charles Xie\r\n */\r\n\r\nimport {HatContextMenu} from \"./HatContextMenu\";\r\n\r\nexport class PanTiltHatContextMenu extends HatContextMenu {\r\n\r\n  constructor() {\r\n    super();\r\n    this.id = \"pan-tilt-hat-context-menu\";\r\n  }\r\n\r\n  getUi(): string {\r\n    return `<menu id=\"${this.id}\" class=\"menu\" style=\"width: 120px; z-index: 10000\">\r\n              <li class=\"menu-item\" id=\"pan-tilt-hat-attach-menu-item\">\r\n                <button type=\"button\" class=\"menu-btn\" id=\"${this.id}-attach-button\"><i class=\"fas fa-angle-double-down\"></i><span class=\"menu-text\">Attach</span></button>\r\n              </li>\r\n              <li class=\"menu-item\" id=\"pan-tilt-hat-detach-menu-item\">\r\n                <button type=\"button\" class=\"menu-btn\" id=\"${this.id}-detach-button\"><i class=\"fas fa-angle-double-up\"></i><span class=\"menu-text\">Detach</span></button>\r\n              </li>\r\n              <li class=\"menu-item\" id=\"pan-tilt-hat-delete-menu-item\">\r\n                <button type=\"button\" class=\"menu-btn\" id=\"${this.id}-delete-button\"><i class=\"fas fa-trash\"></i><span class=\"menu-text\">Delete</span></button>\r\n              </li>\r\n              <li class=\"menu-item\">\r\n                <button type=\"button\" class=\"menu-btn\" id=\"${this.id}-code-button\"><i class=\"fas fa-code\"></i><span class=\"menu-text\">Code</span></button>\r\n              </li>\r\n            </menu>`;\r\n  }\r\n\r\n}\r\n","/*\n * @author Charles Xie\n */\n\nimport \"@fortawesome/fontawesome-free/css/all.css\";\nimport * as Constants from \"./Constants\";\nimport {User} from \"./User\";\nimport {System} from \"./System\";\nimport {Movable} from \"./Movable\";\nimport {ComponentsPanel} from \"./ComponentsPanel\";\nimport {RainbowHatContextMenu} from \"./ui/RainbowHatContextMenu\";\nimport {WorkbenchContextMenu} from \"./ui/WorkbenchContextMenu\";\nimport {LineChartContextMenu} from \"./ui/LineChartContextMenu\";\nimport {RaspberryPiContextMenu} from \"./ui/RaspberryPiContextMenu\";\nimport {ColorPickerContextMenu} from \"./ui/ColorPickerContextMenu\";\nimport {Code} from \"./code/Code\";\nimport {LineChart} from \"./tools/LineChart\";\nimport {SenseHatContextMenu} from \"./ui/SenseHatContextMenu\";\nimport {CapacitiveTouchHatContextMenu} from \"./ui/CapacitiveTouchHatContextMenu\";\nimport {UnicornHatContextMenu} from \"./ui/UnicornHatContextMenu\";\nimport {CrickitHatContextMenu} from \"./ui/CrickitHatContextMenu\";\nimport {PanTiltHatContextMenu} from \"./ui/PanTiltHatContextMenu\";\n\ndeclare global {\n  interface CanvasRenderingContext2D {\n    drawTooltip(x, y, h, r, margin, text, centered);\n\n    drawRoundedRect(x, y, w, h, r);\n\n    fillRoundedRect(x, y, w, h, r);\n  }\n\n  interface String {\n    startsWith(s);\n  }\n}\n\nexport let system = new System();\nexport let code = new Code();\nexport let user = new User(\"Charles\", null, \"Xie\");\nexport let contextMenus: any = {};\n\nlet social = `<span style=\"font-size: 2em; vertical-align: middle; cursor: pointer;\"><i class=\"fab fa-facebook-square\"></i></span>\n              <span style=\"font-size: 2em; vertical-align: middle; cursor: pointer;\"><i class=\"fab fa-weixin\"></i></span>\n              <span style=\"font-size: 2em; vertical-align: middle; cursor: pointer;\"><i class=\"fab fa-twitter\"></i></span>\n              <span style=\"font-size: 2em; vertical-align: middle; cursor: pointer;\"><i class=\"fab fa-weibo\"></i></span>\n              <span style=\"font-size: 2em; vertical-align: middle; cursor: pointer;\"><i class=\"fab fa-youtube\"></i></span>`;\n\nwindow.onload = function () {\n\n  let signinLabel = document.getElementById(\"sign-in-label\") as HTMLElement;\n  signinLabel.innerHTML = \"Hello, \" + user.firstName;\n  let nameLabel = document.getElementById(\"name-label\") as HTMLElement;\n  nameLabel.innerHTML = Constants.Software.name;\n  let versionLabel = document.getElementById(\"version-label\") as HTMLElement;\n  versionLabel.innerHTML = Constants.Software.version;\n  let creditLabel = document.getElementById('credit') as HTMLElement;\n  creditLabel.innerHTML = social + \"<div class='horizontal-divider'></div>\" + Constants.Software.name + \" \" + Constants.Software.version + \", \" + user.fullName + \" , &copy; \" + new Date().getFullYear();\n\n  let digitalTwinsTabButton = document.getElementById(\"digital-twins-tab-button\") as HTMLButtonElement;\n  digitalTwinsTabButton.addEventListener(\"click\", function (event) {\n    selectTab(digitalTwinsTabButton, \"digital-twins-playground\");\n  });\n  let diagramTabButton = document.getElementById(\"diagram-tab-button\") as HTMLButtonElement;\n  diagramTabButton.addEventListener(\"click\", function (event) {\n    selectTab(diagramTabButton, \"diagram-playground\");\n  });\n  let codeTabButton = document.getElementById(\"code-tab-button\") as HTMLButtonElement;\n  codeTabButton.addEventListener(\"click\", function (event) {\n    selectTab(codeTabButton, \"code-playground\");\n  });\n\n  let workbenchContextMenu = new WorkbenchContextMenu();\n  workbenchContextMenu.render(\"workbench-context-menu-placeholder\");\n  contextMenus.workbench = workbenchContextMenu;\n\n  let raspberryPiContextMenu = new RaspberryPiContextMenu();\n  raspberryPiContextMenu.render(\"raspberry-pi-context-menu-placeholder\");\n  raspberryPiContextMenu.addListeners();\n  contextMenus.raspberryPi = raspberryPiContextMenu;\n\n  let rainbowHatContextMenu = new RainbowHatContextMenu();\n  rainbowHatContextMenu.render(\"rainbow-hat-context-menu-placeholder\");\n  rainbowHatContextMenu.addListeners();\n  contextMenus.rainbowHat = rainbowHatContextMenu;\n\n  let senseHatContextMenu = new SenseHatContextMenu();\n  senseHatContextMenu.render(\"sense-hat-context-menu-placeholder\");\n  senseHatContextMenu.addListeners();\n  contextMenus.senseHat = senseHatContextMenu;\n\n  let unicornHatContextMenu = new UnicornHatContextMenu();\n  unicornHatContextMenu.render(\"unicorn-hat-context-menu-placeholder\");\n  unicornHatContextMenu.addListeners();\n  contextMenus.unicornHat = unicornHatContextMenu;\n\n  let crickitHatContextMenu = new CrickitHatContextMenu();\n  crickitHatContextMenu.render(\"crickit-hat-context-menu-placeholder\");\n  crickitHatContextMenu.addListeners();\n  contextMenus.crickitHat = crickitHatContextMenu;\n\n  let panTiltHatContextMenu = new PanTiltHatContextMenu();\n  panTiltHatContextMenu.render(\"pan-tilt-hat-context-menu-placeholder\");\n  panTiltHatContextMenu.addListeners();\n  contextMenus.panTiltHat = panTiltHatContextMenu;\n\n  let capacitiveTouchHatContextMenu = new CapacitiveTouchHatContextMenu();\n  capacitiveTouchHatContextMenu.render(\"capacitive-touch-hat-context-menu-placeholder\");\n  capacitiveTouchHatContextMenu.addListeners();\n  contextMenus.capacitiveTouchHat = capacitiveTouchHatContextMenu;\n\n  let lineChartContextMenu = new LineChartContextMenu();\n  lineChartContextMenu.render(\"linechart-context-menu-placeholder\");\n  contextMenus.lineChart = lineChartContextMenu;\n\n  let colorPickerContextMenu = new ColorPickerContextMenu();\n  colorPickerContextMenu.render(\"colorpicker-context-menu-placeholder\");\n  contextMenus.colorPicker = colorPickerContextMenu;\n\n  let componentsPanel = new ComponentsPanel();\n  componentsPanel.render(\"digital-twins-playground-components-panel\");\n\n  // read locally stored properties\n  restoreMcus();\n  restoreHats();\n  // restoreLocation(system.temperatureGraph);\n  // restoreLocation(system.pressureGraph);\n  // restoreVisibility(system.temperatureGraph);\n  // restoreVisibility(system.pressureGraph);\n\n  resize();\n  draw();\n\n};\n\nfunction selectTab(button: HTMLButtonElement, tabId: string) {\n  // Get all elements with class=\"tabcontent\" and hide them\n  let tabcontent = document.getElementsByClassName(\"tabcontent\") as HTMLCollectionOf<HTMLElement>;\n  for (let i = 0; i < tabcontent.length; i++) {\n    (<HTMLElement>tabcontent[i]).style.display = \"none\";\n  }\n  // Get all elements with class=\"tablinks\" and remove the class \"active\"\n  let tablinks = document.getElementsByClassName(\"tablinks\") as HTMLCollectionOf<HTMLElement>;\n  for (let i = 0; i < tablinks.length; i++) {\n    tablinks[i].className = tablinks[i].className.replace(\" active\", \"\");\n  }\n  // Show the current tab, and add an \"active\" class to the button that opened the tab\n  document.getElementById(tabId).style.display = \"block\";\n  button.className += \" active\";\n}\n\nfunction restoreVisibility(g: LineChart) {\n  let x: string = localStorage.getItem(\"Visible: \" + g.getUid());\n  if (x != null) {\n    g.setVisible(\"true\" == x);\n    g.draw();\n  }\n}\n\nfunction restoreHats() {\n  let s: string = localStorage.getItem(\"HAT Sequence\");\n  if (s != null) {\n    let t = s.split(\",\");\n    if (t.length > 0) {\n      system.hats = [];\n    }\n    for (let i = 0; i < t.length; i++) {\n      t[i] = t[i].trim();\n      let name = t[i].substring(0, t[i].indexOf(\"#\") - 1);\n      system.addHat(name, 0, 0, t[i]);\n    }\n  }\n  restoreLocations(system.hats);\n  for (let i = 0; i < system.hats.length; i++) {\n    let id: string = localStorage.getItem(\"Attachment: \" + system.hats[i].getUid());\n    if (id != null) {\n      let pi = system.getRaspberryPiById(id);\n      if (pi) {\n        system.hats[i].attach(pi);\n      }\n    }\n  }\n  setTimeout(function () { // call this to refresh after inserting canvases\n    system.draw();\n  }, 100);\n}\n\nfunction restoreMcus() {\n  let s: string = localStorage.getItem(\"MCU Sequence\");\n  if (s != null) {\n    let t = s.split(\",\");\n    if (t.length > 0) {\n      system.mcus = [];\n    }\n    for (let i = 0; i < t.length; i++) {\n      t[i] = t[i].trim();\n      if (t[i].startsWith(\"Raspberry Pi\")) {\n        system.addRaspberryPi(0, 0, t[i]);\n      }\n    }\n  }\n  restoreLocations(system.mcus);\n  setTimeout(function () { // call this to refresh after inserting canvases\n    system.draw();\n  }, 0);\n}\n\nfunction restoreLocations(m: Movable[]) {\n  for (let i = 0; i < m.length; i++) {\n    restoreLocation(m[i]);\n  }\n}\n\nfunction restoreLocation(m: Movable) {\n  let x: string = localStorage.getItem(\"X: \" + m.getUid());\n  if (x != null) {\n    m.setX(parseInt(x));\n  }\n  let y: string = localStorage.getItem(\"Y: \" + m.getUid());\n  if (y != null) {\n    m.setY(parseInt(y));\n  }\n}\n\nwindow.onresize = function () {\n  resize();\n  draw();\n};\n\nfunction resize() {\n  let workbenchRect = system.workbench.canvas.getBoundingClientRect() as DOMRect;\n  system.workbench.canvas.width = window.innerWidth - 2 * workbenchRect.left - 4;\n  system.workbench.canvas.height = window.innerHeight - workbenchRect.top - 50;\n  let codespaceRect = code.codespace.canvas.getBoundingClientRect() as DOMRect;\n  code.codespace.canvas.width = window.innerWidth - 2 * workbenchRect.left - 4;\n  code.codespace.canvas.height = window.innerHeight - workbenchRect.top - 50;\n  let componentsScroller = document.getElementById(\"components-scroller\") as HTMLDivElement;\n  componentsScroller.style.height = system.workbench.canvas.height * 0.8 + \"px\";\n}\n\nfunction draw() {\n  system.draw();\n  code.draw();\n}\n","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var bundle = require('./bundle-url');\n\nfunction updateLink(link) {\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    link.remove();\n  };\n  newLink.href = link.href.split('?')[0] + '?' + Date.now();\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\n\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      if (bundle.getBaseURL(links[i].href) === bundle.getBundleURL()) {\n        updateLink(links[i]);\n      }\n    }\n\n    cssTimeout = null;\n  }, 50);\n}\n\nmodule.exports = reloadCSS;\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel]  Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel]   ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\"></span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}