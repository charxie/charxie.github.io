(window.webpackJsonp=window.webpackJsonp||[]).push([[0],Array(36).concat([function(e){e.exports=[{id:"20190724143458",filename:"pano-20190724143458-mx.png",coord:{lat:42.36000896,lng:-71.05425626},calibration:2.1959999999999638,neighborhood:"quincy"},{id:"20190724143833",filename:"pano-20190724143833-mx.png",coord:{lat:42.36000888,lng:-71.05416259},calibration:2.6039999999999637,neighborhood:"quincy"},{id:"20190724145944",filename:"pano-20190724145944-mx.png",coord:{lat:42.36014171,lng:-71.0525956},calibration:-2.368000000000113,neighborhood:"atlave"},{id:"20190724151238",filename:"pano-20190724151238-mx.png",coord:{lat:42.35946,lng:-71.05190878},calibration:-2.872000000000005,neighborhood:"atlave"},{id:"20190724151553",filename:"pano-20190724151553-mx.png",coord:{lat:42.35901057,lng:-71.05173236},calibration:-.5760000000000074,neighborhood:"atlave"},{id:"20190724150711",filename:"pano-20190724150711-mx.png",coord:{lat:42.35976055,lng:-71.05235965},calibration:-1.352814692820381,neighborhood:"atlave"},{id:"20190925112226",filename:"pano-20190925112226-mx.png",calibration:-2.9,neighborhood:["caa","cab"],coord:{lat:42.45954294,lng:-71.35375977}},{id:"20190925112242",filename:"pano-20190925112242-mx.png",calibration:-2.252,neighborhood:"cab",coord:{lat:42.45956467,lng:-71.35345682}},{id:"20190925113249",filename:"pano-20190925113249-mx.png",calibration:-2.98,neighborhood:"caa",coord:{lat:42.45957315,lng:-71.35418699}},{id:"20190925112410",filename:"pano-20190925112410-mx.png",calibration:-2.444,neighborhood:"caa",coord:{lat:42.45966985,lng:-71.35391209}},{id:"20190925111418",filename:"pano-20190925111418-mx.png",calibration:-2.82,neighborhood:"cdt",coord:{lat:42.45969867,lng:-71.35140942}},{id:"20190925112757",filename:"pano-20190925112757-mx.png",calibration:-2.17,neighborhood:"caa",coord:{lat:42.45996776,lng:-71.35447809}},{id:"20190925110216",filename:"pano-20190925110216-mx.png",calibration:-1.7,neighborhood:"cdt",coord:{lat:42.45950405,lng:-71.35144528}},{id:"20190925112004",filename:"pano-20190925112004-mx.png",calibration:-2.91,neighborhood:"cab",coord:{lat:42.45927407,lng:-71.35335518}},{id:"20190925113346",filename:"pano-20190925113346-mx.png",calibration:-2.14,neighborhood:"caa",coord:{lat:42.45954963,lng:-71.354371}},{id:"20190925110449",filename:"pano-20190925110449-mx.png",calibration:-1.35,neighborhood:"cdt",coord:{lat:42.45962005,lng:-71.35099675}},{id:"20190925112944",filename:"pano-20190925112944-mx.png",calibration:-2.15,neighborhood:"caa",coord:{lat:42.45980487,lng:-71.35493824}},{id:"20190925111251",filename:"pano-20190925111251-mx.png",calibration:-1.82,neighborhood:"cdt",coord:{lat:42.45976744,lng:-71.35109601}},{id:"20190925111017",filename:"pano-20190925111017-mx.png",calibration:-3.38,neighborhood:"cdt",coord:{lat:42.45994194,lng:-71.35046685}},{id:"20190925112929",filename:"pano-20190925112929-mx.png",calibration:-2.77,neighborhood:"caa",coord:{lat:42.45967437,lng:-71.35489279}},{id:"20190925110659",filename:"pano-20190925110659-mx.png",calibration:-2.86,neighborhood:"cdt",coord:{lat:42.45980818,lng:-71.35042955}},{id:"20190925112754",filename:"pano-20190925112754-mx.png",calibration:-3.01,neighborhood:"caa",coord:{lat:42.4598957,lng:-71.35475797}},{id:"20190925112418",filename:"pano-20190925112418-mx.png",calibration:-2.94,neighborhood:"caa",coord:{lat:42.45977151,lng:-71.35404583}},{id:"20190925111907",filename:"pano-20190925111907-mx.png",calibration:2.82,neighborhood:"cab",coord:{lat:42.4594054,lng:-71.35342462}},{id:"20190925111628",filename:"pano-20190925111628-mx.png",calibration:-3.05,neighborhood:"cdt",coord:{lat:42.45958235,lng:-71.35173774}},{id:"20190925113109",filename:"pano-20190925113109-mx.png",calibration:-2.95,neighborhood:"caa",coord:{lat:42.45951864,lng:-71.35461781}}]},,,,,,,,,,,,function(e,t,n){var a={"./pano-20190724143458-mx.png":121,"./pano-20190724143833-mx.png":122,"./pano-20190724145944-mx.png":123,"./pano-20190724150711-mx.png":124,"./pano-20190724151238-mx.png":125,"./pano-20190724151553-mx.png":126,"./pano-20190925110216-mx.png":127,"./pano-20190925110449-mx.png":128,"./pano-20190925110659-mx.png":129,"./pano-20190925111017-mx.png":130,"./pano-20190925111251-mx.png":131,"./pano-20190925111418-mx.png":132,"./pano-20190925111628-mx.png":133,"./pano-20190925111907-mx.png":134,"./pano-20190925112004-mx.png":135,"./pano-20190925112226-mx.png":136,"./pano-20190925112242-mx.png":137,"./pano-20190925112410-mx.png":138,"./pano-20190925112418-mx.png":139,"./pano-20190925112754-mx.png":140,"./pano-20190925112757-mx.png":141,"./pano-20190925112929-mx.png":142,"./pano-20190925112944-mx.png":143,"./pano-20190925113109-mx.png":144,"./pano-20190925113249-mx.png":145,"./pano-20190925113346-mx.png":146};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=o,e.exports=r,r.id=48},,,function(e){e.exports={quincy:{type:"linear",map:["20190724143458","20190724143833"]},cdt:{type:"irregular",map:{20190925111628:["20190925111418","20190925110216"],20190925110216:["20190925111628","20190925111418","20190925110449"],20190925111418:["20190925111628","20190925110216","20190925111251"],20190925111251:["20190925111418","20190925110449","20190925111017"],20190925110449:["20190925110216","20190925111251","20190925110659"],20190925110659:["20190925110449","20190925111017"],20190925111017:["20190925110659","20190925111251"]}},caa:{type:"circular",map:["20190925112410","20190925112226","20190925113249","20190925113346","20190925113109","20190925112929","20190925112944","20190925112754","20190925112757","20190925112418"]},cab:{type:"linear",map:["20190925112226","20190925112242","20190925111907","20190925112004"]},atlave:{type:"linear",map:["20190724151553","20190724151238","20190724150711","20190724145944"]}}},,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){e.exports=n(150)},,,,function(e,t,n){},,,,,,,,,,,,,,,,,,function(e,t,n){},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAALCAMAAACecocUAAAACXBIWXMAAAAcAAAAHAAPAbmPAAAAIVBMVEUAAABVnbVRnbVRnbVdpb2l4fpVnb1dqcFVnblVobmFyeFl3ybiAAAAC3RSTlMAtb18tGwapUy9gIWpoGAAAABESURBVHja7f3HAcQwDMMAkFSzvf/A8V2aMgRfENRWAJBG0XITBuXl4tiWc0XEmkyYfrgLGehxxgnVxaWP7/P9Tr/f/h6CtgH6SIBB6wAAAABJRU5ErkJggg=="},function(e,t,n){e.exports=n.p+"static/media/rotating.4957277e.png"},,,,,,,,,,,,,,,,,,,,,,function(e,t,n){e.exports=n.p+"static/media/pano-20190724143458-mx.072de3d6.png"},function(e,t,n){e.exports=n.p+"static/media/pano-20190724143833-mx.0732614b.png"},function(e,t,n){e.exports=n.p+"static/media/pano-20190724145944-mx.0c7531e1.png"},function(e,t,n){e.exports=n.p+"static/media/pano-20190724150711-mx.f67813cf.png"},function(e,t,n){e.exports=n.p+"static/media/pano-20190724151238-mx.3f9e7726.png"},function(e,t,n){e.exports=n.p+"static/media/pano-20190724151553-mx.c1e8bceb.png"},function(e,t,n){e.exports=n.p+"static/media/pano-20190925110216-mx.15966b2a.png"},function(e,t,n){e.exports=n.p+"static/media/pano-20190925110449-mx.5b18415f.png"},function(e,t,n){e.exports=n.p+"static/media/pano-20190925110659-mx.a9cd19bd.png"},function(e,t,n){e.exports=n.p+"static/media/pano-20190925111017-mx.d1eacec2.png"},function(e,t,n){e.exports=n.p+"static/media/pano-20190925111251-mx.3a2748ab.png"},function(e,t,n){e.exports=n.p+"static/media/pano-20190925111418-mx.80a5715d.png"},function(e,t,n){e.exports=n.p+"static/media/pano-20190925111628-mx.c890f6ed.png"},function(e,t,n){e.exports=n.p+"static/media/pano-20190925111907-mx.f5896ac6.png"},function(e,t,n){e.exports=n.p+"static/media/pano-20190925112004-mx.7f51a340.png"},function(e,t,n){e.exports=n.p+"static/media/pano-20190925112226-mx.a1e5bd11.png"},function(e,t,n){e.exports=n.p+"static/media/pano-20190925112242-mx.4589189c.png"},function(e,t,n){e.exports=n.p+"static/media/pano-20190925112410-mx.5e375cce.png"},function(e,t,n){e.exports=n.p+"static/media/pano-20190925112418-mx.f8ad88bb.png"},function(e,t,n){e.exports=n.p+"static/media/pano-20190925112754-mx.e2a0bfca.png"},function(e,t,n){e.exports=n.p+"static/media/pano-20190925112757-mx.702d7268.png"},function(e,t,n){e.exports=n.p+"static/media/pano-20190925112929-mx.dad914bf.png"},function(e,t,n){e.exports=n.p+"static/media/pano-20190925112944-mx.fdd79d67.png"},function(e,t,n){e.exports=n.p+"static/media/pano-20190925113109-mx.1c1e94e1.png"},function(e,t,n){e.exports=n.p+"static/media/pano-20190925113249-mx.798912fc.png"},function(e,t,n){e.exports=n.p+"static/media/pano-20190925113346-mx.0775a445.png"},,,function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(20),i=n.n(o),c=(n(79),n(6)),s=n(7),l=n(23),p=n(21),u=n(31),d=n(22),m=n(30),h=n(24),g=n(11),f=n(12);function b(){var e=Object(g.a)(["\n\tflex: 1;\n\tpadding: 2px;\n\tpadding-top: ","px;\n"]);return b=function(){return e},e}function v(){var e=Object(g.a)(["\n\tposition: fixed;\n\tz-index: 999;\n\ttop: 10px;\n\tright: 10px;\n\tpadding: 12px;\n\theight: 20px;\n\tdisplay: flex;\n\tjustify-content: flex-start;\n\talign-items: center;\n\tbackground-color: #f8f8f8;\n    box-shadow: 2px 2px gray;\n\n\t& .ir-nav-item {\n\t\tmargin-right: 0.5rem;\n\t\tmargin-left: 0.5rem;\n\t\ttext-decoration: none;\n\t\tcolor: rgba(0, 0, 0, 0.5);\n\t}\n\n\t& .ir-nav-item__active {\n\t\tcolor: #000000;\n\t}\n"]);return v=function(){return e},e}function y(){var e=Object(g.a)(["\n\twidth: 100vw;\n\theight: 100vh;\n\tdisplay: flex;\n\tflex-direction: column;\n"]);return y=function(){return e},e}var x=f.a.div(y()),w=f.a.div(v()),O=f.a.div(b(),2),k=n(3),j=n.n(k),A=n(8),M=n(18),P=n(36),S=n(51);function E(e,t,n){if(!n)for(var a=0;a<e.length;a++){var r=[],o=!0,i=!1,c=void 0;try{for(var s,l=t[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var p=s.value;r.push(e[a][p])}}catch(v){i=!0,c=v}finally{try{o||null==l.return||l.return()}finally{if(i)throw c}}return r}for(a=0;a<e.length;a++)if(e[a].id===n){if(0===t.length)return e[a];var u={},d=!0,m=!1,h=void 0;try{for(var g,f=t[Symbol.iterator]();!(d=(g=f.next()).done);d=!0){var b=g.value;u[b]=e[a][b]}}catch(v){m=!0,h=v}finally{try{d||null==f.return||f.return()}finally{if(m)throw h}}return u}}function C(e,t){if(Array.isArray(t)){var n=[],a=!0,r=!1,o=void 0;try{for(var i,c=t[Symbol.iterator]();!(a=(i=c.next()).done);a=!0){var s=i.value,l=L(e,S[s]);Array.prototype.push.apply(n,l)}}catch(p){r=!0,o=p}finally{try{a||null==c.return||c.return()}finally{if(r)throw o}}return n}return L(e,S[t])}function L(e,t){if(t.map.length<2)return[];switch(t.type){case"linear":for(var n=0;n<t.map.length;n++)if(e===t.map[n])return 0===n?[t.map[1]]:n===t.map.length-1?[t.map[t.map.length-2]]:[t.map[n-1],t.map[n+1]];break;case"circular":for(n=0;n<t.map.length;n++)if(e===t.map[n])return 0===n?[t.map[1],t.map[t.map.length-1]]:n===t.map.length-1?[t.map[t.map.length-2],t.map[0]]:[t.map[n-1],t.map[n+1]];break;case"irregular":return t.map[e]}}var B={getPanoFileNameById:function(e){return Promise.resolve({data:{data:E(P,["filename"],e)}})},getPanoCoordById:function(e){return Promise.resolve({data:{data:E(P,["coord"],e)}})},getAllPanoIdAndCoord:function(){return Promise.resolve({data:{data:P}})},getPanoAllAttrById:function(e){return Promise.resolve({data:{data:E(P,[],e)}})},getNeighborsById:function(e,t){return Promise.resolve({data:{data:C(e,t)}})}};function I(){var e=Object(g.a)(["\n\twidth: 100%;\n\theight: 100%;\n\n\t& > div {\n\t\twidth: 100%;\n\t\theight: 100%;\n\t}\n"]);return I=function(){return e},e}function V(){var e=Object(g.a)(["\n\twidth: 100%;\n\theight: 100%;\n\tposition: relative !important;\n"]);return V=function(){return e},e}var z,R,T,N,Y,D,F=Object(f.a)(M.Map)(V()),U=f.a.div(I()),G={boston:{lat:42.36,lng:-71.053},concord:{lat:42.45955,lng:-71.3525}},W=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(p.a)(t).call(this,e))).bounds=new n.props.google.maps.LatLngBounds,n.state={showComp:!1},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;(function(){var t=Object(A.a)(j.a.mark(function t(){return j.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,B.getAllPanoIdAndCoord().then(function(t){for(var n=[],a=t.data.data,r=0;r<a.length;r++)n.push({id:a[r].id,lat:a[r].coord.lat,lng:a[r].coord.lng});e.setState({coords:n,showComp:!0})});case 2:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}})()()}},{key:"showComponent",value:function(e){!0!==e&&!1!==e||this.setState({showComp:e})}},{key:"setBounds",value:function(){for(var e=0;e<this.state.coords.length;e++){var t=this.state.coords[e];this.bounds.extend(new this.props.google.maps.LatLng({lat:t.lat,lng:t.lng}))}}},{key:"addMarkers",value:function(){var e=this;return this.setBounds(),this.state.coords.map(function(t,n){return r.a.createElement(M.Marker,{lid:t.id,position:{lat:t.lat,lng:t.lng},onClick:function(t){return e.showComponent(!1),e.gotoPano(t.lid)},key:t.id})})}},{key:"gotoPano",value:function(e){this.props.history.push("/viewPano/".concat(e))}},{key:"render",value:function(){return this.state.showComp?r.a.createElement(F,{ref:this.props.onMapMounted,google:this.props.google,zoom:18,center:G[this.props.match.params.region],initialCenter:G[this.props.match.params.region],bounds:this.bounds},this.addMarkers()):null}}]),t}(a.Component),X=Object(M.GoogleApiWrapper)({apiKey:"".concat("AIzaSyAwmnfBgRgSFnydLrrkAJ2gYBfarvA7Fu4")})(Object(h.g)(W)),H=function(e){return r.a.createElement(U,null,r.a.createElement(X,e))},J=n(26),_=n(27),q=(n(57),n(19)),Q=n(1),K=n(43),Z=n(69),$=(n(97),n(2)),ee=n(72);function te(){var e=Object(g.a)(["\n\twidth: 100%;\n\theight: 100%;\n\n\t& > div {\n\t\twidth: 100%;\n\t\theight: 100%;\n\t}\n"]);return te=function(){return e},e}function ne(){var e=Object(g.a)(["\n\twidth: 100% !important;\n\theight: 100% !important;\n\tposition: relative !important;\n"]);return ne=function(){return e},e}var ae,re=Object(f.a)(M.Map)(ne()),oe=f.a.div(te()),ie=function(){(ae=document.getElementsByClassName("Minimap")[0]).addEventListener("mouseover",function(e){return function(e){e.preventDefault(),ae.style.width="250px",ae.style.height="200px"}(e)},!1),ae.addEventListener("mouseout",function(e){return function(e){e.preventDefault(),ae.style.width="200px",ae.style.height="100px"}(e)},!1)};var ce=(z=function(){function e(t,n,a,r){Object(c.a)(this,e),Object(J.a)(this,"lng",R,this),Object(J.a)(this,"lat",T,this),Object(J.a)(this,"id",N,this),Object(J.a)(this,"pmanOffsetY",Y,this),this.lng=n,this.lat=t,this.id=r,this.pmanOffsetY=this.setPegmanRotationOffsetYFromCameraY(a)}return Object(s.a)(e,[{key:"updateValues",value:function(e,t,n,a){this.lng=t,this.lat=e,this.id=a,this.pmanOffsetY=this.setPegmanRotationOffsetYFromCameraY(n)}},{key:"updatePegmanOffset",value:function(e){this.pmanOffsetY=this.setPegmanRotationOffsetYFromCameraY(e)}},{key:"setPegmanRotationOffsetYFromCameraY",value:function(e){var t=Math.ceil(180*-e/Math.PI);return t<0&&(t=360+t),9+60*Math.floor(t/22.5)}}]),e}(),R=Object(_.a)(z.prototype,"lng",[$.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=Object(_.a)(z.prototype,"lat",[$.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=Object(_.a)(z.prototype,"id",[$.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y=Object(_.a)(z.prototype,"pmanOffsetY",[$.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z),se=Object(ee.a)(D=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(p.a)(t).call(this,e))).panoStore=void 0,a.mStore=void 0,a.bounds=new a.props.google.maps.LatLngBounds,a.dotIcon={url:n(98),size:new a.props.google.maps.Size(11,11),origin:new a.props.google.maps.Point(0,0),anchor:new a.props.google.maps.Point(5.5,5.5)},a.pman=void 0,a.state={showComp:!1,mapStore:a.props.mapStore},a.mStore=a.props.mapStore,a.panoStore=a.props.panoStore,a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;(function(){var t=Object(A.a)(j.a.mark(function t(){return j.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,B.getAllPanoIdAndCoord().then(function(t){for(var n=[],a=t.data.data,r=0;r<a.length;r++)n.push({id:a[r].id,lat:a[r].coord.lat,lng:a[r].coord.lng});e.setState({coords:n,showComp:!0})});case 2:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}})()()}},{key:"showComponent",value:function(e){!0!==e&&!1!==e||this.setState({showComp:e})}},{key:"setBounds",value:function(){for(var e=0;e<this.state.coords.length;e++){var t=this.state.coords[e];this.bounds.extend(new this.props.google.maps.LatLng({lat:t.lat,lng:t.lng}))}}},{key:"addPegman",value:function(){var e=new this.props.google.maps.Point(8,9);this.mStore.pmanOffsetY&&(e=new this.props.google.maps.Point(8,this.mStore.pmanOffsetY));var t={url:n(99),size:new this.props.google.maps.Size(44,49),origin:e,anchor:new this.props.google.maps.Point(22,34)};return this.pman=r.a.createElement(M.Marker,{lid:this.mStore.id,position:{lat:this.mStore.lat,lng:this.mStore.lng},icon:t,key:this.mStore.id}),this.pman}},{key:"addMarkers",value:function(){var e,t=this;this.setBounds();var n=0;return this.state.coords.map(function(a,o){if(t.state.coords[o].id!==t.mStore.id)return e=t.dotIcon,n++,r.a.createElement(M.Marker,{lid:a.id,position:{lat:a.lat,lng:a.lng},onClick:function(e){return t.gotoPano(e.lid)},icon:e,key:a.id,zIndex:n})})}},{key:"renderCompass",value:function(){}},{key:"gotoPano",value:function(e){this.panoStore.id=e}},{key:"render",value:function(){return this.state.showComp?r.a.createElement(r.a.Fragment,null,r.a.createElement(re,{ref:this.props.onMapMounted,google:this.props.google,zoom:17,center:{lat:this.mStore.lat,lng:this.mStore.lng},initialCenter:{lat:this.mStore.lat,lng:this.mStore.lng},bounds:this.bounds,onReady:ie,streetViewControl:!1,fullscreenControl:!1,mapTypeControl:!1,rotateControl:!1},this.addMarkers(),this.addPegman()),this.renderCompass()):null}}]),t}(a.Component))||D,le=Object(M.GoogleApiWrapper)({apiKey:"".concat("AIzaSyAwmnfBgRgSFnydLrrkAJ2gYBfarvA7Fu4")})(Object(h.g)(se)),pe=function(e){return r.a.createElement(oe,null,r.a.createElement(le,e))},ue=n(54),de=function(){function e(t){var n=this;Object(c.a)(this,e),this.coord={lat:0,lng:0},this.calibration=0,this.id=void 0,this.fname="",this.neighborhood="",this.neighborArr=void 0,this.cameraY=void 0,this.setAllAttr=Object(A.a)(j.a.mark(function e(){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.getPanoAllAttrById(n.id).then(function(e){n.fname=e.data.data.filename,n.coord.lat=e.data.data.coord.lat,n.coord.lng=e.data.data.coord.lng,n.calibration=e.data.data.calibration,n.neighborhood=e.data.data.neighborhood});case 2:case"end":return e.stop()}},e)})),this.getNeighborIds=Object(A.a)(j.a.mark(function e(){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.getNeighborsById(n.id,n.neighborhood).then(function(e){n.neighborArr=e.data.data});case 2:case"end":return e.stop()}},e)})),this.updateCalibration=function(){var e=Object(A.a)(j.a.mark(function e(t){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:({calibration:-t.rotation.y}),alert("Update Calibration is disabled at this moment!");case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),this.id=t}return Object(s.a)(e,[{key:"getDistanceTo",value:function(e){return ue.getDistance(this.coord,e.coord)}},{key:"getDistanceToNeighbors",value:function(e){return e.map(this.getDistanceTo)}},{key:"getBearingTo",value:function(e){return ue.getRhumbLineBearing(this.coord,e.coord)}},{key:"getBearingToNeighbors",value:function(e){return e.map(this.getBearingTo)}}]),e}(),me=function(){function e(){Object(c.a)(this,e),this.mesh=void 0,this.material=void 0,this.geometry=void 0,this.id=void 0,this.geometry=new Q.Geometry,this.geometry.vertices.push(new Q.Vector3(0,0,0),new Q.Vector3(1.5,-2,0),new Q.Vector3(1.5,-.5,0),new Q.Vector3(0,1.5,0),new Q.Vector3(-1.5,-.5,0),new Q.Vector3(-1.5,-2,0)),this.geometry.faces.push(new Q.Face3(0,1,2),new Q.Face3(0,2,3),new Q.Face3(4,0,3),new Q.Face3(5,0,4)),this.material=new Q.MeshBasicMaterial({color:"white"}),this.mesh=new Q.Mesh(this.geometry,this.material)}return Object(s.a)(e,[{key:"onClickHandler",value:function(){}}]),e}();function he(){var e=Object(g.a)(["\n\t&,\n\t&:after {\n\t\tborder-radius: 50%;\n\t\twidth: ","px;\n\t\theight: ","px;\n\t}\n\t& {\n\t\tmargin: 60px auto;\n\t\tfont-size: 10px;\n\t\tposition: relative;\n\t\ttext-indent: -9999em;\n\t\tborder-top: 1.1em solid rgba(0, 0, 0, 0.1);\n\t\tborder-right: 1.1em solid rgba(0, 0, 0, 0.1);\n\t\tborder-bottom: 1.1em solid rgba(0, 0, 0, 0.1);\n\t\tborder-left: 1.1em solid ",";\n\t\t-webkit-transform: translateZ(0);\n\t\t-ms-transform: translateZ(0);\n\t\ttransform: translateZ(0);\n\t\t-webkit-animation: load8 1.1s infinite linear;\n\t\tanimation: load8 1.1s infinite linear;\n\t}\n\t@-webkit-keyframes load8 {\n\t\t0% {\n\t\t\t-webkit-transform: rotate(0deg);\n\t\t\ttransform: rotate(0deg);\n\t\t}\n\t\t100% {\n\t\t\t-webkit-transform: rotate(360deg);\n\t\t\ttransform: rotate(360deg);\n\t\t}\n\t}\n\t@keyframes load8 {\n\t\t0% {\n\t\t\t-webkit-transform: rotate(0deg);\n\t\t\ttransform: rotate(0deg);\n\t\t}\n\t\t100% {\n\t\t\t-webkit-transform: rotate(360deg);\n\t\t\ttransform: rotate(360deg);\n\t\t}\n\t}\n"]);return he=function(){return e},e}var ge,fe,be=f.a.div(he(),function(e){var t=e.width;return void 0===t?"48":t},function(e){var t=e.width;return void 0===t?"48":t},function(e){var t=e.color;return void 0===t?"#ea6c2f":t}),ve=n(120),ye=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(p.a)(t).call(this,e))).currLoc=void 0,a.neighbors=void 0,a.mapStore=void 0,a.panoStore=void 0,a.panoIdChangeReaction=void 0,a.cylindergeometry=new Q.CylinderBufferGeometry(20,20,15,100,1,!0),a.cylindermaterial=void 0,a.cylindermesh=void 0,a.texture=void 0,a.loader=new Q.TextureLoader,a.lines=[],a.tempcylindergeometry=new Q.CylinderBufferGeometry(21,21,15,100,1,!0),a.tempcylindermaterial=void 0,a.tempcylindermesh=void 0,a.threeCamera=void 0,a.threeScene=void 0,a.cone0=void 0,a.cone1=void 0,a.cone2=void 0,a.pinSphereGeometry=new Q.SphereGeometry(.5,16,16),a.pinNeedleGeometry=new Q.CylinderGeometry(.075,.025,3,10,1,!1),a.pin0=void 0,a.pin1=void 0,a.pin2=void 0,a.n0=void 0,a.n1=void 0,a.n2=void 0,a.mouseSelectedArrowMesh=void 0,a.teleportToScene=function(){var e=Object(A.a)(j.a.mark(function e(t){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.currLoc=new de(t),e.next=3,a.currLoc.setAllAttr().then(function(){a.texture=a.loader.load(n(48)("./".concat(a.currLoc.fname)),function(){a.tempcylindermaterial=new Q.MeshBasicMaterial({map:a.texture,side:Q.DoubleSide}),a.tempcylindermesh=new Q.Mesh(a.tempcylindergeometry,a.tempcylindermaterial),a.tempcylindergeometry.scale(-1,1,1),a.tempcylindermesh.rotation.y=a.currLoc.calibration,a.threeScene.add(a.tempcylindermesh),a.animateTeleportationTextureFade();var e=a.currLoc,t=e.coord,n=e.cameraY,r=e.id;a.mapStore.updateValues(t.lat,t.lng,n,r)},void 0,function(e){console.error(e)})});case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.animateTeleportationTextureFade=function(){var e={at:a.cylindermaterial.opacity},t=new ve.Tween(e).to({at:.1},500).easing(ve.Easing.Quadratic.InOut);t.onUpdate(function(){a.cylindermaterial.opacity=e.at}),t.onComplete(Object(A.a)(j.a.mark(function e(){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.threeCamera.rotation.y=0,a.threeCamera.fov=40,a.threeCamera.updateProjectionMatrix(),a.cylindermaterial.map=a.texture,a.cylindermesh.rotation.y=a.currLoc.calibration,a.cylindermaterial.transparent=!1,a.cylindermaterial.opacity=1,a.threeScene.remove(a.tempcylindermesh),a.tempcylindermesh.geometry.dispose(),a.tempcylindermesh.material.dispose(),a.tempcylindermesh=void 0,a.tempcylindergeometry.scale(-1,1,1),e.next=14,a.setNeighbors().then(a.RenderArrows);case 14:case"end":return e.stop()}},e)}))),a.cylindermaterial.transparent=!0,t.start()},a.RenderArrows=function(){var e=a.neighbors.keys();a.n0=a.neighbors.get(e.next().value),console.log(a.currLoc.id);a.cone0.position.z=-7.5*Math.cos(a.n0.bearing*Math.PI/180),a.cone0.position.x=7.5*Math.sin(a.n0.bearing*Math.PI/180),a.cone0.rotation.x=-1.5708,a.cone0.rotation.z=-a.n0.bearing*Math.PI/180,a.cone1.visible=!1,a.cone2.visible=!1,a.neighbors.size>1&&(a.n1=a.neighbors.get(e.next().value),a.cone1.visible=!0,a.cone1.position.z=-7.5*Math.cos(a.n1.bearing*Math.PI/180),a.cone1.position.x=7.5*Math.sin(a.n1.bearing*Math.PI/180),a.cone1.rotation.x=-1.5708,a.cone1.rotation.z=-a.n1.bearing*Math.PI/180),3===a.neighbors.size&&(a.n2=a.neighbors.get(e.next().value),a.cone2.visible=!0,a.cone2.position.z=-7.5*Math.cos(a.n2.bearing*Math.PI/180),a.cone2.position.x=7.5*Math.sin(a.n2.bearing*Math.PI/180),a.cone2.rotation.x=-1.5708,a.cone2.rotation.z=-a.n2.bearing*Math.PI/180)},a.state={isLoading:!0},a.RenderPano=a.RenderPano.bind(Object(u.a)(a)),a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(Z.disableBodyScroll)(document.querySelector("#interface")),function(){var t=Object(A.a)(j.a.mark(function t(){return j.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.currLoc=new de(e.panoId),t.next=3,e.currLoc.setAllAttr().then(function(){e.loadTexture()});case 3:e.neighbors=new Map,e.setNeighbors();case 5:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()()}},{key:"setNeighbors",value:function(){var e=Object(A.a)(j.a.mark(function e(){var t,n,a,r,o,i,c,s=this;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.neighbors.clear(),e.next=3,this.currLoc.getNeighborIds();case 3:if(0!==(t=this.currLoc.neighborArr).length){e.next=9;break}return console.log("No neighbors discorvered..."),e.abrupt("return");case 9:n=!0,a=!1,r=void 0,e.prev=12,o=j.a.mark(function e(){var t,n;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.value,n=new de(t),e.next=4,n.setAllAttr().then(function(){s.addNeighbor(n)});case 4:case"end":return e.stop()}},e)}),i=t[Symbol.iterator]();case 15:if(n=(c=i.next()).done){e.next=20;break}return e.delegateYield(o(),"t0",17);case 17:n=!0,e.next=15;break;case 20:e.next=26;break;case 22:e.prev=22,e.t1=e.catch(12),a=!0,r=e.t1;case 26:e.prev=26,e.prev=27,n||null==i.return||i.return();case 29:if(e.prev=29,!a){e.next=32;break}throw r;case 32:return e.finish(29);case 33:return e.finish(26);case 34:case"end":return e.stop()}},e,this,[[12,22,26,34],[27,,29,33]])}));return function(){return e.apply(this,arguments)}}()},{key:"addNeighbor",value:function(e){this.neighbors.set(e.id,{location:e,distance:this.currLoc.getDistanceTo(e),bearing:this.currLoc.getBearingTo(e)})}},{key:"loadTexture",value:function(){var e=this;this.texture=this.loader.load(n(48)("./".concat(this.currLoc.fname)),function(){e.mapStore=new ce(e.currLoc.coord.lat,e.currLoc.coord.lng,0,e.currLoc.id),e.panoStore=new xe(e.currLoc.id),e.panoIdChangeReaction=Object($.l)(function(){return e.panoStore.id},function(t,n){e.teleportToScene(t)}),e.setState({isLoading:!1})},void 0,function(e){console.error(e)}),this.cylindermaterial=new Q.MeshBasicMaterial({map:this.texture,side:Q.DoubleSide}),this.cylindermesh=new Q.Mesh(this.cylindergeometry,this.cylindermaterial),this.cylindergeometry.scale(-1,1,1),this.cylindermesh.rotation.y=this.currLoc.calibration}},{key:"CameraLookNorth",value:function(e){var t=this,n={at:e.rotation.y},a=new ve.Tween(n).to({at:0},750).easing(ve.Easing.Quadratic.InOut);a.onUpdate(function(){e.rotation.y=n.at}),a.onComplete(function(){e.rotation.y=0,t.mapStore.updatePegmanOffset(0)}),a.start()}},{key:"RenderPano",value:function(){var e=this,t=Object(K.c)(),o=t.gl,i=t.camera,c=t.scene,s=t.canvas,l=t.raycaster;this.threeCamera=i,this.threeScene=c,i.fov=40,o.setSize(s.clientWidth,s.clientHeight),i.position.set(0,0,.01),i.lookAt(0,0,0);var p=new me,u=Object(a.useRef)(),d=Object(a.useRef)(),m=Object(a.useRef)(),h=Object(a.useRef)();this.cone0=u.current,this.cone1=d.current,this.cone2=m.current;var g={x:0,y:0},f=new me,b=Object(a.useRef)(),v=!1,y=[],x=new Q.PlaneGeometry(40,40),w=new Q.MeshBasicMaterial({color:"grey",side:Q.DoubleSide,opacity:0,transparent:!0}),O=new Q.Mesh(x,w);if(O.rotation.set(-1.5708,0,0),O.position.set(0,-1,0),c.add(O),u.current&&d.current&&m.current&&h.current&&(y.push(u.current),y.push(d.current),y.push(m.current),y.push(h.current),y.push(O)),Object(a.useRef)().current){this.cone0.geometry.computeBoundingSphere();var k=this.cone0.geometry.boundingSphere.center,M=new Q.Vector3(k.x,k.y,k.z);V.current.localToWorld(M)}var P=function(e){b.current.children[1].geometry.computeBoundingSphere();var t=b.current.children[1].geometry.boundingSphere.center,n=new Q.Vector3(t.x,t.y,t.z);b.current.localToWorld(n),e.geometry.computeBoundingSphere();var a=e.geometry.boundingSphere.center,r=new Q.Vector3(a.x,a.y,a.z);return e.localToWorld(r),n.distanceTo(r)},S=!1,E=0;var C=0;var L=function(t){v=!0,i.rotation.y+=t/1e3,i.rotation.y%=2*Math.PI,e.mapStore.updatePegmanOffset(i.rotation.y)};window.addEventListener("mousemove",function(e){if(b.current){e.preventDefault(),g.x=e.clientX/window.innerWidth*2-1,g.y=-e.clientY/window.innerHeight*2+1,l.setFromCamera(g,i);var t=l.intersectObjects(y);if(t.length>0){var n=t[0];1===t.length?(b.current.visible=!0,b.current.position.copy(n.point).add(new Q.Vector3(0,.01,0))):b.current.visible=!1}}},!1),s.addEventListener("mousemove",function(e){return function(e){if(S){e.preventDefault();var t=e.clientX-E;e.clientY,E=e.clientX,e.clientY,L(t)}}(e)},!1),s.addEventListener("mousedown",function(e){return(t=e).preventDefault(),S=!0,E=t.clientX,void t.clientY;var t},!1),s.addEventListener("mouseup",function(e){return e.preventDefault(),S=!1,void(v=!1)},!1),s.addEventListener("mousewheel",function(e){return function(e){if(e.path[0]===s){var t=e.wheelDeltaY/3;L(t)}}(e)},!1),s.addEventListener("touchmove",function(e){return function(e){var t=e.targetTouches[0].pageX-C;C=e.targetTouches[0].pageX,L(t)}(e)},!1),s.addEventListener("touchstart",function(e){C=e.targetTouches[0].pageX},!1),window.addEventListener("resize",function(){o.setSize(s.clientWidth,s.clientHeight),i.aspect=s.clientWidth/s.clientHeight,i.updateProjectionMatrix()},!1);var B=function(t){b.current.visible=!1,!0;var n=e.neighbors.get(t).bearing*Math.PI/180,a=-e.neighbors.get(t).bearing*Math.PI/180;i.rotation.y>0&&(a=2*Math.PI-e.neighbors.get(t).bearing*Math.PI/180),i.rotation.y-a>=Math.PI&&i.rotation.y-a<2*Math.PI?a+=2*Math.PI:i.rotation.y-a<=-Math.PI&&i.rotation.y-a<-2*Math.PI&&(a=-2*Math.PI+a);var r={at:i.rotation.y},o={at:a},s=new ve.Tween(r).to(o,500).easing(ve.Easing.Quadratic.InOut);s.onUpdate(function(){i.rotation.y=r.at}),s.onComplete(function(){i.rotation.y=-e.neighbors.get(t).bearing*Math.PI/180,e.mapStore.updatePegmanOffset(i.rotation.y)});var l={zVal:i.position.z,xVal:i.position.x,fovValue:i.fov,opacity:e.cylindermaterial.opacity},p={zVal:-13*Math.cos(n),xVal:13*Math.sin(n),fovValue:65,opacity:.1},u=new ve.Tween(l).to(p,500);u.onUpdate(function(){i.position.z=l.zVal,i.position.x=l.xVal,i.fov=l.fovValue,i.updateProjectionMatrix(),e.cylindermaterial.opacity=l.opacity}),u.onComplete(Object(A.a)(j.a.mark(function t(){return j.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i.position.set(0,0,0),i.fov=40,i.updateProjectionMatrix(),e.cylindermaterial.map=e.texture,e.cylindermesh.rotation.y=e.currLoc.calibration,e.cylindermaterial.transparent=!1,e.cylindermaterial.opacity=1,c.remove(e.tempcylindermesh),e.tempcylindermesh.geometry.dispose(),e.tempcylindermesh.material.dispose(),e.tempcylindermesh=void 0,e.tempcylindergeometry.scale(-1,1,1),!1,b.current.visible=!0,t.next=16,e.setNeighbors().then(e.RenderArrows);case 16:case"end":return t.stop()}},t)}))),s.chain(u),e.cylindermaterial.transparent=!0,s.start()};c.add(this.cylindermesh);var I=function(){var t=Object(A.a)(j.a.mark(function t(a){return j.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.currLoc=e.neighbors.get(a).location,e.texture=e.loader.load(n(48)("./".concat(e.currLoc.fname)),function(){e.tempcylindermaterial=new Q.MeshBasicMaterial({map:e.texture,side:Q.DoubleSide}),e.tempcylindermesh=new Q.Mesh(e.tempcylindergeometry,e.tempcylindermaterial),e.tempcylindergeometry.scale(-1,1,1),e.tempcylindermesh.rotation.y=e.currLoc.calibration,c.add(e.tempcylindermesh),B(a);var t=e.currLoc,n=t.coord,r=t.cameraY,o=t.id;e.mapStore.updateValues(n.lat,n.lng,r,o)},void 0,function(e){console.error(e)});case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}();u.current&&d.current&&m.current&&this.RenderArrows();var V=Object(a.useRef)(),z=Object(a.useRef)(),R=Object(a.useRef)(),T=[new Q.Vector3(0,1,0),new Q.Vector3(-.6,-1,0),new Q.Vector3(0,-.5,0),new Q.Vector3(.6,-1,0)];function N(e,t){var n=!0,a=!1,r=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){o.value.material.opacity=t}}catch(c){a=!0,r=c}finally{try{n||null==i.return||i.return()}finally{if(a)throw r}}}R.current&&(R.current.vertices=T,R.current.faces.push(new Q.Face3(0,1,2)),R.current.faces.push(new Q.Face3(0,2,3)),R.current.computeFaceNormals(),R.current.scale(.3,.3,.3));var Y=Object(a.useRef)();return Y.current&&Y.current.geometry.scale(2,2,2),Object(K.b)(function(){ve.update(),V.current.position.set(-3*Math.sin(i.rotation.y),-.9,-3*Math.cos(i.rotation.y)),z.current.position.set(-3*Math.sin(i.rotation.y-.4),-.8,-3*Math.cos(i.rotation.y-.4)),z.current.rotation.y=i.rotation.y,z.current.rotation.z=-i.rotation.y,function(){if(b.current){for(var t=[e.cone0,e.cone1,e.cone2],n=new Map,a=0,r=t;a<r.length;a++){var o=r[a];o.visible&&n.set(P(o),o)}var i=Math.min.apply(Math,Object(q.a)(n.keys()));b.current.rotation.z=n.get(i).rotation.z,e.mouseSelectedArrowMesh=n.get(i)}}()}),r.a.createElement(r.a.Fragment,null,r.a.createElement("group",{ref:V,scale:[.2,.2,.2]},r.a.createElement("mesh",{userData:{neighbor:0},onClick:function(){I(e.n0.location.id)},onPointerOver:function(e){e.object.material.opacity=.9},onPointerOut:function(e){e.object.material.opacity=.65},ref:u,geometry:p.geometry},r.a.createElement("meshBasicMaterial",{attach:"material",color:"white",opacity:.5,transparent:!0})),r.a.createElement("mesh",{userData:{neighbor:1},onClick:function(){I(e.n1.location.id)},onPointerOver:function(e){e.object.material.opacity=.9},onPointerOut:function(e){e.object.material.opacity=.65},ref:d,geometry:p.geometry},r.a.createElement("meshBasicMaterial",{attach:"material",color:"white",opacity:.5,transparent:!0})),r.a.createElement("mesh",{userData:{neighbor:2},onClick:function(){I(e.n2.location.id)},onPointerOver:function(e){e.object.material.opacity=.9},onPointerOut:function(e){e.object.material.opacity=.65},ref:m,geometry:p.geometry},r.a.createElement("meshBasicMaterial",{attach:"material",color:"white",opacity:.5,transparent:!0}))),r.a.createElement("group",{onPointerOver:function(e){N(e.object.children,.8)},onPointerOut:function(e){N(e.object.children,.5)},ref:z,position:[0,0,-3],scale:[.3,.3,.3]},r.a.createElement("mesh",{onClick:function(){return e.CameraLookNorth(i)},geometry:new Q.CircleGeometry(.4,100,0),ref:h},r.a.createElement("meshBasicMaterial",{attach:"material",color:"white",opacity:.5,transparent:!0})),r.a.createElement("mesh",{position:[0,.03,.01]},r.a.createElement("geometry",{attach:"geometry",ref:R}),r.a.createElement("meshBasicMaterial",{attach:"material",color:"red",opacity:.5,transparent:!0}))),r.a.createElement("group",{ref:b,rotation:[-1.5708,0,0],onPointerUp:function(){v||function(){var t=[e.n0,e.n1,e.n2][e.mouseSelectedArrowMesh.userData.neighbor].location.id;I(t)}()}},r.a.createElement("mesh",{geometry:f.geometry,position:[0,.05,.001],scale:[.2,.12,.2]},r.a.createElement("meshBasicMaterial",{attach:"material",color:"grey",opacity:.7,transparent:!0})),r.a.createElement("mesh",{geometry:new Q.CircleGeometry(.4,100,0)},r.a.createElement("meshBasicMaterial",{attach:"material",color:"white",opacity:.7,transparent:!0}))))}},{key:"render",value:function(){return this.state.isLoading?r.a.createElement("div",{className:"spinner-container"},r.a.createElement(be,{width:100,height:100})):r.a.createElement("div",{className:"Pano-container"},r.a.createElement("div",{className:"Pano-canvas"},r.a.createElement(K.a,null,r.a.createElement(this.RenderPano,null))),r.a.createElement("div",{className:"Minimap"},r.a.createElement(pe,{mapStore:this.mapStore,panoStore:this.panoStore})))}},{key:"panoId",get:function(){return this.props.match.params.id||"20190724143833"}}]),t}(a.Component),xe=(ge=function(){function e(t){Object(c.a)(this,e),Object(J.a)(this,"id",fe,this),this.id=t}return Object(s.a)(e,[{key:"updateId",value:function(e){this.id=e}}]),e}(),fe=Object(_.a)(ge.prototype,"id",[$.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ge),we=Object(h.g)(ye),Oe=(n(149),[{path:"/maps/boston",title:"Boston"},{path:"/maps/concord",title:"Concord"}]),ke=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(p.a)(t).call(this,e))).state={renderPano:!0},n.panoUnmount=n.panoUnmount.bind(Object(u.a)(n)),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"panoUnmount",value:function(){this.setState({renderPano:!1})}},{key:"render",value:function(){var e=this;return r.a.createElement(m.a,null,r.a.createElement(x,null,r.a.createElement(w,null,Oe.map(function(e){return r.a.createElement(m.b,{to:e.path,key:e.path,activeClassName:"ir-nav-item__active",className:"ir-nav-item"},e.title)})),r.a.createElement(O,null,r.a.createElement(h.d,null,r.a.createElement(h.b,{path:"/maps/:region",render:function(e){return r.a.createElement(H,e)}}),r.a.createElement(h.b,{exact:!0,path:"/viewPano/:id",render:function(t){return e.state.renderPano?r.a.createElement(we,t):null}}),r.a.createElement(h.b,{path:"/viewPano",component:we}),r.a.createElement(h.a,{exact:!0,from:"/",to:"maps/concord"})))))}}]),t}(a.Component);i.a.render(r.a.createElement(ke,null),document.getElementById("interface"))}]),[[75,1,2]]]);
//# sourceMappingURL=main.17a13776.chunk.js.map