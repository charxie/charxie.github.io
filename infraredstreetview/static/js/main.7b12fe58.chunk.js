(window.webpackJsonp=window.webpackJsonp||[]).push([[0],Array(34).concat([function(t){t.exports=[{id:"20190724143458",filename:"pano-20190724143458-mx.png",coord:{lat:42.36000896,lng:-71.05425626},calibration:2.1959999999999638,neighborhood:"quincy"},{id:"20190724143833",filename:"pano-20190724143833-mx.png",coord:{lat:42.36000888,lng:-71.05416259},calibration:2.6039999999999637,neighborhood:"quincy"},{id:"20190724145944",filename:"pano-20190724145944-mx.png",coord:{lat:42.36014171,lng:-71.0525956},calibration:-2.368000000000113,neighborhood:"atlave"},{id:"20190724151238",filename:"pano-20190724151238-mx.png",coord:{lat:42.35946,lng:-71.05190878},calibration:-2.872000000000005,neighborhood:"atlave"},{id:"20190724151553",filename:"pano-20190724151553-mx.png",coord:{lat:42.35901057,lng:-71.05173236},calibration:-.5760000000000074,neighborhood:"atlave"},{id:"20190724150711",filename:"pano-20190724150711-mx.png",coord:{lat:42.35976055,lng:-71.05235965},calibration:-1.352814692820381,neighborhood:"atlave"},{id:"20190925112226",filename:"pano-20190925112226-mx.png",calibration:-2.9,neighborhood:["caa","cab"],coord:{lat:42.45954294,lng:-71.35375977}},{id:"20190925112242",filename:"pano-20190925112242-mx.png",calibration:-2.252,neighborhood:"cab",coord:{lat:42.45956467,lng:-71.35345682}},{id:"20190925113249",filename:"pano-20190925113249-mx.png",calibration:-2.98,neighborhood:"caa",coord:{lat:42.45957315,lng:-71.35418699}},{id:"20190925112410",filename:"pano-20190925112410-mx.png",calibration:-2.444,neighborhood:"caa",coord:{lat:42.45966985,lng:-71.35391209}},{id:"20190925111418",filename:"pano-20190925111418-mx.png",calibration:-2.82,neighborhood:"cdt",coord:{lat:42.45969867,lng:-71.35140942}},{id:"20190925112757",filename:"pano-20190925112757-mx.png",calibration:-2.17,neighborhood:"caa",coord:{lat:42.45996776,lng:-71.35447809}},{id:"20190925110216",filename:"pano-20190925110216-mx.png",calibration:-1.7,neighborhood:"cdt",coord:{lat:42.45950405,lng:-71.35144528}},{id:"20190925112004",filename:"pano-20190925112004-mx.png",calibration:-2.91,neighborhood:"cab",coord:{lat:42.45927407,lng:-71.35335518}},{id:"20190925113346",filename:"pano-20190925113346-mx.png",calibration:-2.14,neighborhood:"caa",coord:{lat:42.45954963,lng:-71.354371}},{id:"20190925110449",filename:"pano-20190925110449-mx.png",calibration:-1.35,neighborhood:"cdt",coord:{lat:42.45962005,lng:-71.35099675}},{id:"20190925112944",filename:"pano-20190925112944-mx.png",calibration:-2.15,neighborhood:"caa",coord:{lat:42.45980487,lng:-71.35493824}},{id:"20190925111251",filename:"pano-20190925111251-mx.png",calibration:-1.82,neighborhood:"cdt",coord:{lat:42.45976744,lng:-71.35109601}},{id:"20190925111017",filename:"pano-20190925111017-mx.png",calibration:-3.38,neighborhood:"cdt",coord:{lat:42.45994194,lng:-71.35046685}},{id:"20190925112929",filename:"pano-20190925112929-mx.png",calibration:-2.77,neighborhood:"caa",coord:{lat:42.45967437,lng:-71.35489279}},{id:"20190925110659",filename:"pano-20190925110659-mx.png",calibration:-2.86,neighborhood:"cdt",coord:{lat:42.45980818,lng:-71.35042955}},{id:"20190925112754",filename:"pano-20190925112754-mx.png",calibration:-3.01,neighborhood:"caa",coord:{lat:42.4598957,lng:-71.35475797}},{id:"20190925112418",filename:"pano-20190925112418-mx.png",calibration:-2.94,neighborhood:"caa",coord:{lat:42.45977151,lng:-71.35404583}},{id:"20190925111907",filename:"pano-20190925111907-mx.png",calibration:2.82,neighborhood:"cab",coord:{lat:42.4594054,lng:-71.35342462}},{id:"20190925111628",filename:"pano-20190925111628-mx.png",calibration:-3.05,neighborhood:"cdt",coord:{lat:42.45958235,lng:-71.35173774}},{id:"20190925113109",filename:"pano-20190925113109-mx.png",calibration:-2.95,neighborhood:"caa",coord:{lat:42.45951864,lng:-71.35461781}}]},,,,,,,,,,,,,function(t,e,n){var a={"./pano-20190724143458-mx.png":120,"./pano-20190724143833-mx.png":121,"./pano-20190724145944-mx.png":122,"./pano-20190724150711-mx.png":123,"./pano-20190724151238-mx.png":124,"./pano-20190724151553-mx.png":125,"./pano-20190925110216-mx.png":126,"./pano-20190925110449-mx.png":127,"./pano-20190925110659-mx.png":128,"./pano-20190925111017-mx.png":129,"./pano-20190925111251-mx.png":130,"./pano-20190925111418-mx.png":131,"./pano-20190925111628-mx.png":132,"./pano-20190925111907-mx.png":133,"./pano-20190925112004-mx.png":134,"./pano-20190925112226-mx.png":135,"./pano-20190925112242-mx.png":136,"./pano-20190925112410-mx.png":137,"./pano-20190925112418-mx.png":138,"./pano-20190925112754-mx.png":139,"./pano-20190925112757-mx.png":140,"./pano-20190925112929-mx.png":141,"./pano-20190925112944-mx.png":142,"./pano-20190925113109-mx.png":143,"./pano-20190925113249-mx.png":144,"./pano-20190925113346-mx.png":145};function o(t){var e=r(t);return n(e)}function r(t){if(!n.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}o.keys=function(){return Object.keys(a)},o.resolve=r,t.exports=o,o.id=47},,,function(t){t.exports={quincy:{type:"linear",map:["20190724143458","20190724143833"]},cdt:{type:"irregular",map:{20190925111628:["20190925111418","20190925110216"],20190925110216:["20190925111628","20190925111418","20190925110449"],20190925111418:["20190925111628","20190925110216","20190925111251"],20190925111251:["20190925111418","20190925110449","20190925111017"],20190925110449:["20190925110216","20190925111251","20190925110659"],20190925110659:["20190925110449","20190925111017"],20190925111017:["20190925110659","20190925111251"]}},caa:{type:"circular",map:["20190925112410","20190925112226","20190925113249","20190925113346","20190925113109","20190925112929","20190925112944","20190925112754","20190925112757","20190925112418"]},cab:{type:"linear",map:["20190925112226","20190925112242","20190925111907","20190925112004"]},atlave:{type:"linear",map:["20190724151553","20190724151238","20190724150711","20190724145944"]}}},,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){t.exports=n(149)},,,,function(t,e,n){},,,,,,,,,,,,,,,,,,function(t,e,n){},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAALCAMAAACecocUAAAACXBIWXMAAAAcAAAAHAAPAbmPAAAAIVBMVEUAAABVnbVRnbVRnbVdpb2l4fpVnb1dqcFVnblVobmFyeFl3ybiAAAAC3RSTlMAtb18tGwapUy9gIWpoGAAAABESURBVHja7f3HAcQwDMMAkFSzvf/A8V2aMgRfENRWAJBG0XITBuXl4tiWc0XEmkyYfrgLGehxxgnVxaWP7/P9Tr/f/h6CtgH6SIBB6wAAAABJRU5ErkJggg=="},function(t,e,n){t.exports=n.p+"static/media/rotating.4957277e.png"},,,,,,,,,,,,,,,,,,,,,,function(t,e,n){t.exports=n.p+"static/media/pano-20190724143458-mx.072de3d6.png"},function(t,e,n){t.exports=n.p+"static/media/pano-20190724143833-mx.0732614b.png"},function(t,e,n){t.exports=n.p+"static/media/pano-20190724145944-mx.0c7531e1.png"},function(t,e,n){t.exports=n.p+"static/media/pano-20190724150711-mx.f67813cf.png"},function(t,e,n){t.exports=n.p+"static/media/pano-20190724151238-mx.3f9e7726.png"},function(t,e,n){t.exports=n.p+"static/media/pano-20190724151553-mx.c1e8bceb.png"},function(t,e,n){t.exports=n.p+"static/media/pano-20190925110216-mx.15966b2a.png"},function(t,e,n){t.exports=n.p+"static/media/pano-20190925110449-mx.5b18415f.png"},function(t,e,n){t.exports=n.p+"static/media/pano-20190925110659-mx.a9cd19bd.png"},function(t,e,n){t.exports=n.p+"static/media/pano-20190925111017-mx.d1eacec2.png"},function(t,e,n){t.exports=n.p+"static/media/pano-20190925111251-mx.3a2748ab.png"},function(t,e,n){t.exports=n.p+"static/media/pano-20190925111418-mx.80a5715d.png"},function(t,e,n){t.exports=n.p+"static/media/pano-20190925111628-mx.c890f6ed.png"},function(t,e,n){t.exports=n.p+"static/media/pano-20190925111907-mx.f5896ac6.png"},function(t,e,n){t.exports=n.p+"static/media/pano-20190925112004-mx.7f51a340.png"},function(t,e,n){t.exports=n.p+"static/media/pano-20190925112226-mx.a1e5bd11.png"},function(t,e,n){t.exports=n.p+"static/media/pano-20190925112242-mx.4589189c.png"},function(t,e,n){t.exports=n.p+"static/media/pano-20190925112410-mx.5e375cce.png"},function(t,e,n){t.exports=n.p+"static/media/pano-20190925112418-mx.f8ad88bb.png"},function(t,e,n){t.exports=n.p+"static/media/pano-20190925112754-mx.e2a0bfca.png"},function(t,e,n){t.exports=n.p+"static/media/pano-20190925112757-mx.702d7268.png"},function(t,e,n){t.exports=n.p+"static/media/pano-20190925112929-mx.dad914bf.png"},function(t,e,n){t.exports=n.p+"static/media/pano-20190925112944-mx.fdd79d67.png"},function(t,e,n){t.exports=n.p+"static/media/pano-20190925113109-mx.1c1e94e1.png"},function(t,e,n){t.exports=n.p+"static/media/pano-20190925113249-mx.798912fc.png"},function(t,e,n){t.exports=n.p+"static/media/pano-20190925113346-mx.0775a445.png"},,,function(t,e,n){},function(t,e,n){"use strict";n.r(e);var a=n(0),o=n.n(a),r=n(19),i=n.n(r),c=(n(78),n(26)),s=n(20),l=n(11),p=n(12);function u(){var t=Object(l.a)(["\n\tflex: 1;\n\tpadding: 24px;\n\tpadding-top: ","px;\n"]);return u=function(){return t},t}function d(){var t=Object(l.a)(["\n\tposition: fixed;\n\tz-index: 999;\n\ttop: 0;\n\tpadding: ","px;\n\theight: calc(","px - ","px * 2);\n\tdisplay: flex;\n\tjustify-content: flex-start;\n\talign-items: center;\n\tbackground-color: #f8f8f8;\n\twidth: 100%;\n\n\t& .ir-nav-item {\n\t\tmargin-right: 1rem;\n\t\ttext-decoration: none;\n\t\tcolor: rgba(0, 0, 0, 0.6);\n\t}\n\n\t& .ir-nav-item__active {\n\t\tcolor: #ea6c2f;\n\t}\n"]);return d=function(){return t},t}function m(){var t=Object(l.a)(["\n\twidth: 100vw;\n\theight: 100vh;\n\tdisplay: flex;\n\tflex-direction: column;\n"]);return m=function(){return t},t}var h=p.a.div(m()),g=p.a.div(d(),12,64,12),f=p.a.div(u(),88),b=n(3),v=n.n(b),y=n(6),x=n(7),w=n(8),O=n(29),k=n(27),A=n(28),j=n(18),M=n(34),P=n(50);function S(t,e,n){if(!n)for(var a=0;a<t.length;a++){var o=[],r=!0,i=!1,c=void 0;try{for(var s,l=e[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var p=s.value;o.push(t[a][p])}}catch(v){i=!0,c=v}finally{try{r||null==l.return||l.return()}finally{if(i)throw c}}return o}for(a=0;a<t.length;a++)if(t[a].id===n){if(0===e.length)return t[a];var u={},d=!0,m=!1,h=void 0;try{for(var g,f=e[Symbol.iterator]();!(d=(g=f.next()).done);d=!0){var b=g.value;u[b]=t[a][b]}}catch(v){m=!0,h=v}finally{try{d||null==f.return||f.return()}finally{if(m)throw h}}return u}}function E(t,e){if(Array.isArray(e)){var n=[],a=!0,o=!1,r=void 0;try{for(var i,c=e[Symbol.iterator]();!(a=(i=c.next()).done);a=!0){var s=i.value,l=C(t,P[s]);Array.prototype.push.apply(n,l)}}catch(p){o=!0,r=p}finally{try{a||null==c.return||c.return()}finally{if(o)throw r}}return n}return C(t,P[e])}function C(t,e){if(e.map.length<2)return[];switch(e.type){case"linear":for(var n=0;n<e.map.length;n++)if(t===e.map[n])return 0===n?[e.map[1]]:n===e.map.length-1?[e.map[e.map.length-2]]:[e.map[n-1],e.map[n+1]];break;case"circular":for(n=0;n<e.map.length;n++)if(t===e.map[n])return 0===n?[e.map[1],e.map[e.map.length-1]]:n===e.map.length-1?[e.map[e.map.length-2],e.map[0]]:[e.map[n-1],e.map[n+1]];break;case"irregular":return e.map[t]}}var L={getPanoFileNameById:function(t){return Promise.resolve({data:{data:S(M,["filename"],t)}})},getPanoCoordById:function(t){return Promise.resolve({data:{data:S(M,["coord"],t)}})},getAllPanoIdAndCoord:function(){return Promise.resolve({data:{data:M}})},getPanoAllAttrById:function(t){return Promise.resolve({data:{data:S(M,[],t)}})},getNeighborsById:function(t,e){return Promise.resolve({data:{data:E(t,e)}})}};function I(){var t=Object(l.a)(["\n\twidth: 100%;\n\theight: 100%;\n\n\t& > div {\n\t\twidth: 100%;\n\t\theight: 100%;\n\t}\n"]);return I=function(){return t},t}function B(){var t=Object(l.a)(["\n\twidth: 100% !important;\n\theight: 100% !important;\n\tposition: relative !important;\n"]);return B=function(){return t},t}var R,z,V,T,N,Y,D=Object(p.a)(j.Map)(B()),F=p.a.div(I()),U={boston:{lat:42.36,lng:-71.053},concord:{lat:42.45955,lng:-71.3525}},G=function(t){function e(t){var n;return Object(x.a)(this,e),(n=Object(O.a)(this,Object(k.a)(e).call(this,t))).bounds=new n.props.google.maps.LatLngBounds,n.state={showComp:!1},n}return Object(A.a)(e,t),Object(w.a)(e,[{key:"componentDidMount",value:function(){var t=this;(function(){var e=Object(y.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.getAllPanoIdAndCoord().then(function(e){for(var n=[],a=e.data.data,o=0;o<a.length;o++)n.push({id:a[o].id,lat:a[o].coord.lat,lng:a[o].coord.lng});t.setState({coords:n,showComp:!0})});case 2:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}})()()}},{key:"showComponent",value:function(t){!0!==t&&!1!==t||this.setState({showComp:t})}},{key:"setBounds",value:function(){for(var t=0;t<this.state.coords.length;t++){var e=this.state.coords[t];this.bounds.extend(new this.props.google.maps.LatLng({lat:e.lat,lng:e.lng}))}}},{key:"addMarkers",value:function(){var t=this;return this.setBounds(),this.state.coords.map(function(e,n){return o.a.createElement(j.Marker,{lid:e.id,position:{lat:e.lat,lng:e.lng},onClick:function(e){return t.showComponent(!1),t.gotoPano(e.lid)},key:e.id})})}},{key:"gotoPano",value:function(t){this.props.history.push("/viewPano/".concat(t))}},{key:"render",value:function(){return this.state.showComp?o.a.createElement(D,{ref:this.props.onMapMounted,google:this.props.google,zoom:18,center:U[this.props.match.params.region],initialCenter:{lat:42.45955,lng:-71.3525},bounds:this.bounds},this.addMarkers()):null}}]),e}(a.Component),W=Object(j.GoogleApiWrapper)({apiKey:"".concat("AIzaSyAwmnfBgRgSFnydLrrkAJ2gYBfarvA7Fu4")})(Object(s.g)(G)),X=function(t){return o.a.createElement(F,null,o.a.createElement(W,t))},H=n(22),J=n(23),_=(n(56),n(40)),q=n(1),Q=n(42),K=n(68),Z=(n(96),n(2)),$=n(71);function tt(){var t=Object(l.a)(["\n\twidth: 100%;\n\theight: 100%;\n\n\t& > div {\n\t\twidth: 100%;\n\t\theight: 100%;\n\t}\n"]);return tt=function(){return t},t}function et(){var t=Object(l.a)(["\n\twidth: 100% !important;\n\theight: 100% !important;\n\tposition: relative !important;\n"]);return et=function(){return t},t}var nt,at=Object(p.a)(j.Map)(et()),ot=p.a.div(tt()),rt=function(){(nt=document.getElementsByClassName("Minimap")[0]).addEventListener("mouseover",function(t){return function(t){t.preventDefault(),nt.style.width="250px",nt.style.height="200px"}(t)},!1),nt.addEventListener("mouseout",function(t){return function(t){t.preventDefault(),nt.style.width="200px",nt.style.height="100px"}(t)},!1)};var it=(R=function(){function t(e,n,a,o){Object(x.a)(this,t),Object(H.a)(this,"lng",z,this),Object(H.a)(this,"lat",V,this),Object(H.a)(this,"id",T,this),Object(H.a)(this,"pmanOffsetY",N,this),this.lng=n,this.lat=e,this.id=o,this.pmanOffsetY=this.setPegmanRotationOffsetYFromCameraY(a)}return Object(w.a)(t,[{key:"updateValues",value:function(t,e,n,a){this.lng=e,this.lat=t,this.id=a,this.pmanOffsetY=this.setPegmanRotationOffsetYFromCameraY(n)}},{key:"updatePegmanOffset",value:function(t){this.pmanOffsetY=this.setPegmanRotationOffsetYFromCameraY(t)}},{key:"setPegmanRotationOffsetYFromCameraY",value:function(t){var e=Math.ceil(180*-t/Math.PI);return e<0&&(e=360+e),9+60*Math.round(e/22.5)}}]),t}(),z=Object(J.a)(R.prototype,"lng",[Z.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=Object(J.a)(R.prototype,"lat",[Z.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=Object(J.a)(R.prototype,"id",[Z.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=Object(J.a)(R.prototype,"pmanOffsetY",[Z.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R),ct=Object($.a)(Y=function(t){function e(t){var a;return Object(x.a)(this,e),(a=Object(O.a)(this,Object(k.a)(e).call(this,t))).panoStore=void 0,a.mStore=void 0,a.bounds=new a.props.google.maps.LatLngBounds,a.dotIcon={url:n(97),size:new a.props.google.maps.Size(11,11),origin:new a.props.google.maps.Point(0,0),anchor:new a.props.google.maps.Point(5.5,5.5)},a.pman=void 0,a.state={showComp:!1,mapStore:a.props.mapStore},a.mStore=a.props.mapStore,a.panoStore=a.props.panoStore,a}return Object(A.a)(e,t),Object(w.a)(e,[{key:"componentDidMount",value:function(){var t=this;(function(){var e=Object(y.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.getAllPanoIdAndCoord().then(function(e){for(var n=[],a=e.data.data,o=0;o<a.length;o++)n.push({id:a[o].id,lat:a[o].coord.lat,lng:a[o].coord.lng});t.setState({coords:n,showComp:!0})});case 2:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}})()()}},{key:"showComponent",value:function(t){!0!==t&&!1!==t||this.setState({showComp:t})}},{key:"setBounds",value:function(){for(var t=0;t<this.state.coords.length;t++){var e=this.state.coords[t];this.bounds.extend(new this.props.google.maps.LatLng({lat:e.lat,lng:e.lng}))}}},{key:"addPegman",value:function(){var t={url:n(98),size:new this.props.google.maps.Size(44,49),origin:new this.props.google.maps.Point(8,this.mStore.pmanOffsetY),anchor:new this.props.google.maps.Point(22,34)};return this.pman=o.a.createElement(j.Marker,{lid:this.mStore.id,position:{lat:this.mStore.lat,lng:this.mStore.lng},icon:t,key:this.mStore.id}),this.pman}},{key:"addMarkers",value:function(){var t,e=this;return this.setBounds(),this.state.coords.map(function(n,a){if(e.state.coords[a].id!==e.mStore.id)return t=e.dotIcon,o.a.createElement(j.Marker,{lid:n.id,position:{lat:n.lat,lng:n.lng},onClick:function(t){return e.gotoPano(t.lid)},icon:t,key:n.id})})}},{key:"gotoPano",value:function(t){this.panoStore.id=t}},{key:"render",value:function(){return this.state.showComp?o.a.createElement(at,{ref:this.props.onMapMounted,google:this.props.google,zoom:17,center:{lat:this.mStore.lat,lng:this.mStore.lng},initialCenter:{lat:this.mStore.lat,lng:this.mStore.lng},bounds:this.bounds,onReady:rt,streetViewControl:!1,fullscreenControl:!1,mapTypeControl:!1,rotateControl:!1},this.addMarkers(),this.addPegman()):null}}]),e}(a.Component))||Y,st=Object(j.GoogleApiWrapper)({apiKey:"".concat("AIzaSyAwmnfBgRgSFnydLrrkAJ2gYBfarvA7Fu4")})(Object(s.g)(ct)),lt=function(t){return o.a.createElement(ot,null,o.a.createElement(st,t))},pt=n(53),ut=function(){function t(e){var n=this;Object(x.a)(this,t),this.coord={lat:0,lng:0},this.calibration=0,this.id=void 0,this.fname="",this.neighborhood="",this.neighborArr=void 0,this.cameraY=void 0,this.setAllAttr=Object(y.a)(v.a.mark(function t(){return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L.getPanoAllAttrById(n.id).then(function(t){n.fname=t.data.data.filename,n.coord.lat=t.data.data.coord.lat,n.coord.lng=t.data.data.coord.lng,n.calibration=t.data.data.calibration,n.neighborhood=t.data.data.neighborhood});case 2:case"end":return t.stop()}},t)})),this.getNeighborIds=Object(y.a)(v.a.mark(function t(){return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L.getNeighborsById(n.id,n.neighborhood).then(function(t){n.neighborArr=t.data.data});case 2:case"end":return t.stop()}},t)})),this.updateCalibration=function(){var t=Object(y.a)(v.a.mark(function t(e){return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:({calibration:-e.rotation.y}),alert("Update Calibration is disabled at this moment!");case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),this.id=e}return Object(w.a)(t,[{key:"getDistanceTo",value:function(t){return pt.getDistance(this.coord,t.coord)}},{key:"getDistanceToNeighbors",value:function(t){return t.map(this.getDistanceTo)}},{key:"getBearingTo",value:function(t){return pt.getRhumbLineBearing(this.coord,t.coord)}},{key:"getBearingToNeighbors",value:function(t){return t.map(this.getBearingTo)}}]),t}(),dt=function(){function t(){Object(x.a)(this,t),this.mesh=void 0,this.material=void 0,this.geometry=void 0,this.id=void 0,this.geometry=new q.ConeBufferGeometry(.2,1,16),this.material=new q.MeshBasicMaterial({color:"white"}),this.mesh=new q.Mesh(this.geometry,this.material)}return Object(w.a)(t,[{key:"onClickHandler",value:function(){}}]),t}();function mt(){var t=Object(l.a)(["\n\t&,\n\t&:after {\n\t\tborder-radius: 50%;\n\t\twidth: ","px;\n\t\theight: ","px;\n\t}\n\t& {\n\t\tmargin: 60px auto;\n\t\tfont-size: 10px;\n\t\tposition: relative;\n\t\ttext-indent: -9999em;\n\t\tborder-top: 1.1em solid rgba(0, 0, 0, 0.1);\n\t\tborder-right: 1.1em solid rgba(0, 0, 0, 0.1);\n\t\tborder-bottom: 1.1em solid rgba(0, 0, 0, 0.1);\n\t\tborder-left: 1.1em solid ",";\n\t\t-webkit-transform: translateZ(0);\n\t\t-ms-transform: translateZ(0);\n\t\ttransform: translateZ(0);\n\t\t-webkit-animation: load8 1.1s infinite linear;\n\t\tanimation: load8 1.1s infinite linear;\n\t}\n\t@-webkit-keyframes load8 {\n\t\t0% {\n\t\t\t-webkit-transform: rotate(0deg);\n\t\t\ttransform: rotate(0deg);\n\t\t}\n\t\t100% {\n\t\t\t-webkit-transform: rotate(360deg);\n\t\t\ttransform: rotate(360deg);\n\t\t}\n\t}\n\t@keyframes load8 {\n\t\t0% {\n\t\t\t-webkit-transform: rotate(0deg);\n\t\t\ttransform: rotate(0deg);\n\t\t}\n\t\t100% {\n\t\t\t-webkit-transform: rotate(360deg);\n\t\t\ttransform: rotate(360deg);\n\t\t}\n\t}\n"]);return mt=function(){return t},t}var ht,gt,ft=p.a.div(mt(),function(t){var e=t.width;return void 0===e?"48":e},function(t){var e=t.width;return void 0===e?"48":e},function(t){var e=t.color;return void 0===e?"#ea6c2f":e}),bt=n(119),vt=function(t){function e(t){var a;return Object(x.a)(this,e),(a=Object(O.a)(this,Object(k.a)(e).call(this,t))).currLoc=void 0,a.neighbors=void 0,a.mapStore=void 0,a.panoStore=void 0,a.panoIdChangeReaction=void 0,a.cylindergeometry=new q.CylinderBufferGeometry(20,20,15,100,1,!0),a.cylindermaterial=void 0,a.cylindermesh=void 0,a.texture=void 0,a.loader=new q.TextureLoader,a.lines=[],a.tempcylindergeometry=new q.CylinderBufferGeometry(21,21,15,100,1,!0),a.tempcylindermaterial=void 0,a.tempcylindermesh=void 0,a.threeCamera=void 0,a.threeScene=void 0,a.cone0=void 0,a.cone1=void 0,a.cone2=void 0,a.n0=void 0,a.n1=void 0,a.n2=void 0,a.teleportToScene=function(){var t=Object(y.a)(v.a.mark(function t(e){return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a.currLoc=new ut(e),t.next=3,a.currLoc.setAllAttr().then(function(){a.texture=a.loader.load(n(47)("./".concat(a.currLoc.fname)),function(){a.tempcylindermaterial=new q.MeshBasicMaterial({map:a.texture,side:q.DoubleSide}),a.tempcylindermesh=new q.Mesh(a.tempcylindergeometry,a.tempcylindermaterial),a.tempcylindergeometry.scale(-1,1,1),a.tempcylindermesh.rotation.y=a.currLoc.calibration,a.threeScene.add(a.tempcylindermesh),a.animateTeleportationTextureFade();var t=a.currLoc,e=t.coord,n=t.cameraY,o=t.id;a.mapStore.updateValues(e.lat,e.lng,n,o)},void 0,function(t){console.error(t)})});case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),a.animateTeleportationTextureFade=function(){var t={at:a.cylindermaterial.opacity},e=new bt.Tween(t).to({at:.1},500).easing(bt.Easing.Quadratic.InOut);e.onUpdate(function(){a.cylindermaterial.opacity=t.at}),e.onComplete(Object(y.a)(v.a.mark(function t(){return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a.threeCamera.rotation.y=0,a.threeCamera.fov=40,a.threeCamera.updateProjectionMatrix(),a.cylindermaterial.map=a.texture,a.cylindermesh.rotation.y=a.currLoc.calibration,a.cylindermaterial.transparent=!1,a.cylindermaterial.opacity=1,a.threeScene.remove(a.tempcylindermesh),a.tempcylindermesh.geometry.dispose(),a.tempcylindermesh.material.dispose(),a.tempcylindermesh=void 0,a.tempcylindergeometry.scale(-1,1,1),t.next=14,a.setNeighbors().then(a.RenderArrows);case 14:case"end":return t.stop()}},t)}))),a.cylindermaterial.transparent=!0,e.start()},a.RenderArrows=function(){var t=a.neighbors.keys();a.n0=a.neighbors.get(t.next().value),console.log(a.currLoc.id),a.cone0.position.z=-Math.cos(a.n0.bearing*Math.PI/180),a.cone0.position.x=Math.sin(a.n0.bearing*Math.PI/180),a.cone0.rotation.x=-1.5708,a.cone0.rotation.z=-a.n0.bearing*Math.PI/180,a.cone1.visible=!1,a.cone2.visible=!1,a.neighbors.size>1&&(a.n1=a.neighbors.get(t.next().value),a.cone1.visible=!0,a.cone1.position.z=-Math.cos(a.n1.bearing*Math.PI/180),a.cone1.position.x=Math.sin(a.n1.bearing*Math.PI/180),a.cone1.rotation.x=-1.5708,a.cone1.rotation.z=-a.n1.bearing*Math.PI/180),3===a.neighbors.size&&(a.n2=a.neighbors.get(t.next().value),a.cone2.visible=!0,a.cone2.position.z=-Math.cos(a.n2.bearing*Math.PI/180),a.cone2.position.x=Math.sin(a.n2.bearing*Math.PI/180),a.cone2.rotation.x=-1.5708,a.cone2.rotation.z=-a.n2.bearing*Math.PI/180)},a.state={isLoading:!0},a.RenderPano=a.RenderPano.bind(Object(_.a)(a)),a}return Object(A.a)(e,t),Object(w.a)(e,[{key:"componentDidMount",value:function(){var t=this;Object(K.disableBodyScroll)(document.querySelector("#interface")),function(){var e=Object(y.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.currLoc=new ut(t.panoId),e.next=3,t.currLoc.setAllAttr().then(function(){t.loadTexture()});case 3:t.neighbors=new Map,t.setNeighbors();case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()()}},{key:"setNeighbors",value:function(){var t=Object(y.a)(v.a.mark(function t(){var e,n,a,o,r,i,c,s=this;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.neighbors.clear(),t.next=3,this.currLoc.getNeighborIds();case 3:if(0!==(e=this.currLoc.neighborArr).length){t.next=9;break}return console.log("No neighbors discorvered..."),t.abrupt("return");case 9:n=!0,a=!1,o=void 0,t.prev=12,r=v.a.mark(function t(){var e,n;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=c.value,n=new ut(e),t.next=4,n.setAllAttr().then(function(){s.addNeighbor(n)});case 4:case"end":return t.stop()}},t)}),i=e[Symbol.iterator]();case 15:if(n=(c=i.next()).done){t.next=20;break}return t.delegateYield(r(),"t0",17);case 17:n=!0,t.next=15;break;case 20:t.next=26;break;case 22:t.prev=22,t.t1=t.catch(12),a=!0,o=t.t1;case 26:t.prev=26,t.prev=27,n||null==i.return||i.return();case 29:if(t.prev=29,!a){t.next=32;break}throw o;case 32:return t.finish(29);case 33:return t.finish(26);case 34:case"end":return t.stop()}},t,this,[[12,22,26,34],[27,,29,33]])}));return function(){return t.apply(this,arguments)}}()},{key:"addNeighbor",value:function(t){this.neighbors.set(t.id,{location:t,distance:this.currLoc.getDistanceTo(t),bearing:this.currLoc.getBearingTo(t)})}},{key:"loadTexture",value:function(){var t=this;this.texture=this.loader.load(n(47)("./".concat(this.currLoc.fname)),function(){t.mapStore=new it(t.currLoc.coord.lat,t.currLoc.coord.lng,0,t.currLoc.id),t.panoStore=new yt(t.currLoc.id),t.panoIdChangeReaction=Object(Z.l)(function(){return t.panoStore.id},function(e,n){t.teleportToScene(e)}),t.setState({isLoading:!1})},void 0,function(t){console.error(t)}),this.cylindermaterial=new q.MeshBasicMaterial({map:this.texture,side:q.DoubleSide}),this.cylindermesh=new q.Mesh(this.cylindergeometry,this.cylindermaterial),this.cylindergeometry.scale(-1,1,1),this.cylindermesh.rotation.y=this.currLoc.calibration}},{key:"CameraLookNorth",value:function(t){var e=this,n={at:t.rotation.y},a=new bt.Tween(n).to({at:0},750).easing(bt.Easing.Quadratic.InOut);a.onUpdate(function(){t.rotation.y=n.at}),a.onComplete(function(){t.rotation.y=0,e.mapStore.updatePegmanOffset(0)}),a.start()}},{key:"RenderPano",value:function(){var t=this,e=Object(a.useRef)(),r=Object(Q.c)(),i=r.gl,c=r.camera,s=r.canvas,l=r.scene;this.threeCamera=c,this.threeScene=l,c.fov=40,i.setSize(s.clientWidth,s.clientHeight),c.position.set(0,0,0),c.lookAt(0,0,0);var p=new dt,u=Object(a.useRef)(),d=Object(a.useRef)(),m=Object(a.useRef)();this.cone0=u.current,this.cone1=d.current,this.cone2=m.current;var h=!1,g=0;var f=0;var b=function(e){c.rotation.y+=e/1e3,c.rotation.y%=2*Math.PI,t.mapStore.updatePegmanOffset(c.rotation.y)};s.addEventListener("mousemove",function(t){return function(t){if(h){t.preventDefault();var e=t.clientX-g;t.clientY,g=t.clientX,t.clientY,b(e)}}(t)},!1),s.addEventListener("mousedown",function(t){return(e=t).preventDefault(),h=!0,g=e.clientX,void e.clientY;var e},!1),s.addEventListener("mouseup",function(t){return t.preventDefault(),void(h=!1)},!1),s.addEventListener("mousewheel",function(t){return function(t){if(t.path[0]===s){var e=t.wheelDeltaY/3;b(e)}}(t)},!1),s.addEventListener("touchmove",function(t){return function(t){var e=t.targetTouches[0].pageX-f;f=t.targetTouches[0].pageX,b(e)}(t)},!1),s.addEventListener("touchstart",function(t){f=t.targetTouches[0].pageX},!1),window.addEventListener("resize",function(){i.setSize(s.clientWidth,s.clientHeight),c.aspect=s.clientWidth/s.clientHeight,c.updateProjectionMatrix()},!1);var x=function(e){var n=t.neighbors.get(e).bearing*Math.PI/180,a=-t.neighbors.get(e).bearing*Math.PI/180;c.rotation.y>0&&(a=2*Math.PI-t.neighbors.get(e).bearing*Math.PI/180),c.rotation.y-a>=Math.PI&&c.rotation.y-a<2*Math.PI?a+=2*Math.PI:c.rotation.y-a<=-Math.PI&&c.rotation.y-a<-2*Math.PI&&(a=-2*Math.PI+a);var o={at:c.rotation.y},r={at:a},i=new bt.Tween(o).to(r,500).easing(bt.Easing.Quadratic.InOut);i.onUpdate(function(){c.rotation.y=o.at}),i.onComplete(function(){c.rotation.y=-t.neighbors.get(e).bearing*Math.PI/180,t.mapStore.updatePegmanOffset(c.rotation.y)});var s={zVal:c.position.z,xVal:c.position.x,fovValue:c.fov,opacity:t.cylindermaterial.opacity},p={zVal:-17*Math.cos(n),xVal:17*Math.sin(n),fovValue:75,opacity:.1},u=new bt.Tween(s).to(p,500);u.onUpdate(function(){c.position.z=s.zVal,c.position.x=s.xVal,c.fov=s.fovValue,c.updateProjectionMatrix(),t.cylindermaterial.opacity=s.opacity}),u.onComplete(Object(y.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c.position.set(0,0,0),c.fov=40,c.updateProjectionMatrix(),t.cylindermaterial.map=t.texture,t.cylindermesh.rotation.y=t.currLoc.calibration,t.cylindermaterial.transparent=!1,t.cylindermaterial.opacity=1,l.remove(t.tempcylindermesh),t.tempcylindermesh.geometry.dispose(),t.tempcylindermesh.material.dispose(),t.tempcylindermesh=void 0,t.tempcylindergeometry.scale(-1,1,1),e.next=14,t.setNeighbors().then(t.RenderArrows);case 14:case"end":return e.stop()}},e)}))),i.chain(u),t.cylindermaterial.transparent=!0,i.start()};l.add(this.cylindermesh);var w=function(){var e=Object(y.a)(v.a.mark(function e(a){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.currLoc=t.neighbors.get(a).location,t.texture=t.loader.load(n(47)("./".concat(t.currLoc.fname)),function(){t.tempcylindermaterial=new q.MeshBasicMaterial({map:t.texture,side:q.DoubleSide}),t.tempcylindermesh=new q.Mesh(t.tempcylindergeometry,t.tempcylindermaterial),t.tempcylindergeometry.scale(-1,1,1),t.tempcylindermesh.rotation.y=t.currLoc.calibration,l.add(t.tempcylindermesh),x(o);var e=t.currLoc,n=e.coord,a=e.cameraY,o=e.id;t.mapStore.updateValues(n.lat,n.lng,a,o)},void 0,function(t){console.error(t)});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();u.current&&d.current&&m.current&&this.RenderArrows();var O=Object(a.useRef)(),k=Object(a.useRef)(),A=Object(a.useRef)(),j=[new q.Vector3(0,1,0),new q.Vector3(-.6,-1,0),new q.Vector3(0,-.5,0),new q.Vector3(.6,-1,0)];function M(t,e){var n=!0,a=!1,o=void 0;try{for(var r,i=t[Symbol.iterator]();!(n=(r=i.next()).done);n=!0){r.value.material.opacity=e}}catch(c){a=!0,o=c}finally{try{n||null==i.return||i.return()}finally{if(a)throw o}}}A.current&&(A.current.vertices=j,A.current.faces.push(new q.Face3(0,1,2)),A.current.faces.push(new q.Face3(0,2,3)),A.current.computeFaceNormals(),A.current.scale(.3,.3,.3));var P=Object(a.useRef)();return P.current&&P.current.geometry.scale(2,2,2),Object(Q.b)(function(){bt.update(),O.current.position.set(-13*Math.sin(c.rotation.y),-4,-13*Math.cos(c.rotation.y)),k.current.position.set(-13*Math.sin(c.rotation.y-.4),-3,-13*Math.cos(c.rotation.y-.4)),k.current.rotation.y=c.rotation.y,k.current.rotation.z=-c.rotation.y}),o.a.createElement(o.a.Fragment,null,o.a.createElement("perspectiveCamera",{ref:e,fov:45,aspect:window.innerWidth/window.innerHeight,onUpdate:function(t){return t.updateProjectionMatrix()}}),o.a.createElement("group",{ref:O},o.a.createElement("mesh",{onClick:function(){w(t.n0.location.id)},onPointerOver:function(t){t.object.material.opacity=.7},onPointerOut:function(t){t.object.material.opacity=.5},ref:u,geometry:p.geometry},o.a.createElement("meshBasicMaterial",{attach:"material",color:"white",opacity:.5,transparent:!0})),o.a.createElement("mesh",{onClick:function(){w(t.n1.location.id)},onPointerOver:function(t){t.object.material.opacity=.7},onPointerOut:function(t){t.object.material.opacity=.5},ref:d,geometry:p.geometry},o.a.createElement("meshBasicMaterial",{attach:"material",color:"white",opacity:.5,transparent:!0})),o.a.createElement("mesh",{onClick:function(){w(t.n2.location.id)},onPointerOver:function(t){t.object.material.opacity=.7},onPointerOut:function(t){t.object.material.opacity=.5},ref:m,geometry:p.geometry},o.a.createElement("meshBasicMaterial",{attach:"material",color:"white",opacity:.5,transparent:!0}))),o.a.createElement("group",{onClick:function(){return t.CameraLookNorth(c)},onPointerOver:function(t){M(t.object.children,.8)},onPointerOut:function(t){M(t.object.children,.5)},ref:k},o.a.createElement("mesh",{position:[0,0,0],geometry:new q.CircleGeometry(.4,100,0)},o.a.createElement("meshBasicMaterial",{attach:"material",color:"white",opacity:.5,transparent:!0})),o.a.createElement("mesh",{position:[0,.03,.01]},o.a.createElement("geometry",{attach:"geometry",ref:A}),o.a.createElement("meshBasicMaterial",{attach:"material",color:"red",opacity:.5,transparent:!0}))))}},{key:"render",value:function(){return this.state.isLoading?o.a.createElement("div",{className:"spinner-container"},o.a.createElement(ft,{width:100,height:100})):o.a.createElement("div",{className:"Pano-container"},o.a.createElement("div",{className:"Pano-canvas"},o.a.createElement(Q.a,null,o.a.createElement(this.RenderPano,null))),o.a.createElement("div",{className:"Minimap"},o.a.createElement(lt,{mapStore:this.mapStore,panoStore:this.panoStore})))}},{key:"panoId",get:function(){return this.props.match.params.id||"20190724143833"}}]),e}(a.Component),yt=(ht=function(){function t(e){Object(x.a)(this,t),Object(H.a)(this,"id",gt,this),this.id=e}return Object(w.a)(t,[{key:"updateId",value:function(t){this.id=t}}]),t}(),gt=Object(J.a)(ht.prototype,"id",[Z.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ht),xt=Object(s.g)(vt),wt=(n(148),[{path:"/maps/boston",title:"Boston"},{path:"/maps/concord",title:"Concord"},{path:"/viewPano",title:"View Pano"}]);i.a.render(o.a.createElement(function(){return o.a.createElement(c.a,null,o.a.createElement(h,null,o.a.createElement(g,null,wt.map(function(t){return o.a.createElement(c.b,{to:t.path,key:t.path,activeClassName:"ir-nav-item__active",className:"ir-nav-item"},t.title)})),o.a.createElement(f,null,o.a.createElement(s.d,null,o.a.createElement(s.b,{path:"/maps/:region",component:X}),"}/>",o.a.createElement(s.b,{exact:!0,path:"/viewPano/:id",component:xt}),o.a.createElement(s.b,{path:"/viewPano",component:xt}),o.a.createElement(s.a,{exact:!0,from:"/",to:"maps/concord"})))))},null),document.getElementById("interface"))}]),[[74,1,2]]]);
//# sourceMappingURL=main.7b12fe58.chunk.js.map